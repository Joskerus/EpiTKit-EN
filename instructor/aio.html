<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="es" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Curso en ciencia de datos en salud pública y modelamiento de enfermedades infecciosas: Todo en una sola página</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XZ471458FQ');
    </script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../site.webmanifest">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Ir al contenido principal</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img alt="Epi-Training Kit" src="../assets/images/epitkit-logo.png"><span class="badge text-bg-danger" style="background-color: #FF4955; border-radius: 5px">
          <abbr title="Esta lección se encuentra en la fase pre-alfa, lo que significa que está en las primeras etapas de desarrollo, pero aún no se ha enseñado.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alfa
            </a>
            <span class="visually-hidden">Esta lección se encuentra en la fase pre-alfa, lo que significa que está en las primeras etapas de desarrollo, pero aún no se ha enseñado.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Vista de la instructora <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Vista de estudiante</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Navegación principal"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Alternar navegación">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menú</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Epi-Training Kit" src="../assets/images/epitkit-logo.png">
</div>
    <div class="lesson-title-md">
      Curso en ciencia de datos en salud pública y modelamiento de enfermedades infecciosas
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Buscar en la página All In One" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Curso en ciencia de datos en salud pública y modelamiento de enfermedades infecciosas
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Puntos Clave</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Notas de la instructora</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extraer todas las imágenes</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Más <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="reference.html">Glosario de términos</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Buscar en la página All In One"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Buscar en la página All In One">Buscar en la página All In One</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Curso en ciencia de datos en salud pública y modelamiento de enfermedades infecciosas
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Progreso de la lección" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="Cerrar menú" alt="Cerrar menú" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Cerrar " data-episodes="Episodios ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Vista de la instructora
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Vista de estudiante</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODIOS
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Resumen y agenda</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="Taller-R-RStudio.html">1. Introducción a R y Rstudio</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="Visualizacion.html">2. Introduccion a la visualizacion de datos en R con ggplot2.</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="Reporte.html">3. Reporte e informes tecnicos en R Markdown</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="limpieza.html">4. Limpieza de datos epidemiológicos</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="Banco_errores.html">5. Banco de preguntas y errores frecuentes</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RECURSOS
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Puntos Clave</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Notas de la instructora</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extraer todas las imágenes</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="reference.html">Glosario de términos</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">Todo en una sola página</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-Taller-R-RStudio"><p>Content from <a href="Taller-R-RStudio.html">Introducción a R y Rstudio</a></p>
<hr>
<p>Última actualización: 2024-10-28 |

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/episodes/Taller-R-RStudio.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Tiempo estimado: <i aria-hidden="true" data-feather="clock"></i> 88 minutos</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo se utilizan R y RStudio en el análisis de datos y la salud
pública?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<p>Al final de este taller usted podrá:</p>
<ul>
<li>Reconocer y hacer uso de R y RStudio.</li>
<li>Conocer los tipos de datos y operados básicos en R.</li>
<li>Comprender las estructuras básicas de datos en R tales como vectores
y tablas de datos.</li>
<li>Comprender el proceso de creación de funciones.</li>
<li>Reconocer el proceso de importación, exportación y transformación de
bases de datos con Tidyverse.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Pre requisito</h3>
<div class="callout-content">
<p>Esta unidad no tiene prerequisitos</p>
</div>
</div>
</div>
<div id="tabla-de-contenido" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="tabla-de-contenido" class="callout-inner">
<h3 class="callout-title">Tabla de contenido</h3>
<div class="callout-content">
<ul>
<li>Módulo: Ciencia de datos en salud pública
<ul>
<li>Unidad: Introducción a R y RStudio
<ul>
<li>Tema 1: Introducción</li>
<li>Tema 2: Instalación de R y RStudio</li>
<li>Tema 3: Ambiente de RStudio</li>
<li>Tema 4: Configuración de un proyecto en RStudio</li>
<li>Tema 5: Tipos de datos y operadores en R</li>
<li>Tema 6: Estructuras de datos en R</li>
<li>Tema 7: Funciones</li>
<li>Tema 8: Manipulación de datos con Tidyverse</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<section><h2 class="section-heading" id="tema-1-introducción">Tema 1: Introducción<a class="anchor" aria-label="anchor" href="#tema-1-introducci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>R es un lenguaje de programación especializado para análisis de
datos, es de uso gratuito y software libre. Por otra parte, RStudio es
un editor de R también disponible de manera gratuita. La diferencia
entre R y RStudio radica en que en R es el lenguaje de programación en
el que escribimos el código y RStudio es el ambiente de desarrollo que
permite trabajar con R de manera más fácil y amigable.</p>
<p>En los últimos años el uso de R ha crecido en el ámbito académico y
de la industria. R, además de ser un lenguaje de programación, es
también un entorno para computación estadística y creación de
visualizaciones. R y RStudio son herramientas esenciales para el
estudio, análisis y toma de decisiones en salud pública, ya que permiten
realizar análisis estadísticos detallados, modelar la propagación de
enfermedades, visualizar datos de manera efectiva y automatizar tareas.
Estas herramientas facilitan la manipulación y preparación de datos,
fomentan la colaboración en proyectos de ciencia de datos, y la toma de
decisiones basadas en evidencia. Además, son útiles en la formación y
educación en análisis de datos para profesionales de la salud, áreas
STEM y toma de decisiones.</p>
</section><section><h2 class="section-heading" id="tema-2-instalación-de-r-y-rstudio">Tema 2: Instalación de R y RStudio<a class="anchor" aria-label="anchor" href="#tema-2-instalaci%C3%B3n-de-r-y-rstudio"></a>
</h2>
<hr class="half-width">
<p>Para instalar R y RStudio debemos ir a nuestro navegador de
confianza. Allí vamos a buscar r-project, que es la página oficial de R
(<a href="https://www.r-project.org/" class="external-link uri">https://www.r-project.org/</a>). Recordemos que este es un
software de uso libre, no hay que hacer ningún pago por su descarga o
uso.</p>
<figure><img src="../fig/pagina_r.png" class="figure mx-auto d-block"></figure><p>Busca la opción de descarga “download R” y sigue las
instrucciones.</p>
<p>Para instalar Rstudio debemos ir a <a href="https://posit.co/download/rstudio-desktop/" class="external-link uri">https://posit.co/download/rstudio-desktop/</a> y buscar
donde diga Install RSudio. Si tenemos Windows podemos dar click en el
recuadro azul. Si es otro sistema operativo abajo encontraremos una
lista con las diferentes opciones. Para instalar, sigue las
instrucciones.</p>
<figure><img src="../fig/instalar_r.png" class="figure mx-auto d-block"></figure><p>Recuerda ejecutar el archivo que se descargó siguiendo los pasos. Es
recomendable que en el momento de la instalación elijamos la opción de
dejar un acceso directo en el escritorio.</p>
<p>Para comprobar que la instalación fue satisfactoria y en general para
hacer uso de R y RStudio debemos buscar en la ubicación que hayamos
elegido en la instalación donde quedó Rstudio y dar doble clic o clic
derecho y abrir. Lo primero que vemos al momento de abrir Rstudio es la
siguiente pantalla:</p>
<figure><img src="../fig/pantalla_r.png" class="figure mx-auto d-block"></figure><p>Escribe 2+2 donde aparece el cursor y da enter, si te aparece el
resultado 4 ¡Está todo listo para empezar!</p>
<figure><img src="../fig/2mas2.png" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="tema-3-ambiente-de-rstudio">Tema 3: Ambiente de RStudio<a class="anchor" aria-label="anchor" href="#tema-3-ambiente-de-rstudio"></a>
</h2>
<hr class="half-width">
<p>RStudio está compuesto por 4 secciones principales:</p>
<figure><img src="../fig/partes_pantalla.png" class="figure mx-auto d-block"></figure><ol style="list-style-type: decimal">
<li><p><strong>Editor (sección superior izquierda)</strong>: en esta
sección escribimos y editamos el código a través de la creación de
Scripts . Esta sección es fundamental para la reproducibilidad del
código. Este editor permite guardar el código para que sea usado en
futuras ocasiones. El código puede ser ejecutado en esta sección
posicionando el cursor de texto al final de la línea de código que se
ejecutará; otra opción es seleccionando la misma y empleando el comando
<code>Control+Enter</code> para Windows o <code>Command+Enter</code>
para Mac.</p></li>
<li><p><strong>Entorno (sección superior derecha)</strong>: en esta
sección se pueden visualizar los objetos, datos y funciones creados o
importados en el codigo que escribimos en los Scripts por ejemplo
objetos como vectores, arreglos, <code>data.frames</code> o tablas de
datos, objetos gráficos de <code>ggplot</code> , entre otros.</p></li>
<li><p><strong>Consola (sección inferior izquierda)</strong>: esta
sección es donde se ejecuta el código. No solo se ejecuta el código que
hemos escrito en el editor, sino que también el código puede escribirse
y ejecutarse aquí directamente presionando <code>Enter</code>. Sin
embargo, cuando el código se ejecuta directamente en la consola, no se
almacenan los comandos que ejecutamos, cuando se cierra la sesión de R
se pierde.</p></li>
<li><p><strong>Visualizador (sección inferior derecha)</strong>: en esta
sección se pueden visualizar los archivos en “<code>Files</code>”, los
gráficos en “<code>Plots</code>”, los paquetes que ya están instalados
en “<code>Packages</code>”, la ayuda de R con información de los
paquetes y el funcionamiento en “<code>Help</code>”, y páginas web en
“<code>Viewer</code>”.</p></li>
</ol></section><section><h2 class="section-heading" id="tema-4-configuración-de-un-proyecto-en-rstudio">Tema 4: Configuración de un proyecto en RStudio<a class="anchor" aria-label="anchor" href="#tema-4-configuraci%C3%B3n-de-un-proyecto-en-rstudio"></a>
</h2>
<hr class="half-width">
<p>Una de las grandes ventajas de usar RStudio es la posibilidad de usar
los Proyectos en R (R Project)(indicado por un archivo
<code>.Rproj</code>) lo que permite organizar el espacio de trabajo, el
historial y los documentos fuente. Para crear un Proyecto en R, es
importante seguir los siguientes pasos:</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Abrir RStudio y, en la esquina superior izquierda, seleccionar la
pestaña <strong>File (Archivo)</strong> -&gt; <strong>New Project…
(Proyecto Nuevo)</strong>.</li>
</ol>
<figure><img src="../fig/file_new_project.png" class="figure mx-auto d-block"></figure><ol start="2" style="list-style-type: decimal">
<li>Se desplegará una ventana con encabezado <strong>New Project
Wizard</strong>: <strong>Create Project</strong>, ahora se debe
seleccionar <strong>New Directory (Directorio Nuevo)</strong>.</li>
</ol>
<figure><img src="../fig/proyecto_r.png" class="figure mx-auto d-block"></figure><ol start="3" style="list-style-type: decimal">
<li><p>En la ventana con encabezado <strong>New Project
Wizard</strong>:<strong>Project Type</strong>, se debe seleccionar
<strong>New Project</strong> <img src="../fig/tipo_projecto.png" class="figure"></p></li>
<li><p>En la ventana con encabezado <strong>New Project
Wizard</strong>:<strong>Create New Project</strong>. En la casilla
<strong>Directory Name (Nombre del Directorio)</strong> coloque el
nombre deseado para su proyecto (e.g. “<code>IntroR</code>”).<br><img src="../fig/projectoR_introR.png" class="figure"></p></li>
<li><p>Hacemos clic en el botón <strong>Browse….</strong> Para buscar la
ubicación dentro del computador donde deseamos guardar el proyecto <img src="../fig/browse.png" class="figure"></p></li>
<li><p>Creamos una nueva carpeta con el mismo nombre del proyecto (e.g.
“<code>IntroR</code>”), así como las subcarpetas que necesitamos para
organizar nuestro trabajo y resultados: datos, scripts y figuras. Al
final, el proyecto debería parecerse a esta imagen:</p></li>
</ol>
<figure><img src="../fig/proyecto_r_revision.png" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="tema-5-tipos-de-datos-y-operadores-en-r">Tema 5: Tipos de datos y operadores en R<a class="anchor" aria-label="anchor" href="#tema-5-tipos-de-datos-y-operadores-en-r"></a>
</h2>
<hr class="half-width">
<div id="tipos-de-datos" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="tipos-de-datos" class="callout-inner">
<h3 class="callout-title">Tipos de datos</h3>
<div class="callout-content">
<p>R tiene la capacidad de almacenar y procesar distintos tipos de
datos. Entre estos se encuentran:</p>
<ul>
<li>Numéricos decimales<code>(double. Ej: 3.3)</code>
</li>
<li>Enteros <code>(integer. Ej: 3)</code>
</li>
<li>Caracteres
<code>(character. Ej: Municipio, sexo o nombre.)</code>
</li>
<li>Booleanos o lógicos <code>(logic. Ej: FALSE, TRUE)</code>
</li>
<li>Tipo fechas <code>(date. Ej: 01/01/2022)</code>
</li>
<li>Datos <code>NA</code>, <code>NAN</code> e <code>Inf</code>. La
diferencia entre <code>NA</code>, <code>NAN</code> e <code>Inf</code> es
que <code>NA</code> indica que hay dato faltante “missing”,
<code>NAN</code> significa “not a number”; es decir, hay información,
pero es un error y el resultado no es numérico, por ejemplo
<code>0/0</code>. Inf indica que hay operaciones cuyo resultado es
infinito como por ejemplo <code>1/0</code>. Si se hace operaciones entre
tipos variables se pueden obtener <code>Inf</code>.</li>
</ul>
</div>
</div>
</div>
<div id="operadores-matemáticos-y-lógicos" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="operadores-matemáticos-y-lógicos" class="callout-inner">
<h3 class="callout-title">Operadores matemáticos y lógicos</h3>
<div class="callout-content">
<p>Los operadores son herramientas matemáticas que nos permiten realizar
diferentes tareas con los datos que tenemos disponibles; por ejemplo,
con el operador <code>+</code> podemos efectuar una suma o incrementar
un índice. Algunos de los operadores más utilizados en R son los
siguientes:<br>
1. Operadores aritméticos (Ej: <code>+</code>, <code>-</code>,
<code>*</code>, que corresponden a suma, resta y multiplicación
respectivamente)<br>
2. Operadores de comparación
<code>(Ej: &lt;, &gt;, ==, &gt;=, &lt;=, !=)</code> 3. Operadores
booleanos <code>(&amp; (and), | (or), ! (not))</code></p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="operadores-de-asignación---y">Operadores de asignación &lt;- y =<a class="anchor" aria-label="anchor" href="#operadores-de-asignaci%C3%B3n---y"></a>
</h3>
<p>&lt;- Este es un operador común en R para asignar un determinado
valor a una variable y el alcance está dentro de la función y también
fuera de ella.</p>
<p><em>Ejemplo</em></p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nombre</span> <span class="op">&lt;-</span> <span class="st">"Laura"</span></span></code></pre>
</div>
<p>Se abra creado un objeto en el ambiente global (ubiquelo en la
sección lateral derecha superior): <img src="../fig/nombrelaura.png" class="figure"></p>
<p>= Este operador se utiliza para establecer un parámetro en un valor
dentro de una función. El alcance está solo dentro de la función. La
variable todavía contiene su valor original fuera de la función.</p>
</div>
</section><section><h2 class="section-heading" id="tema-6-funciones">Tema 6: Funciones<a class="anchor" aria-label="anchor" href="#tema-6-funciones"></a>
</h2>
<hr class="half-width">
<p>Imaginemos una función como una especie de “caja mágica” que recibe
ciertos datos o información como entrada y produce un resultado o
respuesta específica como salida. Es como seguir una receta que toma
ingredientes y como resultado tenemos un plato delicioso.</p>
<p>Para qué podamos utilizar una función debemos proporcionar unos datos
de entrada (<em>input</em>) que entran a la caja (la función) y de ahí
sale un resultado o datos de salida (<em>output</em>). La función puede
ser suma, resta, regresión logística o un modelo matemático. Entran
datos y salen otros que son producto de las operaciones en la
función.</p>
<div id="componentes-básicos-de-una-función" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="componentes-básicos-de-una-función" class="callout-inner">
<h3 class="callout-title">Componentes básicos de una función</h3>
<div class="callout-content">
<p>Los componentes básicos de una función son:</p>
<ul>
<li><p><strong><code>name</code> (nombre)</strong>: es el nombre que se
da a la función (Por ejemplo: myfun).</p></li>
<li><p><strong><code>formals</code> (argumentos)</strong>: son la serie
de elementos que controlan cómo llamar a la función.</p></li>
<li><p><strong><code>body</code> (cuerpo)</strong>: es la serie de
operaciones o modificaciones a los argumentos.</p></li>
<li><p><strong><code>output</code> (salida o resultado)</strong>: son
los resultados después de modificar los argumentos. Si esta salida
corresponde a una serie de datos, podemos extraerla usando el comando
<code>return</code>.</p></li>
</ul>
</div>
</div>
</div>
<p><strong>Ejemplo</strong>: con una base de datos queremos generar una
variable que es producto de una operación, por ejemplo, IMC (índice masa
corporal).</p>
<p>La función del IMC es conocida (<span class="math display">\[peso/(talla^2 )\]</span>) , y sus argumentos son
peso y talla.</p>
<p>Recordemos que en esta fórmula el peso debe estar en kg y la talla en
metros.</p>
<p>Para este ejemplo el input, o datos de entrada son el peso y la
variable talla, y el output sería el índice de masa corporal. Si tenemos
que el peso es 50kg y la talla 1.5m, el IMC será igual a 22.2.</p>
<figure><img src="../fig/ilustracion_imc.png" class="figure mx-auto d-block"></figure><p>(Ilustración adaptada por Maria Paula Forero)</p>
<p>En R podemos producir la función IMC mediante el siguiente
código:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">IMC</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">peso_kg</span>, <span class="va">talla_m</span><span class="op">)</span> <span class="op">{</span> <span class="co"># Aquí van los argumentos o input</span></span>
<span>    <span class="va">resultado</span> <span class="op">&lt;-</span> <span class="va">peso_kg</span><span class="op">/</span> <span class="va">talla_m</span><span class="op">^</span><span class="fl">2</span>  <span class="co"># Esta es el cuerpo u operación       </span></span>
<span>    <span class="kw">return</span><span class="op">(</span><span class="va">resultado</span><span class="op">)</span>           <span class="co"># Este es el output o resultado</span></span>
<span> <span class="op">}</span></span></code></pre>
</div>
<p>Ahora, utilicemos la función para calcular el IMC de una persona de
talla 1.75 cm y peso 80 kg, mediante el siguiente código</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">IMC</span>(<span class="at">peso_kg =</span> <span class="dv">80</span>, <span class="at">talla_m =</span> <span class="fl">1.75</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">26.12245</span></span></code></pre>
</div>
<p>Como se puede ver, para usar la función una vez establecida solo se
requiere el nombre y los argumentos.</p>
<div id="discussion2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p><strong>Reto</strong>: Usando la misma función calcula tu IMC.</p>
</div>
</div>
</div>
<p>En general, una función consiste en una secuencia de instrucciones
con el fin de llevar a cabo una tarea. De esta forma, por medio del uso
de funciones es posible sistematizar procesos complejos que se realizan
de manera rutinaria.</p>
<div class="section level3">
<h3 id="paquetes-o-librerías">Paquetes o librerías<a class="anchor" aria-label="anchor" href="#paquetes-o-librer%C3%ADas"></a>
</h3>
<p>En R, los paquetes, también llamados “librerías” se refieren a
conjuntos de funciones organizadas de manera lógica que pueden ser
utilizadas para llevar a cabo diversas tareas, como análisis, limpieza y
visualización de datos, ente otros.</p>
<div id="las-librerías-más-usadas-en-r-son" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="las-librerías-más-usadas-en-r-son" class="callout-inner">
<h3 class="callout-title">Las librerías más usadas en R son:</h3>
<div class="callout-content">
<ul>
<li>
<strong><code>ggplot2</code></strong>: sirve para la creación de
gráficos y visualizaciones de datos de alta calidad.</li>
<li>
<strong><code>dplyr</code></strong>: permite la manipulación y
transformación eficiente de datos.</li>
<li>
<strong><code>tidyr</code></strong>: utilizada para organizar y
reorganizar datos en un formato tabular ordenado.</li>
<li>
<strong><code>readr</code></strong>: sirve para leer y escribir
datos en formatos como <code>CSV</code>, <code>TSV</code> y otros.</li>
<li>
<strong><code>plyr</code></strong>: funciona para dividir, aplicar y
combinar datos de manera eficiente.</li>
</ul>
</div>
</div>
</div>
<p>A su vez, hay meta-librerías, es decir, aquellas que combinan varias
librerías. Un ejemplo de estas es la librería
<code>tidyverse</code>.</p>
</div>
</section><section><h2 class="section-heading" id="tema-7-estructuras-en-r">Tema 7: Estructuras en R<a class="anchor" aria-label="anchor" href="#tema-7-estructuras-en-r"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="vector">Vector<a class="anchor" aria-label="anchor" href="#vector"></a>
</h3>
<p>En R, un vector es una estructura de datos indexada que permite
almacenar varios elementos del mismo tipo en una única estructura. Por
ejemplo, podríamos tener un vector que contenga las edades de varias
personas, o un vector que contenga los nombres de diferentes
ciudades.</p>
<p>Los vectores en R son útiles porque permiten realizar operaciones y
cálculos con facilidad. Los elementos del vector se pueden sumar,
restar, multiplicar o dividir, y sus elementos son accesibles por medio
posición o índice.</p>
<p>En resumen, un vector en R es una colección ordenada de elementos del
mismo tipo de datos (ver Tema 5) que permite almacenar y manipular datos
de manera eficiente.</p>
<p>Para crear un vector en el código o script se escribe el nombre con
el que se va a reconocer (por ejemplo, edad o ciudad) y luego se debe
escribir el símbolo <code>&lt;-</code> (que da la orden a R para crear
el vector). Luego se escribe letra c que es la asignación que permite
inicializar el vector. Cada componente debe ir separado por comas, si
son caracteres debe ir entre comillas (si son números no), si es dato
booleano (falso o verdadero) tampoco va en comillas.</p>
<div id="discussion3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Así, los vectores se pueden crear ejecutando el comando
<code>c()</code>, como se puede visualizar a continuación:</p>
<p>Ejemplos</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nombre</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Emilia"</span>, <span class="st">"Maximo"</span>, <span class="st">"Axel"</span>, <span class="st">"Diana"</span><span class="op">)</span> <span class="co"># Nombre de las personas</span></span>
<span></span>
<span><span class="va">ciudad</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"La Plata"</span>,<span class="st">"Concepción"</span>, <span class="st">"Cuzco"</span>, <span class="st">"Bogota"</span><span class="op">)</span> <span class="co"># Ciudad de residencia</span></span>
<span></span>
<span><span class="va">edad</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">18</span>, <span class="fl">20</span>, <span class="fl">37</span>, <span class="fl">42</span><span class="op">)</span>  <span class="co"># Edad de las personas</span></span>
<span></span>
<span><span class="va">vacunado</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Estado de vacunación</span></span>
<span></span>
<span><span class="va">dosis</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2L</span>, <span class="fl">0L</span>, <span class="fl">1L</span>, <span class="fl">2L</span><span class="op">)</span> <span class="co"># Número de dosis recibidas`</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Nota: <em>El uso del símbolo <code>#</code> permite comentar el
código, es decir poner notas que expliquen una o más líneas del
código.</em></p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="data-frame-tabla-de-datos">Data.frame (Tabla de datos)<a class="anchor" aria-label="anchor" href="#data-frame-tabla-de-datos"></a>
</h3>
<p>Imaginemos un <code>data.frame</code> como una tabla con filas y
columnas, similar a una hoja de cálculo en Excel. Cada columna
representa un tipo de información específica (un vector) o variable (Por
ejemplo, la edad, el departamento o el nombre). En este ejemplo, cada
fila corresponde al registro de esas variables para un individuo. Es
importante tener en cuenta que los <code>data.frame</code> (Tabla de
datos) están compuestos por vectores cuyas dimensiones deben ser
iguales, es decir que todas las columnas deben tener el mismo número de
filas. Siguiendo la analogía de Excel, podemos pensar que cada vector es
una columna de una hoja de Excel.</p>
<p>Una ventaja de trabajar con <code>Data.frame</code> en R en vez de
una hoja de excel es que a medida que el tamaño de la tabla va
aumentando, en R se puede trabajar más rápido y eficientemente.</p>
<p>Para crear una tabla de datos se debe ejecutar el comando
<code>data.frame()</code>. Por ejemplo, utilizando los vectores que
definimos en la sección anterior:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_vacunas</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span></span>
<span>  nombre <span class="op">=</span> <span class="va">nombre</span>, </span>
<span>  ciudad <span class="op">=</span> <span class="va">ciudad</span>,</span>
<span>  edad <span class="op">=</span> <span class="va">edad</span>,</span>
<span>  vacunado <span class="op">=</span> <span class="va">vacunado</span>,</span>
<span>  dosis <span class="op">=</span> <span class="va">dosis</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora observemos cómo quedó la tabla de datos</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>datos_vacunas</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  nombre     ciudad edad vacunado dosis</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="dv">1</span> Emilia   La Plata   <span class="dv">18</span>     <span class="cn">TRUE</span>     <span class="dv">2</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="dv">2</span> Maximo Concepción   <span class="dv">20</span>    <span class="cn">FALSE</span>     <span class="dv">0</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="dv">3</span>   Axel      Cuzco   <span class="dv">37</span>    <span class="cn">FALSE</span>     <span class="dv">1</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="dv">4</span>  Diana     Bogota   <span class="dv">42</span>     <span class="cn">TRUE</span>     <span class="dv">2</span></span></code></pre>
</div>
<div id="parte-de-un-data.frame" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="parte-de-un-data.frame" class="callout-inner">
<h3 class="callout-title">Parte de un data.frame</h3>
<div class="callout-content">
<p>Algunas funciones que permiten conocer características como nombres o
tamaños de las filas o columnas del <code>data.frame</code> son:</p>
<ul>
<li><p><code>colnames()</code>: nombres de las columnas</p></li>
<li><p><code>rownames()</code>: nombres de las filas</p></li>
<li><p><code>nrow()</code>: número de filas</p></li>
<li><p><code>ncol()</code>: número de columnas</p></li>
<li><p><code>length()</code>: longitud de la tabla de datos</p></li>
</ul>
</div>
</div>
</div>
<p>Ahora, para acceder a la descripción de la estructura general de una
tabla de datos (y en general cualquier objeto de R) usamos el comando
<code>str</code>, en este caso escribimos:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">str</span>(datos_vacunas)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="st">'data.frame'</span><span class="sc">:</span>	<span class="dv">4</span> obs. of  <span class="dv">5</span> variables<span class="sc">:</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a> <span class="er">$</span> nombre  <span class="sc">:</span> chr  <span class="st">"Emilia"</span> <span class="st">"Maximo"</span> <span class="st">"Axel"</span> <span class="st">"Diana"</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a> <span class="sc">$</span> ciudad  <span class="sc">:</span> chr  <span class="st">"La Plata"</span> <span class="st">"Concepción"</span> <span class="st">"Cuzco"</span> <span class="st">"Bogota"</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a> <span class="sc">$</span> edad    <span class="sc">:</span> num  <span class="dv">18</span> <span class="dv">20</span> <span class="dv">37</span> <span class="dv">42</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a> <span class="sc">$</span> vacunado<span class="sc">:</span> logi  <span class="cn">TRUE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">TRUE</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a> <span class="sc">$</span> dosis   <span class="sc">:</span> int  <span class="dv">2</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span></span></code></pre>
</div>
<p>Esto nos indica que la estructura (<code>datos_vacunas</code>)
corresponde a un <code>data.frame</code> con 4 observaciones y 5
variables.</p>
<p>Si usamos el comando <code>str(datos_vacunas$nombre)</code> podemos
ver la estructura de esa variable, que en este caro es un vector de
caracteres con longitud de 1 a 4.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">str</span>(datos_vacunas<span class="sc">$</span>nombre)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a> chr [<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>] <span class="st">"Emilia"</span> <span class="st">"Maximo"</span> <span class="st">"Axel"</span> <span class="st">"Diana"</span></span></code></pre>
</div>
<p>Para acceder a los diferentes componentes de la tabla de datos usamos
la sintaxis <code>[,]</code>, donde la primera dimensión corresponde a
filas y la segunda dimensión a columnas.</p>
<div id="discussion4" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discusión</h3>
<div class="callout-content">
<p>Por ejemplo, si queremos saber cuántas dosis de vacunas se aplicó
Maximo ¿qué debemos hacer?</p>
</div>
</div>
</div>
<p>Veamos a qué fila y columna corresponde este dato:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_vacunas</span></span></code></pre>
</div>
<figure><img src="../fig/maximo.png" class="figure mx-auto d-block"></figure><p>Vemos que Maximo está en la fila 2 y las dosis en la columna 5. Por
lo tanto, la intersección de estas dos variables nos dará el número de
dosis que tiene Maximo.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>datos_vacunas[<span class="dv">2</span>, <span class="dv">5</span>] </span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">0</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="crear-y-abrir-tablas-de-datos">Crear y abrir tablas de datos<a class="anchor" aria-label="anchor" href="#crear-y-abrir-tablas-de-datos"></a>
</h3>
<p>R nos permite no solo crear tablas de datos sino también abrir
archivos que las contengan. De hecho, la mayoría de las veces no se
crean directamente los <code>data.frame</code> en R sino que se importa
un <code>data.frame</code> de alguna fuente de datos, por ejemplo, la
base de datos del sistema de vigilancia de algún evento de interés.</p>
<div id="fuentes-de-conjunto-de-datos" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="fuentes-de-conjunto-de-datos" class="callout-inner">
<h3 class="callout-title">Fuentes de conjunto de datos</h3>
<div class="callout-content">
<p>Para esto, en R hay tres fuentes de conjuntos de datos que podemos
utilizar:</p>
<ul>
<li>Tabla de datos importada (desde los formatos <code>.xlsx</code>,
<code>.csv</code>, <code>.stata</code>, o <code>.RDS</code>, entre
otros)</li>
<li>Tabla de datos que forma parte de un paquete en R (Ej.
<code>MASS</code>, <code>islands</code>, etc)</li>
<li>Tabla de datos creada durante la sesión en R (Ej. las estructuras de
los primeros ejercicios)</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="importar-una-tabla-de-datos">Importar una tabla de datos<a class="anchor" aria-label="anchor" href="#importar-una-tabla-de-datos"></a>
</h3>
<p>Para importar una tabla de datos de diferentes fuentes necesitamos
emplear diferentes tipos de funciones.</p>
<p>Aquí algunos ejemplos del tipo de datos, y la librería que es
necesario cargar y la función a utilizar.</p>
<table class="table"><tbody>
<tr class="odd">
<td><strong>Tipo de datos</strong></td>
<td><strong>Función</strong></td>
<td><strong>Paquete</strong></td>
</tr>
<tr class="even">
<td>csv</td>
<td><code>read_csv</code></td>
<td><code>readr</code></td>
</tr>
<tr class="odd">
<td>xls</td>
<td><code>read_excel, read_xls,read_xlsx</code></td>
<td><code>readxl</code></td>
</tr>
<tr class="even">
<td>RDS</td>
<td><code>readRDS</code></td>
<td><code>base</code></td>
</tr>
<tr class="odd">
<td>dta</td>
<td><code>read_dta</code></td>
<td><code>haven</code></td>
</tr>
<tr class="even">
<td>sas</td>
<td><code>read_sas</code></td>
<td><code>haven</code></td>
</tr>
</tbody></table>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p><strong>Recordatorio</strong>: Si se desea almacenar los datos en un
objeto se debe usar el operador de asignación.</p>
<p>Ejemplo:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"paquete que contiene la función"</span><span class="op">)</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu">funcion_read</span><span class="op">(</span><span class="st">"direccion_de_los_datos.formato"</span><span class="op">)</span></span></code></pre>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="../fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="tema-8-manipulación-de-datos-con-tidyverse">Tema 8: Manipulación de datos con <code>tidyverse</code>
<a class="anchor" aria-label="anchor" href="#tema-8-manipulaci%C3%B3n-de-datos-con-tidyverse"></a>
</h2>
<hr class="half-width">
<p><code>tidyverse</code> es una meta-librería que combina varias
librerías. <code>tidyverse</code> viene de la palabra “tidy” que en
inglés hacer referencia a ordenar, limpiar y arreglar, en este caso
hacer estas acciones, pero para los datos. Por tanto,
<code>tidyverse</code> es una manera de referirse al universo de estas
acciones en R.</p>
<p><code>tidyverse</code> al ser una meta-librería va a cargar
automáticamente varias librerías como (<code>dplyr</code>,
<code>tidyr</code>, <code>tibble</code>, <code>readr</code>,
<code>purr</code>, entre otros) que son útiles para la manipulación de
datos.</p>
<p>Para instalar una librería usamos el comando
<code>install.packages</code>. Esto sólo lo debemos hacer una vez en
nuestro computador. Veamos cómo podemos utilizarlo para instalar
tidyverse:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">'tidyverse'</span><span class="op">)</span></span></code></pre>
</div>
<p>Para llamar o importar una librería ya instalada usamos el comando
<code>library</code>. Este en comando debemos ejecutarlo cada vez que
re-iniciamos R o abrimos RStudio.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>── Attaching core tidyverse packages ──────────────────────── tidyverse <span class="dv">2</span>.<span class="fl">0.0</span> ──</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>✔ dplyr     <span class="dv">1</span>.<span class="fl">1.4</span>     ✔ readr     <span class="dv">2</span>.<span class="fl">1.5</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>✔ forcats   <span class="dv">1</span>.<span class="fl">0.0</span>     ✔ stringr   <span class="dv">1</span>.<span class="fl">5.1</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>✔ ggplot2   <span class="dv">3</span>.<span class="fl">5.1</span>     ✔ tibble    <span class="dv">3</span>.<span class="fl">2.1</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>✔ lubridate <span class="dv">1</span>.<span class="fl">9.3</span>     ✔ tidyr     <span class="dv">1</span>.<span class="fl">3.1</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>✔ purrr     <span class="dv">1</span>.<span class="fl">0.2</span>     </span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>── Conflicts ────────────────────────────────────────── <span class="fu">tidyverse_conflicts</span>() ──</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>✖ dplyr<span class="sc">::</span><span class="fu">filter</span>() masks stats<span class="sc">::</span><span class="fu">filter</span>()</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>✖ dplyr<span class="sc">::</span><span class="fu">lag</span>()    masks stats<span class="sc">::</span><span class="fu">lag</span>()</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>ℹ Use the conflicted <span class="fu">package</span> (<span class="sc">&lt;</span>http<span class="sc">:</span><span class="er">//</span>conflicted.r<span class="sc">-</span>lib.org<span class="sc">/</span><span class="er">&gt;</span>) to force all conflicts to become errors</span></code></pre>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="../fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div class="section level3">
<h3 id="abrir-y-explorar-una-tabla-de-datos-importados-de-excel">Abrir y explorar una tabla de datos importados de Excel<a class="anchor" aria-label="anchor" href="#abrir-y-explorar-una-tabla-de-datos-importados-de-excel"></a>
</h3>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Este es el conjunto de datos para esta práctica: <a href="https://raw.githubusercontent.com/TRACE-LAC/TRACE-LAC-data/main/datos_covid.xlsx" class="external-link">datos_covid.xlsx</a></p>
<p>Dentro del directorio en el que estamos trabajando actualmente,
debemos crear una carpeta llamada <em>data</em>.<br>
Ahora debemos guardar la tabla de datos descargado en la carpeta data
que acabamos de crear.</p>
</div>
</div>
</div>
<p>Para importar tablas de datos desde <code>RDS</code>, se puede usar
la función <code>read_excel</code>, que está en el paquete
<code>readxl</code> vinculado a <code>tidyverse</code>. Sin embargo,
todavía es necesario cargar la biblioteca <code>readxl</code>, ya que no
es un paquete <code>tidyverse</code> principal. Para esto, escribimos en
la consola:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">readxl</span><span class="op">)</span> </span>
<span> </span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read_excel</span><span class="op">(</span><span class="st">"data/datos_covid.xlsx"</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora se ha creado un objeto tipo <code>data.frame</code>. <img src="../fig/read_excel.png" class="figure"></p>
<p>A continuación, veremos algunas de las funciones más utilizadas de
<code>tidyverse</code>.</p>
</div>
<div class="section level3">
<h3 id="operador-tubería-pipe">Operador tubería (<em>pipe</em>)<a class="anchor" aria-label="anchor" href="#operador-tuber%C3%ADa-pipe"></a>
</h3>
<p>El operador tubería (<em>pipe</em>) <code>%&gt;%</code> es un
operador clave en <code>tidyverse</code>, el cual permite al usuario
enfatizar una secuencia de acciones en un objeto. Además, el uso de este
operador reduce la cantidad de código y mejora el desempeño.</p>
<p><strong>Ejemplo 1:</strong> En el siguiente diagrama podemos ver el
funcionamiento de la función pipe que permite en este caso aplicar
diferentes funciones a un conjunto de datos y sus resultados.</p>
<figure><img src="../fig/pipe.png" class="figure mx-auto d-block"></figure><p>(Ilustración adaptada por Maria Paula Forero)</p>
<p>Vamos a comparar el código cuando usamos vs cuando no usamos el pipe.
Para esto, debemos cargar la librería dplyr y vamos a hacer una tabla de
datos de ejemplo</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span> <span class="co"># Esta librería se carga automáticamente con tidyverserse </span></span>
<span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span>edad <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">12</span>, <span class="fl">23</span>, <span class="fl">32</span>, <span class="fl">60</span><span class="op">)</span>, dosis <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>El código del diagrama anterior sin el uso del operador <em>pipe</em>
sería el siguiente :</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_filtrados</span> <span class="op">&lt;-</span> <span class="fu">filter</span><span class="op">(</span><span class="va">datos</span>, <span class="va">edad</span> <span class="op">&gt;</span> <span class="fl">18</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">datos_con_esquema</span> <span class="op">&lt;-</span> <span class="fu">mutate</span><span class="op">(</span><span class="va">datos_filtrados</span>, </span>
<span>                            esquema <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">dosis</span> <span class="op">&gt;</span> <span class="fl">2</span>, <span class="st">"Completo"</span>, <span class="st">"Incompleto"</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">datos_agrupados</span> <span class="op">&lt;-</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">datos_con_esquema</span>, <span class="va">esquema</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datos_por_esquema</span> <span class="op">&lt;-</span> <span class="fu">summarise</span><span class="op">(</span><span class="va">datos_agrupados</span>, personas <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora, con la ayuda de una tubería o <em>pipe</em>, tenemos:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_por_esquema</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">datos</span>, <span class="va">edad</span> <span class="op">&gt;</span> <span class="fl">18</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span> esquema <span class="op">=</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">dosis</span> <span class="op">&gt;</span> <span class="fl">2</span>, <span class="st">"Completo"</span>, <span class="st">"Incompleto"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">esquema</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>personas <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div id="funciones-básicas-de-tidyverse" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="funciones-básicas-de-tidyverse" class="callout-inner">
<h3 class="callout-title">Funciones básicas de
<code>tidyverse</code>
</h3>
<div class="callout-content">
<ul>
<li><p><strong><code>glimpse()</code></strong>: utilizado para explorar
rápidamente una tabla de datos.</p></li>
<li><p><strong><code>group_by()</code></strong>: crea grupos dentro de
una tabla de datos.</p></li>
<li><p><strong><code>summarise()</code></strong>: devuelve una fila para
cada combinación de variables que han sido agrupadas</p></li>
<li><p><strong><code>select()</code></strong>: selecciona columnas de
una tabla de datos.</p></li>
<li><p><strong><code>filter()</code></strong>: filtra filas de una tabla
de datos según una condición de valores.</p></li>
<li><p><strong><code>arrange()</code></strong>: ordena filas de una
tabla de datos por el valor de una variable particular si es numérico, o
por orden alfabético si es un carácter.</p></li>
<li><p><strong><code>mutate()</code></strong>: genera una nueva
variable</p></li>
<li><p><strong><code>rename()</code></strong>: cambia el nombre de la
variable</p></li>
</ul>
</div>
</div>
</div>
<p>Veamos en más detalle las funciones más comunes del paquete
<code>dyplr</code> dentro de <code>tidyverse</code>.</p>
<ul>
<li>
<p><strong><code>glimpse</code></strong>
<strong>(parpadeo)</strong></p>
<p>Esta función se utiliza para dar un vistazo rápido o parpadeo a
nuestros datos y explorar información como: número de filas (que en este
caso sería el número de observaciones o datos de nuestra población),
número de columnas y sus nombres (que en este caso serían el número de
variables y sus nombres). Entre “&lt; &gt;” encontraremos el tipo de
dato (<code>dbl</code> para double, <code>chr</code> para character,
entre otros) y un breve listado de algunos de los primeros valores de
los datos. Por ejemplo, la función <code>glimpse</code> se puede aplicar
sobre el elemento <em>dat</em> (que se cargó arriba), así:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>Rows<span class="sc">:</span> <span class="dv">50</span>,<span class="dv">000</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>Columns<span class="sc">:</span> <span class="dv">19</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="sc">$</span> fecha_reporte_web                     <span class="sc">&lt;</span>dttm<span class="sc">&gt;</span> <span class="dv">2021-07-14</span>, <span class="dv">2021-04-24</span>, <span class="dv">2021-05</span>…</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="sc">$</span> id_de_caso                            <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">4565159</span>, <span class="dv">2747373</span>, <span class="dv">2963299</span>, <span class="dv">15526</span>…</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="sc">$</span> fecha_de_notificacion                 <span class="sc">&lt;</span>dttm<span class="sc">&gt;</span> <span class="dv">2021-07-07</span>, <span class="dv">2021-04-21</span>, <span class="dv">2021-05</span>…</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="sc">$</span> edad                                  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">23</span>, <span class="dv">15</span>, <span class="dv">11</span>, <span class="dv">39</span>, <span class="dv">25</span>, <span class="dv">8</span>, <span class="dv">53</span>, <span class="dv">29</span>, <span class="dv">4</span>…</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="sc">$</span> sexo                                  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="st">"masculino"</span>, <span class="st">"femenino"</span>, <span class="st">"mascul…</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="st">$ tipo_de_contagio                      &lt;chr&gt; "</span>Comunitaria<span class="st">", "</span>Relacionado<span class="st">", "</span>R…</span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="sc">$</span> ubicacion_del_caso                    <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="st">"Casa"</span>, <span class="st">"Casa"</span>, <span class="st">"Casa"</span>, <span class="st">"Casa"</span>, …</span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="sc">$</span> estado                                <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="st">"Leve"</span>, <span class="st">"Leve"</span>, <span class="st">"Leve"</span>, <span class="st">"Leve"</span>, …</span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="sc">$</span> recuperado                            <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="st">"Recuperado"</span>, <span class="st">"Recuperado"</span>, <span class="st">"Rec…</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="st">$ fecha_de_inicio_de_sintomas           &lt;dttm&gt; 2021-06-22, 2021-04-16, 2021-04…</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="st">$ fecha_de_muerte                       &lt;dttm&gt; NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="st">$ fecha_de_diagnostico                  &lt;dttm&gt; 2021-07-07, 2021-04-23, 2021-05…</span></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="st">$ fecha_de_recuperacion                 &lt;dttm&gt; 2021-07-15, 2021-05-05, 2021-05…</span></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a><span class="st">$ fecha_de_nacimiento                   &lt;dttm&gt; 1975-06-23, 1975-07-01, 1975-07…</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a><span class="st">$ nombre_del_pais                       &lt;chr&gt; "</span>Argentina<span class="st">", "</span>Paraguay<span class="st">", "</span>Ecuado…</span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a><span class="sc">$</span> sintomas                              <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="st">"Leve"</span>, <span class="st">"Leve"</span>, <span class="st">"Leve"</span>, <span class="st">"Leve"</span>, …</span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a><span class="sc">$</span> numero_de_hospitalizaciones_recientes <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>,…</span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a><span class="sc">$</span> tension_sistolica                     <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">105</span>, <span class="dv">122</span>, <span class="dv">121</span>, <span class="dv">101</span>, <span class="dv">101</span>, <span class="dv">134</span>, <span class="dv">10</span>…</span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a><span class="sc">$</span> tension_diastolica                    <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">83</span>, <span class="dv">72</span>, <span class="dv">85</span>, <span class="dv">69</span>, <span class="dv">101</span>, <span class="dv">80</span>, <span class="dv">85</span>, <span class="dv">67</span>,…</span></code></pre>
</div>
</li>
<li>
<p><strong><code>summarise</code> (resumir)</strong></p>
<p>La función <code>summarise</code> nos permite aplicar ciertas
operaciones de interés sobre una tabla de datos. Por ejemplo, para
calcular la media de la edad, utilizamos la función <code>mean()</code>
y para el conteo total de casos la función <code>n()</code>:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">media =</span> <span class="fu">mean</span>(edad), <span class="at">casos=</span> <span class="fu">n</span>())</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="co"># A tibble: 1 × 2</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  media casos</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="dv">1</span>  <span class="fl">40.1</span> <span class="dv">50000</span></span></code></pre>
</div>
</li>
<li><p><strong><code>group_by</code> (agrupar)</strong></p></li>
</ul>
<p>La función <code>group_by</code> no tiene un uso evidente si es
empleada sola, dado que ocurre un proceso interno de agrupación de los
datos. Pero, al ser usada con otras funciones como por ejemplo
<code>summarise</code> es posible ver su efecto. Por ejemplo, el
siguiente comando agrupa los datos por sexo y calcula, para cada grupo
el conteo de casos y su correspondiente media de la edad:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">casos =</span> <span class="fu">n</span>(), <span class="at">media_edad =</span> <span class="fu">mean</span>(edad))</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co"># A tibble: 2 × 3</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>  sexo      casos media_edad</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>     <span class="er">&lt;</span>int<span class="sc">&gt;</span>      <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="dv">1</span> femenino  <span class="dv">26799</span>       <span class="fl">40.3</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="dv">2</span> masculino <span class="dv">23201</span>       <span class="fl">39.9</span></span></code></pre>
</div>
<ul>
<li>
<p><strong><code>select</code> (seleccionar)</strong></p>
<p>La función <code>select</code> es útil en caso de querer seleccionar
una o varias columnas de un <code>data.frame</code> o tabla de datos.
Por ejemplo, se pueden seleccionar las variables edad y sexo de
<em>dat</em> mediante el siguiente comando:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">select</span>(edad, sexo) <span class="co">#empleando el nombre de la columna</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="co"># A tibble: 50,000 × 2</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>    edad sexo     </span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>   <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>    </span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a> <span class="dv">1</span>    <span class="dv">23</span> masculino</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a> <span class="dv">2</span>    <span class="dv">15</span> femenino </span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a> <span class="dv">3</span>    <span class="dv">11</span> masculino</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a> <span class="dv">4</span>    <span class="dv">39</span> femenino </span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a> <span class="dv">5</span>    <span class="dv">25</span> masculino</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a> <span class="dv">6</span>     <span class="dv">8</span> femenino </span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a> <span class="dv">7</span>    <span class="dv">53</span> masculino</span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a> <span class="dv">8</span>    <span class="dv">29</span> masculino</span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a> <span class="dv">9</span>    <span class="dv">41</span> femenino </span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a><span class="dv">10</span>    <span class="dv">61</span> masculino</span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a><span class="co"># ℹ 49,990 more rows</span></span></code></pre>
</div>
</li>
<li><p><strong><code>filter</code> (filtrar)</strong></p></li>
</ul>
<p>Esta función se puede usar para filtrar una tabla de datos a partir
de una condición lógica del valor de sus filas. Por ejemplo, para
filtrar los registros menores de 28 años, usamos:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(edad <span class="sc">&lt;</span> <span class="dv">28</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="co"># A tibble: 13,235 × 19</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>   fecha_reporte_web   id_de_caso fecha_de_notificacion  edad sexo     </span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>   <span class="sc">&lt;</span>dttm<span class="sc">&gt;</span>                   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dttm<span class="sc">&gt;</span>                <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>    </span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a> <span class="dv">1</span> <span class="dv">2021-07-14</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">4565159</span> <span class="dv">2021-07-07</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">23</span> masculino</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a> <span class="dv">2</span> <span class="dv">2021-04-24</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">2747373</span> <span class="dv">2021-04-21</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">15</span> femenino </span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a> <span class="dv">3</span> <span class="dv">2021-05-07</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">2963299</span> <span class="dv">2021-05-04</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">11</span> masculino</span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a> <span class="dv">4</span> <span class="dv">2020-10-26</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">1018415</span> <span class="dv">2020-10-23</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">25</span> masculino</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a> <span class="dv">5</span> <span class="dv">2020-08-09</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">380193</span> <span class="dv">2020-07-25</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">8</span> femenino </span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a> <span class="dv">6</span> <span class="dv">2020-09-25</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">798355</span> <span class="dv">2020-09-25</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">13</span> femenino </span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a> <span class="dv">7</span> <span class="dv">2022-07-07</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">6184438</span> <span class="dv">2022-07-03</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">23</span> masculino</span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a> <span class="dv">8</span> <span class="dv">2020-11-26</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">1276271</span> <span class="dv">2020-11-11</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">26</span> femenino </span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a> <span class="dv">9</span> <span class="dv">2020-12-27</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">1592983</span> <span class="dv">2020-12-13</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">25</span> femenino </span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a><span class="dv">10</span> <span class="dv">2022-01-26</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">5798751</span> <span class="dv">2022-01-22</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">18</span> femenino </span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a><span class="co"># ℹ 13,225 more rows</span></span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a><span class="co"># ℹ 14 more variables: tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;,</span></span>
<span id="cb22-17"><a href="#cb22-17" tabindex="-1"></a><span class="co">#   estado &lt;chr&gt;, recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,</span></span>
<span id="cb22-18"><a href="#cb22-18" tabindex="-1"></a><span class="co">#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,</span></span>
<span id="cb22-19"><a href="#cb22-19" tabindex="-1"></a><span class="co">#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,</span></span>
<span id="cb22-20"><a href="#cb22-20" tabindex="-1"></a><span class="co">#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;,</span></span>
<span id="cb22-21"><a href="#cb22-21" tabindex="-1"></a><span class="co">#   numero_de_hospitalizaciones_recientes &lt;dbl&gt;, tension_sistolica &lt;dbl&gt;, …</span></span></code></pre>
</div>
<p>Como se puede observar, el resultado contiene todas las variables de
la tabla, pero los datos se limitan a aquellos que en edad sean menores
de 28 años. Ahora, filtremos por los registros que tengan una edad menor
a 28 años y con sexo femenino. En este caso, al pedir que se incluyan
adicionalmente los registros de 28 años también ya no se emplea
únicamente el signo “&lt;” sino que se lo acompaña del símbolo “=”:</p>
<p>Veamos un ejemplo con doble fitro:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">sexo</span> <span class="op">==</span> <span class="st">"F"</span>, <span class="va">edad</span> <span class="op">&lt;=</span> <span class="fl">28</span><span class="op">)</span> <span class="co">#Ahora sabe como filtrar el sexo</span></span>
<span><span class="co"># A tibble: 0 × 19</span></span>
<span><span class="co"># ℹ 19 variables: fecha_reporte_web &lt;dttm&gt;, id_de_caso &lt;dbl&gt;,</span></span>
<span><span class="co">#   fecha_de_notificacion &lt;dttm&gt;, edad &lt;dbl&gt;, sexo &lt;chr&gt;,</span></span>
<span><span class="co">#   tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;, estado &lt;chr&gt;,</span></span>
<span><span class="co">#   recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,</span></span>
<span><span class="co">#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,</span></span>
<span><span class="co">#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,</span></span>
<span><span class="co">#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;, …</span></span></code></pre>
</div>
<ul>
<li><strong><code>arrange</code> (organizar)</strong></li>
</ul>
<p>Para los casos donde se necesita organizar los datos por una o más
variables, se puede emplear la función <code>arrange</code>. Por
ejemplo, para organizar los datos por edad, o por edad y sexo:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(edad) </span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="co"># A tibble: 50,000 × 19</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>   fecha_reporte_web   id_de_caso fecha_de_notificacion  edad sexo     </span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a>   <span class="sc">&lt;</span>dttm<span class="sc">&gt;</span>                   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dttm<span class="sc">&gt;</span>                <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>    </span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a> <span class="dv">1</span> <span class="dv">2021-06-19</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">3896591</span> <span class="dv">2021-06-17</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino </span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a> <span class="dv">2</span> <span class="dv">2021-04-11</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">2525260</span> <span class="dv">2021-04-07</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino </span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a> <span class="dv">3</span> <span class="dv">2022-07-28</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">6264159</span> <span class="dv">2022-07-25</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> masculino</span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a> <span class="dv">4</span> <span class="dv">2022-01-03</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">5184827</span> <span class="dv">2021-12-26</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> masculino</span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a> <span class="dv">5</span> <span class="dv">2022-02-19</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">6039958</span> <span class="dv">2022-02-16</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino </span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a> <span class="dv">6</span> <span class="dv">2021-10-07</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">4967494</span> <span class="dv">2021-09-24</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> masculino</span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a> <span class="dv">7</span> <span class="dv">2022-01-13</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">5410872</span> <span class="dv">2021-12-30</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> masculino</span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a> <span class="dv">8</span> <span class="dv">2021-06-23</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">4006796</span> <span class="dv">2021-06-18</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> masculino</span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a> <span class="dv">9</span> <span class="dv">2020-09-02</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">628110</span> <span class="dv">2020-08-21</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> masculino</span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a><span class="dv">10</span> <span class="dv">2021-07-09</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">4453365</span> <span class="dv">2021-06-29</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino </span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a><span class="co"># ℹ 49,990 more rows</span></span>
<span id="cb24-16"><a href="#cb24-16" tabindex="-1"></a><span class="co"># ℹ 14 more variables: tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;,</span></span>
<span id="cb24-17"><a href="#cb24-17" tabindex="-1"></a><span class="co">#   estado &lt;chr&gt;, recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,</span></span>
<span id="cb24-18"><a href="#cb24-18" tabindex="-1"></a><span class="co">#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,</span></span>
<span id="cb24-19"><a href="#cb24-19" tabindex="-1"></a><span class="co">#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,</span></span>
<span id="cb24-20"><a href="#cb24-20" tabindex="-1"></a><span class="co">#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;,</span></span>
<span id="cb24-21"><a href="#cb24-21" tabindex="-1"></a><span class="co">#   numero_de_hospitalizaciones_recientes &lt;dbl&gt;, tension_sistolica &lt;dbl&gt;, …</span></span>
<span id="cb24-22"><a href="#cb24-22" tabindex="-1"></a></span>
<span id="cb24-23"><a href="#cb24-23" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(edad,sexo)</span>
<span id="cb24-24"><a href="#cb24-24" tabindex="-1"></a><span class="co"># A tibble: 50,000 × 19</span></span>
<span id="cb24-25"><a href="#cb24-25" tabindex="-1"></a>   fecha_reporte_web   id_de_caso fecha_de_notificacion  edad sexo    </span>
<span id="cb24-26"><a href="#cb24-26" tabindex="-1"></a>   <span class="sc">&lt;</span>dttm<span class="sc">&gt;</span>                   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dttm<span class="sc">&gt;</span>                <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>   </span>
<span id="cb24-27"><a href="#cb24-27" tabindex="-1"></a> <span class="dv">1</span> <span class="dv">2021-06-19</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">3896591</span> <span class="dv">2021-06-17</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino</span>
<span id="cb24-28"><a href="#cb24-28" tabindex="-1"></a> <span class="dv">2</span> <span class="dv">2021-04-11</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">2525260</span> <span class="dv">2021-04-07</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino</span>
<span id="cb24-29"><a href="#cb24-29" tabindex="-1"></a> <span class="dv">3</span> <span class="dv">2022-02-19</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">6039958</span> <span class="dv">2022-02-16</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino</span>
<span id="cb24-30"><a href="#cb24-30" tabindex="-1"></a> <span class="dv">4</span> <span class="dv">2021-07-09</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">4453365</span> <span class="dv">2021-06-29</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino</span>
<span id="cb24-31"><a href="#cb24-31" tabindex="-1"></a> <span class="dv">5</span> <span class="dv">2020-12-28</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">1596742</span> <span class="dv">2020-12-24</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino</span>
<span id="cb24-32"><a href="#cb24-32" tabindex="-1"></a> <span class="dv">6</span> <span class="dv">2021-08-29</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">4905206</span> <span class="dv">2021-08-12</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino</span>
<span id="cb24-33"><a href="#cb24-33" tabindex="-1"></a> <span class="dv">7</span> <span class="dv">2022-07-28</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">6263673</span> <span class="dv">2022-07-24</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino</span>
<span id="cb24-34"><a href="#cb24-34" tabindex="-1"></a> <span class="dv">8</span> <span class="dv">2020-10-14</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">929871</span> <span class="dv">2020-10-02</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino</span>
<span id="cb24-35"><a href="#cb24-35" tabindex="-1"></a> <span class="dv">9</span> <span class="dv">2021-03-28</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">2381786</span> <span class="dv">2021-03-25</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino</span>
<span id="cb24-36"><a href="#cb24-36" tabindex="-1"></a><span class="dv">10</span> <span class="dv">2021-01-06</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">1708679</span> <span class="dv">2021-01-04</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>       <span class="dv">1</span> femenino</span>
<span id="cb24-37"><a href="#cb24-37" tabindex="-1"></a><span class="co"># ℹ 49,990 more rows</span></span>
<span id="cb24-38"><a href="#cb24-38" tabindex="-1"></a><span class="co"># ℹ 14 more variables: tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;,</span></span>
<span id="cb24-39"><a href="#cb24-39" tabindex="-1"></a><span class="co">#   estado &lt;chr&gt;, recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,</span></span>
<span id="cb24-40"><a href="#cb24-40" tabindex="-1"></a><span class="co">#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,</span></span>
<span id="cb24-41"><a href="#cb24-41" tabindex="-1"></a><span class="co">#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,</span></span>
<span id="cb24-42"><a href="#cb24-42" tabindex="-1"></a><span class="co">#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;,</span></span>
<span id="cb24-43"><a href="#cb24-43" tabindex="-1"></a><span class="co">#   numero_de_hospitalizaciones_recientes &lt;dbl&gt;, tension_sistolica &lt;dbl&gt;, …</span></span></code></pre>
</div>
<p>Por configuración predeterminada la función organiza los valores de
menor a mayor; en caso de querer organizarlos de mayor a menor se puede
emplear <code>desc</code> al interior de la función
<code>arrange</code>.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(edad))</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="co"># A tibble: 50,000 × 19</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>   fecha_reporte_web   id_de_caso fecha_de_notificacion  edad sexo     </span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>   <span class="sc">&lt;</span>dttm<span class="sc">&gt;</span>                   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dttm<span class="sc">&gt;</span>                <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>    </span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a> <span class="dv">1</span> <span class="dv">2021-06-27</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">4128658</span> <span class="dv">2021-06-25</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">101</span> femenino </span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a> <span class="dv">2</span> <span class="dv">2022-02-03</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">5928342</span> <span class="dv">2022-01-28</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">101</span> femenino </span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a> <span class="dv">3</span> <span class="dv">2021-04-17</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">2625780</span> <span class="dv">2021-04-16</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">101</span> femenino </span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a> <span class="dv">4</span> <span class="dv">2021-07-14</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">4557691</span> <span class="dv">2021-07-09</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">101</span> femenino </span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a> <span class="dv">5</span> <span class="dv">2022-06-30</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">6153260</span> <span class="dv">2022-06-22</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">100</span> femenino </span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a> <span class="dv">6</span> <span class="dv">2020-10-16</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">942890</span> <span class="dv">2020-10-13</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">100</span> femenino </span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a> <span class="dv">7</span> <span class="dv">2022-02-10</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">6000702</span> <span class="dv">2022-01-16</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">100</span> masculino</span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a> <span class="dv">8</span> <span class="dv">2021-07-19</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">4650913</span> <span class="dv">2021-07-05</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">99</span> femenino </span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a> <span class="dv">9</span> <span class="dv">2021-06-11</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">3680598</span> <span class="dv">2021-06-07</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">99</span> femenino </span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a><span class="dv">10</span> <span class="dv">2021-02-24</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">2236252</span> <span class="dv">2021-02-23</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">99</span> masculino</span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a><span class="co"># ℹ 49,990 more rows</span></span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a><span class="co"># ℹ 14 more variables: tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;,</span></span>
<span id="cb25-17"><a href="#cb25-17" tabindex="-1"></a><span class="co">#   estado &lt;chr&gt;, recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,</span></span>
<span id="cb25-18"><a href="#cb25-18" tabindex="-1"></a><span class="co">#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,</span></span>
<span id="cb25-19"><a href="#cb25-19" tabindex="-1"></a><span class="co">#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,</span></span>
<span id="cb25-20"><a href="#cb25-20" tabindex="-1"></a><span class="co">#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;,</span></span>
<span id="cb25-21"><a href="#cb25-21" tabindex="-1"></a><span class="co">#   numero_de_hospitalizaciones_recientes &lt;dbl&gt;, tension_sistolica &lt;dbl&gt;, …</span></span></code></pre>
</div>
<ul>
<li>
<p><strong><code>mutate</code> (mudar)</strong></p>
<p>Para crear una nueva columna con datos en un <code>data.frame</code>
de una ya existente resulta de utilidad la función <code>mutate</code>.
Esta función requiere el nombre de la columna a crear y de la columna de
la que queremos copiar los datos. La columna nueva por configuración
predeterminada se ubicará al final de las variables en la tabla de
datos. En este ejemplo, vamos a crear una variable llamada pais en la
cual usamos la variable <code>nombre_pais</code> pero en forma de
mayúsculas con <code>toupper</code></p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">SEXO=</span> <span class="fu">toupper</span>(sexo)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(SEXO)</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="co"># A tibble: 50,000 × 1</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>   SEXO     </span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>    </span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a> <span class="dv">1</span> MASCULINO</span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a> <span class="dv">2</span> FEMENINO </span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a> <span class="dv">3</span> MASCULINO</span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a> <span class="dv">4</span> FEMENINO </span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a> <span class="dv">5</span> MASCULINO</span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a> <span class="dv">6</span> FEMENINO </span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a> <span class="dv">7</span> MASCULINO</span>
<span id="cb26-12"><a href="#cb26-12" tabindex="-1"></a> <span class="dv">8</span> MASCULINO</span>
<span id="cb26-13"><a href="#cb26-13" tabindex="-1"></a> <span class="dv">9</span> FEMENINO </span>
<span id="cb26-14"><a href="#cb26-14" tabindex="-1"></a><span class="dv">10</span> MASCULINO</span>
<span id="cb26-15"><a href="#cb26-15" tabindex="-1"></a><span class="co"># ℹ 49,990 more rows</span></span></code></pre>
</div>
</li>
<li><p><strong><code>rename</code> (renombrar)</strong></p></li>
</ul>
<p>En caso de que no queramos crear una nueva variable sino renombrar
una ya existente, conviene usar la función <code>rename</code>. Por
ejemplo, para cambiar el nombre <code>nombre_del_pais</code> por el
nombre <code>pais</code> usamos:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">rename</span>(edad_años <span class="ot">=</span> edad)</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="co"># A tibble: 50,000 × 19</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>   fecha_reporte_web   id_de_caso fecha_de_notificacion edad_años sexo     </span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>   <span class="sc">&lt;</span>dttm<span class="sc">&gt;</span>                   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dttm<span class="sc">&gt;</span>                    <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>    </span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a> <span class="dv">1</span> <span class="dv">2021-07-14</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">4565159</span> <span class="dv">2021-07-07</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>          <span class="dv">23</span> masculino</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a> <span class="dv">2</span> <span class="dv">2021-04-24</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">2747373</span> <span class="dv">2021-04-21</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>          <span class="dv">15</span> femenino </span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a> <span class="dv">3</span> <span class="dv">2021-05-07</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">2963299</span> <span class="dv">2021-05-04</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>          <span class="dv">11</span> masculino</span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a> <span class="dv">4</span> <span class="dv">2020-12-24</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">1552683</span> <span class="dv">2020-12-21</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>          <span class="dv">39</span> femenino </span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a> <span class="dv">5</span> <span class="dv">2020-10-26</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">1018415</span> <span class="dv">2020-10-23</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>          <span class="dv">25</span> masculino</span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a> <span class="dv">6</span> <span class="dv">2020-08-09</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">380193</span> <span class="dv">2020-07-25</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>           <span class="dv">8</span> femenino </span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a> <span class="dv">7</span> <span class="dv">2021-06-04</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">3503818</span> <span class="dv">2021-06-02</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>          <span class="dv">53</span> masculino</span>
<span id="cb27-12"><a href="#cb27-12" tabindex="-1"></a> <span class="dv">8</span> <span class="dv">2021-05-26</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">3270945</span> <span class="dv">2021-05-14</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>          <span class="dv">29</span> masculino</span>
<span id="cb27-13"><a href="#cb27-13" tabindex="-1"></a> <span class="dv">9</span> <span class="dv">2021-02-16</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">2201217</span> <span class="dv">2021-02-13</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>          <span class="dv">41</span> femenino </span>
<span id="cb27-14"><a href="#cb27-14" tabindex="-1"></a><span class="dv">10</span> <span class="dv">2020-10-30</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">1056515</span> <span class="dv">2020-10-26</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>          <span class="dv">61</span> masculino</span>
<span id="cb27-15"><a href="#cb27-15" tabindex="-1"></a><span class="co"># ℹ 49,990 more rows</span></span>
<span id="cb27-16"><a href="#cb27-16" tabindex="-1"></a><span class="co"># ℹ 14 more variables: tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;,</span></span>
<span id="cb27-17"><a href="#cb27-17" tabindex="-1"></a><span class="co">#   estado &lt;chr&gt;, recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,</span></span>
<span id="cb27-18"><a href="#cb27-18" tabindex="-1"></a><span class="co">#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,</span></span>
<span id="cb27-19"><a href="#cb27-19" tabindex="-1"></a><span class="co">#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,</span></span>
<span id="cb27-20"><a href="#cb27-20" tabindex="-1"></a><span class="co">#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;,</span></span>
<span id="cb27-21"><a href="#cb27-21" tabindex="-1"></a><span class="co">#   numero_de_hospitalizaciones_recientes &lt;dbl&gt;, tension_sistolica &lt;dbl&gt;, …</span></span></code></pre>
</div>
<ul>
<li><strong><code>slice</code></strong></li>
</ul>
<p>Ya se vio previamente cómo seleccionar columnas por medio de la
función <code>select</code>. En caso de requerir seleccionar filas
específicas de un <code>data.frame</code>, la función slice resulta de
gran utilidad. Por ejemplo, para seleccionar de la fila 10 a la 15:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">10</span><span class="sc">:</span><span class="dv">15</span>)</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="co"># A tibble: 6 × 19</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>  fecha_reporte_web   id_de_caso fecha_de_notificacion  edad sexo     </span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>  <span class="sc">&lt;</span>dttm<span class="sc">&gt;</span>                   <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dttm<span class="sc">&gt;</span>                <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>    </span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="dv">1</span> <span class="dv">2020-10-30</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">1056515</span> <span class="dv">2020-10-26</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">61</span> masculino</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a><span class="dv">2</span> <span class="dv">2020-09-25</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>     <span class="dv">798355</span> <span class="dv">2020-09-25</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">13</span> femenino </span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="dv">3</span> <span class="dv">2021-01-04</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">1680221</span> <span class="dv">2020-12-29</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">57</span> masculino</span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a><span class="dv">4</span> <span class="dv">2022-07-07</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">6184438</span> <span class="dv">2022-07-03</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">23</span> masculino</span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a><span class="dv">5</span> <span class="dv">2022-01-16</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">5535687</span> <span class="dv">2022-01-15</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">29</span> masculino</span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a><span class="dv">6</span> <span class="dv">2021-05-27</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>    <span class="dv">3294426</span> <span class="dv">2021-05-15</span> <span class="dv">00</span><span class="sc">:</span><span class="dv">00</span><span class="sc">:</span><span class="dv">00</span>      <span class="dv">52</span> masculino</span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a><span class="co"># ℹ 14 more variables: tipo_de_contagio &lt;chr&gt;, ubicacion_del_caso &lt;chr&gt;,</span></span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a><span class="co">#   estado &lt;chr&gt;, recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;dttm&gt;,</span></span>
<span id="cb28-13"><a href="#cb28-13" tabindex="-1"></a><span class="co">#   fecha_de_muerte &lt;dttm&gt;, fecha_de_diagnostico &lt;dttm&gt;,</span></span>
<span id="cb28-14"><a href="#cb28-14" tabindex="-1"></a><span class="co">#   fecha_de_recuperacion &lt;dttm&gt;, fecha_de_nacimiento &lt;dttm&gt;,</span></span>
<span id="cb28-15"><a href="#cb28-15" tabindex="-1"></a><span class="co">#   nombre_del_pais &lt;chr&gt;, sintomas &lt;chr&gt;,</span></span>
<span id="cb28-16"><a href="#cb28-16" tabindex="-1"></a><span class="co">#   numero_de_hospitalizaciones_recientes &lt;dbl&gt;, tension_sistolica &lt;dbl&gt;,</span></span>
<span id="cb28-17"><a href="#cb28-17" tabindex="-1"></a><span class="co">#   tension_diastolica &lt;dbl&gt;</span></span></code></pre>
</div>
<p>Si se desea modificar un objeto ya creado con estas funciones,
también se debe usar el operador de asignación. Ejemplo:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">objeto</span> <span class="op">&lt;-</span> <span class="va">objeto</span> <span class="op">%&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>nueva_columna <span class="op">=</span> <span class="va">contenido_nuevo</span><span class="op">)</span></span></code></pre>
</div>
<p>Si se realiza sin asignación el cambio solo se verá reflejado en la
consola. Recuerde tener seguridad de querer guardar el cambio (esta
acción podría ser irreversible). Si quiere conocer más sobre errores
frecuentes y como prevenirlos visite nuestro banco de errores.</p>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="../fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div id="actividad-de-afianzamiento" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="actividad-de-afianzamiento" class="callout-inner">
<h3 class="callout-title">Actividad de afianzamiento:</h3>
<div class="callout-content">
<p>Para esta actividad, debemos cargar un tipo diferente de datos. En el
siguiente link podrás descargarlos <a href="https://github.com/TRACE-LAC/TRACE-LAC-data/raw/refs/heads/main/otros/datos_limpios_covid.RDS" class="external-link">datos_reto</a>.
Los datos pueden ser cargados desde el computador o desde una ubicación
en internet. Para cargar los datos <code>datos_limpios_covid.RDS</code>
directamente desde internet se deben usar los comandos:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/TRACE-LAC/TRACE-LAC-data/raw/refs/heads/main/otros/datos_limpios_covid.RDS"</span></span>
<span></span>
<span><span class="va">covid19</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_rds</span><span class="op">(</span><span class="va">url</span><span class="op">)</span></span></code></pre>
</div>
<p>Después de cargar los datos debe realizar lo siguiente:</p>
<ol style="list-style-type: decimal">
<li>Explorar los datos</li>
<li>Agrupar los datos por <code>nombre_del_pais</code> y cuenta los
casos por cada uno.</li>
<li>Filtra los datos para Perú (Tip: observa cómo está escrito el nombre
del país en la variable “<code>nombre_del_pais</code>”).</li>
<li>Agrupa los datos por <code>sexo</code> y cuenta los casos por cada
uno.</li>
<li>Agrupa los datos por <code>nombre_del_pais</code> y calcula la media
de edad de cada uno.</li>
<li>Cambia el nombre de “<code>estado</code>” por
“<code>gravedad</code>”.</li>
<li>Ordena los datos por <code>sexo</code> y selecciona las 5 primeras
filas de cada uno.</li>
<li>Realiza una tabla que muestre cuántas personas de cada
<code>sintoma</code> aparecen en la base ubicados en Colombia.</li>
<li>Selecciona las 5 primeras filas de solo el número de identificación
del caso (<code>id_de_caso</code>).</li>
</ol>
</div>
</div>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="../fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<p>Revise si al final de esta lección adquirió estas competencias:</p>
<ul>
<li>Reconocer y hacer uso de R y RStudio.</li>
<li>Conocer los tipos de datos y operados básicos en R.</li>
<li>Comprender las estructuras básicas de datos en R tales como vectores
y tablas de datos.</li>
<li>Comprender el proceso de creación de funciones.</li>
<li>Reconocer el proceso de importación, exportación y transformación de
bases de datos con Tidyverse.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="contribuciones">Contribuciones<a class="anchor" aria-label="anchor" href="#contribuciones"></a>
</h3>
<ul>
<li>Zulma M. Cucunuba: Versión inicial</li>
<li>Zhian N. Kamvar: Ediciones menores</li>
<li>Kelly A. Charniga: Ediciones menores</li>
<li>José M. Velasco-España: Traducción de Inglés a Español y
edición</li>
<li>Andree Valle-Campos: Ediciones menores</li>
<li>Miguel E. Gámez López: Ediciones menores</li>
<li>Nicolás T. Domínguez: Ediciones menores</li>
<li>Laura Gómez-Bermeo: Ediciones menores</li>
<li>Geraldine Gomez: Ediciones menores</li>
<li>Jaime A. Pavlich-Mariscal: Edición</li>
</ul>
</div>
<div class="section level3">
<h3 id="asuntos-legales">Asuntos legales<a class="anchor" aria-label="anchor" href="#asuntos-legales"></a>
</h3>
<p><strong>Copyright</strong>: Zulma M. Cucunuba, 2019</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-Visualizacion"><p>Content from <a href="Visualizacion.html">Introduccion a la visualizacion de datos en R con ggplot2.</a></p>
<hr>
<p>Última actualización: 2024-10-28 |

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/episodes/Visualizacion.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Tiempo estimado: <i aria-hidden="true" data-feather="clock"></i> 84 minutos</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo visualizar datos epidemiologicos con ggplot2?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<p>Al final de este taller usted podrá:</p>
<ul>
<li>Reconocer las funciones que componen el paquete ggplot2.</li>
<li>Realizar gráficos básicos con la estructura de ggplot2</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Pre requisito</h3>
<div class="callout-content">
<p>Esta unidad tiene como prerequisitos:</p>
<ul>
<li>Introducción a R y RStudio</li>
</ul>
</div>
</div>
</div>
<div id="tabla-de-contenido" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="tabla-de-contenido" class="callout-inner">
<h3 class="callout-title">Tabla de contenido</h3>
<div class="callout-content">
<ul>
<li>Módulo: Ciencia de datos en salud pública
<ul>
<li>Unidad: Introducción a la visualización de datos en R con ggplot2
<ul>
<li>Tema 1: Principios de la gramática de gráficos con
<code>ggplot2</code>
</li>
<li>Tema 2: Gramática de gráficos
<ul>
<li>Datos (Data)</li>
<li>Estética (Aesthetics)</li>
<li>Geometría (Geometry)</li>
<li>Escala (Scale)</li>
<li>Facetas (Facets)</li>
<li>Temas (Themes)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<p><strong>Desarrollo del contenido</strong> (desarrolle cada uno de los
temas teniendo en cuenta la tabla de contenido)</p>
<section><h2 class="section-heading" id="introducción">Introducción<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>En el ámbito de la ciencia de datos y la toma de decisiones, la
habilidad para transformar datos en información comprensible y que
genere impacto es esencial. Esta unidad brindará una introducción a las
herramientas necesarias para convertir conjuntos de datos en gráficos.
En esta unidad haremos uso de ggplot2, una poderosa librería de gráficos
de R basada en la gramática de gráficos, para crear visualizaciones
impactantes.</p>
</section><section><h2 class="section-heading" id="tema-1-principios-de-la-gramática-de-gráficos-con-ggplot2">Tema 1: Principios de la gramática de gráficos con
<code>ggplot2</code>
<a class="anchor" aria-label="anchor" href="#tema-1-principios-de-la-gram%C3%A1tica-de-gr%C3%A1ficos-con-ggplot2"></a>
</h2>
<hr class="half-width">
<p><code>ggplot2</code> es un paquete de R basado en la gramática de
gráficos que permite visualizar datos de una manera consistente y
estructurada.</p>
<p><code>ggplot2</code>recibe su nombre precisamente de la abreviación
del término gramática de gráficos (gg). La gramática de gráficos se
refiere a un enfoque conceptual propuesto y desarrollado por Leland
Wilkinson para la creación de gráficos, el cual sirvió como base para el
desarrollo de <code>ggplot2</code> a manos de Hadley Wickham.</p>
<p>La gramática de gráficos proporciona un marco conceptual para pensar
sobre cómo construir y entender visualizaciones de datos de una manera
coherente y estructurada. En términos simples, la gramática de gráficos
descompone un gráfico en sus componentes fundamentales y define cómo se
combinan estos componentes para representar datos.</p>
<div id="estos-componentes-básicos-son" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="estos-componentes-básicos-son" class="callout-inner">
<h3 class="callout-title">Estos componentes básicos son:</h3>
<div class="callout-content">
<p><strong>1. Datos (Data):</strong> representan los datos que queremos
visualizar. Puede ser una tabla de datos (data.frame) en R u otra fuente
de datos.</p>
<p><strong>2. Estética (Aesthetics):</strong> definen cómo se mapean los
atributos de los datos a propiedades visuales del gráfico, como posición
en el eje X (x), posición en el eje Y (y), color, forma, tamaño, etc.
Esto se especifica mediante la función <code>aes()</code> en
<code>ggplot2</code>.</p>
<p><strong>3. Geometría (Geometry):</strong> representa la forma en que
los datos se visualizan en el gráfico, como puntos, líneas, barras,
áreas, etc. Cada tipo de gráfico tiene su función correspondiente
en<code>ggplot2</code>, como geom_point() para un gráfico de dispersión
o geom_bar() para un gráfico de barras.</p>
<p><strong>4. Escala (Scale):</strong> define cómo se mapean los valores
de los datos a los valores visuales, como el rango de colores o el rango
de los ejes. <code>ggplot2</code>ajusta automáticamente las escalas,
pero también podemos <code>ggplot2</code>ajusta automáticamente las
escalas, pero también podemos personalizarlas con funciones como
<code>scale_log10()</code>, <code>scale_x_continuous()</code> o
<code>scale_color_manual()</code>.</p>
<p><strong>5. Facetas (Facets):</strong> permiten dividir los datos en
subconjuntos y mostrarlos en paneles múltiples (facetas) según ciertas
variables. Podemos usar facet_wrap() o <code>facet_grid()</code> en
<code>ggplot2</code>para implementar Podemos usar facet_wrap() o
<code>facet_grid()</code> en <code>ggplot2</code>para implementar esta
funcionalidad.</p>
<p><strong>6. Temas (Themes):</strong> controlan la apariencia visual
general del gráfico, como títulos, etiquetas de ejes, fondos, etc.
Podemos gráfico, como títulos, etiquetas de ejes, fondos, etc. Podemos
personalizar el tema con la función <code>theme()</code> en
<code>ggplot2</code>.</p>
<p>Por ejemplo, una estructura clásica de un gráfico de puntos será:</p>
<pre><code>ggplot(data, \# Los datos

   aes(x, y) \# La estética
)+
   geom_point() \# la geometría</code></pre>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="tema-2-ejemplos-del-uso-de-la-gramática-de-gráficos-con-ggplot">Tema 2: Ejemplos del uso de la gramática de gráficos con ggplot<a class="anchor" aria-label="anchor" href="#tema-2-ejemplos-del-uso-de-la-gram%C3%A1tica-de-gr%C3%A1ficos-con-ggplot"></a>
</h2>
<hr class="half-width">
<p>Aquí vamos a ir explicando cómo puedes hacer uso de esta herramienta
en tu computador. A medida que avanzas trata de ir replicando los
ejercicios.</p>
<div id="nota." class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="nota." class="callout-inner">
<h3 class="callout-title"><strong>NOTA.</strong></h3>
<div class="callout-content">
<p>Para hacer más versátil su uso, se recomienda conocer el
funcionamiento del paquete dplyr y el uso de tuberías (pipes
<code>%&gt;%</code>), puedes repasar estos temas en la Unidad 1 de este
módulo “Introducción a R y RStudio”. Por su parte, <code>ggplot2</code>
está contenido dentro de la librería Tidyverse. Además, Tidiverse
incluye otras librerías como dplyr que, a su vez, incluye las pipes
(<code>%&gt;%</code>). Para más detalles sobre Tidyverse consulta la
unidad de “Introducción a R y RStudio”.</p>
</div>
</div>
</div>
<p>Para los ejercicios prácticos de esta unidad es necesario cargar las
siguientes librerías:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span> </span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>── Attaching core tidyverse packages ──────────────────────── tidyverse <span class="dv">2</span>.<span class="fl">0.0</span> ──</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>✔ dplyr     <span class="dv">1</span>.<span class="fl">1.4</span>     ✔ readr     <span class="dv">2</span>.<span class="fl">1.5</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>✔ forcats   <span class="dv">1</span>.<span class="fl">0.0</span>     ✔ stringr   <span class="dv">1</span>.<span class="fl">5.1</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>✔ lubridate <span class="dv">1</span>.<span class="fl">9.3</span>     ✔ tibble    <span class="dv">3</span>.<span class="fl">2.1</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>✔ purrr     <span class="dv">1</span>.<span class="fl">0.2</span>     ✔ tidyr     <span class="dv">1</span>.<span class="fl">3.1</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>── Conflicts ────────────────────────────────────────── <span class="fu">tidyverse_conflicts</span>() ──</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>✖ dplyr<span class="sc">::</span><span class="fu">filter</span>() masks stats<span class="sc">::</span><span class="fu">filter</span>()</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>✖ dplyr<span class="sc">::</span><span class="fu">lag</span>()    masks stats<span class="sc">::</span><span class="fu">lag</span>()</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>ℹ Use the conflicted <span class="fu">package</span> (<span class="sc">&lt;</span>http<span class="sc">:</span><span class="er">//</span>conflicted.r<span class="sc">-</span>lib.org<span class="sc">/</span><span class="er">&gt;</span>) to force all conflicts to become errors</span></code></pre>
</div>
<p>Ahora, veremos cada uno de los componentes para realizar gráficos de
datos con <code>ggplot2</code> a través de un ejercicio práctico. Se
requiere una tabla de datos (una estructura con filas y columnas) para
poder ser usada en la estética de los gráficos. Previo al uso de
<code>ggplot2</code>, suele ser necesario realizar un proceso de
limpieza y organización de los datos. Para este ejercicio práctico
usaremos una base de datos limpia, que nos permita hacer las
visualizaciones sin la necesidad de pre-procesar los datos.</p>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La tabla de datos para este ejercicio puedes encontrarla en: <a href="https://github.com/TRACE-LAC/TRACE-LAC-data/blob/main/otros/muestra_covid.RDS?raw=true" class="external-link uri">https://github.com/TRACE-LAC/TRACE-LAC-data/blob/main/otros/muestra_covid.RDS?raw=true</a></p>
</div>
</div>
</div>
<p>Cuando ya tengas los datos descargados en tu computador y en la
carpeta de data de tu proyecto puedes ejecutar el siguiente comando:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19</span> <span class="op">&lt;-</span> <span class="fu">readRDS</span><span class="op">(</span><span class="st">"data/muestra_covid.RDS"</span><span class="op">)</span></span></code></pre>
</div>
<p>Una vez obtenida la tabla de datos vamos a explorar los datos para
conocer el estado actual y revisar qué variables podríamos usar para las
visualizaciones. Para esto utilizamos una de las funciones vistas en la
unidad de “Introducción a R y RStudio” llamada
<code>glimpse.</code>Úsala y verifica la estructura de la tabla de
datos</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">glimpse</span>(covid19)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>Rows<span class="sc">:</span> <span class="dv">100</span>,<span class="dv">000</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>Columns<span class="sc">:</span> <span class="dv">19</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="sc">$</span> fecha_reporte_web                     <span class="sc">&lt;</span>date<span class="sc">&gt;</span> <span class="dv">2021-04-09</span>, <span class="dv">2021-03-18</span>, <span class="dv">2022-01</span>…</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="sc">$</span> id_de_caso                            <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">2493495</span>, <span class="dv">2318883</span>, <span class="dv">5290100</span>, <span class="dv">43526</span>…</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="sc">$</span> fecha_de_notificacion                 <span class="sc">&lt;</span>date<span class="sc">&gt;</span> <span class="dv">2021-03-27</span>, <span class="dv">2021-03-06</span>, <span class="dv">2022-01</span>…</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="sc">$</span> edad                                  <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">45</span>, <span class="dv">38</span>, <span class="dv">34</span>, <span class="dv">64</span>, <span class="dv">24</span>, <span class="dv">16</span>, <span class="dv">25</span>, <span class="dv">72</span>, …</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="sc">$</span> sexo                                  <span class="sc">&lt;</span>fct<span class="sc">&gt;</span> femenino, masculino, masculino, …</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="sc">$</span> tipo_de_contagio                      <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="st">"Comunitaria"</span>, <span class="st">"Comunitaria"</span>, <span class="st">"C…</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="st">$ ubicacion_del_caso                    &lt;chr&gt; "</span>Casa<span class="st">", "</span>Casa<span class="st">", "</span>Casa<span class="st">", "</span>Casa<span class="st">", …</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="st">$ estado                                &lt;fct&gt; Leve, Leve, Leve, Leve, Leve, Le…</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="st">$ recuperado                            &lt;fct&gt; Recuperado, Recuperado, Recupera…</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="st">$ fecha_de_inicio_de_sintomas           &lt;date&gt; 2021-03-24, 2021-03-03, 2022-01…</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="st">$ fecha_de_muerte                       &lt;date&gt; NA, NA, NA, NA, NA, NA, NA, NA,…</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="st">$ fecha_de_diagnostico                  &lt;date&gt; 2021-04-07, 2021-03-17, 2022-01…</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="st">$ fecha_de_recuperacion                 &lt;date&gt; 2021-04-10, 2021-03-19, 2022-01…</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="st">$ fecha_de_nacimiento                   &lt;date&gt; 1975-06-01, 1975-06-08, 1975-06…</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="st">$ nombre_del_pais                       &lt;chr&gt; "</span>Colombia<span class="st">", "</span>Cuba<span class="st">", "</span>Nicaragua<span class="st">",…</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="st">$ sintomas                              &lt;fct&gt; Leve, Leve, Leve, Leve, Leve, Le…</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="st">$ numero_de_hospitalizaciones_recientes &lt;dbl&gt; 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 1,…</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="st">$ tension_sistolica                     &lt;dbl&gt; 107, 126, 107, 134, 126, 156, 14…</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a><span class="st">$ tension_diastolica                    &lt;dbl&gt; 87, 64, 73, 76, 83, 96, 76, 87, …</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="estética-aesthetics">Estética (Aesthetics)<a class="anchor" aria-label="anchor" href="#est%C3%A9tica-aesthetics"></a>
</h3>
<p>En el contexto de la gramática de gráficos, la estética (aesthetics)
se refiere a cómo mapeamos los atributos de nuestros datos a propiedades
visuales en el gráfico. Estas propiedades visuales pueden ser elementos
tales como la posición en el eje X (x), la posición en el eje Y (y), el
color (color), la forma(shape), el tamaño(size), etc. Al mapear estos
atributos podemos crear visualizaciones que nos permiten comprender y
comunicar patrones y relaciones en los datos de manera efectiva.</p>
<p>En <code>ggplot2</code> la función principal para especificar la
estética es <code>aes()</code>. A continuación algunos ejemplos para
ilustrar cómo usar la estética en <code>ggplot2</code>.</p>
<div class="section level4">
<h4 id="ejemplo-1-gráfico-de-dispersión-scatter-plot">Ejemplo 1: Gráfico de dispersión (scatter plot)<a class="anchor" aria-label="anchor" href="#ejemplo-1-gr%C3%A1fico-de-dispersi%C3%B3n-scatter-plot"></a>
</h4>
<p>Supongamos que tenemos una tabla que cuenta con las variables x e
y<em>.</em> Queremos crear un gráfico de dispersión donde la variable x
se mapea en el eje X y la variable y en el eje Y. Además, queremos que
los puntos se coloreen según la variable grupo. Mediante la función
<code>aes()</code> de <code>ggplot2</code> es posible asignar estas
variables a los correspondientes atributos visuales del gráfico, como
veremos en el ejemplo a continuación.</p>
<p>Consideremos la base covid19 que cargamos previamente. El
requerimiento es realizar un gráfico de dispersión que muestre el número
de casos por fecha de reporte y desagregados por sexo. Para esto,
primero organizamos los datos para lograr una tabla resumen con la
información que queremos graficar, usando las funciones vistas en la
unidad de “Introducción a R y RStudio” de la siguiente manera:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>covid19_resumen <span class="ot">&lt;-</span> covid19 <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="fu">group_by</span>(fecha_reporte_web, sexo) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">casos =</span> <span class="fu">n</span>())</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="st">`</span><span class="at">summarise()</span><span class="st">`</span> has grouped output by <span class="st">'fecha_reporte_web'</span>. You can override using</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>the <span class="st">`</span><span class="at">.groups</span><span class="st">`</span> argument.</span></code></pre>
</div>
<p>Luego, podemos usar la estética de los gráficos de
<code>ggplot2</code> indicando las variables a usar en cada dimensión,
en este caso en el eje X tendremos la variable de tiempo
(fecha_reporte_web) y en el eje Y el número de casos (casos). Para ver
la desagregación por sexo haremos uso de uno de los atributos como el
color. Estas instrucciones pueden seguirse a través del siguiente
código:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_resumen</span>,</span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">fecha_reporte_web</span>, y <span class="op">=</span> <span class="va">casos</span>, colour <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>La visualización que generamos es la siguiente:</p>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-7-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
<div class="section level3">
<h3 id="geometría-geometry">Geometría (Geometry)<a class="anchor" aria-label="anchor" href="#geometr%C3%ADa-geometry"></a>
</h3>
<p>La geometría representa la forma en que los datos se visualizan en el
gráfico; como puntos, líneas, barras, áreas, etc. Cada tipo de gráfico
tiene su función correspondiente en <code>ggplot2</code>; por ejemplo
<code>geom_point()</code> para un gráfico de dispersión o
<code>geom_bar()</code> para un gráfico de barras.</p>
<div id="checklist3" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Lista de verificación</h3>
<div class="callout-content">
<p>En la siguiente tabla se muestran algunos ejemplos de los distintos
tipos de geometrías más usados en <code>ggplot2</code> con su
correspondiente comando:</p>
<figure><img src="../fig/tipogeom.png" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<div class="section level4">
<h4 id="ejemplo-2-gráfico-de-líneas">Ejemplo 2: Gráfico de líneas<a class="anchor" aria-label="anchor" href="#ejemplo-2-gr%C3%A1fico-de-l%C3%ADneas"></a>
</h4>
<p>Supongamos que queremos visualizar la evolución del número de casos
de covid-19 a lo largo del tiempo. Para esto, primero debemos preparar
el conjunto de datos que formarán el gráfico:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19_fecha</span> <span class="op">&lt;-</span> <span class="va">covid19</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span>casos <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Una vez el conjunto de datos esté listo, procedemos a usar la
geometría de <code>ggplot2</code>:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_fecha</span>, </span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">fecha_reporte_web</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Y obtenemos el siguiente gráfico:</p>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-10-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
<div class="section level4">
<h4 id="ejemplo-3-gráfico-de-barras">Ejemplo 3: Gráfico de barras<a class="anchor" aria-label="anchor" href="#ejemplo-3-gr%C3%A1fico-de-barras"></a>
</h4>
<p>Ahora, hagamos una visualización en forma de gráfico de barras del
total de casos positivos por sexo, para esto utilizamos el comando
<code>geom_bar()</code> así:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-11-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>En este ejemplo podemos observar que <code>ggplot2</code>
automáticamente calcula el eje Y.</p>
</div>
<div class="section level4">
<h4 id="ejemplo-4--gráfico-de-barras-más-complejo">Ejemplo 4. Gráfico de barras más complejo<a class="anchor" aria-label="anchor" href="#ejemplo-4--gr%C3%A1fico-de-barras-m%C3%A1s-complejo"></a>
</h4>
<p>Primero vamos a preparar los datos en una tabla de datos que permita
contar el número de casos por ubicación del caso:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19_ubicacion</span> <span class="op">&lt;-</span> <span class="va">covid19</span> <span class="op">%&gt;%</span>  </span>
<span><span class="fu">group_by</span><span class="op">(</span><span class="va">ubicacion_del_caso</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span>casos <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora, por medio de la geometría de <code>ggplot</code>, hacemos la
visualización usando el argumento <code>stat = "identity"</code> que
calcula la suma de la variable <code>y = casos</code> agrupando por la
variable <code>x = ubicacion_del_caso</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_ubicacion</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">ubicacion_del_caso</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span></span></code></pre>
</div>
<p>Se obtendrá la siguiente gráfica:</p>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-14-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>En este caso tenemos las barras en orientación vertical. Si
desearamos poner las barras en orientación horizontal podemos lograrlo,
usando al final el comando <code>coord_flip</code> de la siguiente
manera:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_ubicacion</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">ubicacion_del_caso</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Obteniendo como resultado:</p>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-16-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Si queremos ordenar la ubicación del caso por el número de casos,
podemos utilizar el comando <code>reorder</code> en el eje donde está la
ubicación del caso. La función <code>reorder</code> tiene dos
argumentos: el primero es la variable a ordenar y el segundo es la
variable que otorga el orden. En este caso sería
<code>reorder(ubicacion_del_caso, +casos)</code> si queremos ordenar de
mayor a menor cantidad de casos. El código sería el siguiente:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">covid19_ubicacion</span>, </span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">reorder</span><span class="op">(</span><span class="va">ubicacion_del_caso</span>, <span class="op">+</span><span class="va">casos</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Y la gráfica queda así:</p>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-18-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Pregunta ¿cómo produciría esta misma gráfica, pero en orden
ascendente?</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="escala">Escala<a class="anchor" aria-label="anchor" href="#escala"></a>
</h3>
<p>En la gramática de gráficos en <code>ggplot2</code>, la escala se
refiere a la forma en que los valores de los datos se traducen en
propiedades visuales. La elección adecuada de las escalas es esencial
para que los gráficos sean interpretables y precisos.</p>
<p>A continuación, veremos algunos de los diferentes tipos de escalas
disponibles en <code>ggplot2</code> y sus funciones:</p>
<div id="para-datos-de-tipo-continuo-o-numéricos-tenemos-escalas-continuas-como" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="para-datos-de-tipo-continuo-o-numéricos-tenemos-escalas-continuas-como" class="callout-inner">
<h3 class="callout-title">1. Para <strong>datos de tipo continuo o
numéricos</strong> tenemos <strong>escalas continuas como:</strong>
</h3>
<div class="callout-content">
<ul>
<li><p><code>scale_x_continuous()</code> y
<code>scale_y_continuous()</code> : para el eje x y el eje y,
respectivamente.</p></li>
<li><p><code>scale_color_continuous()</code>: asigna colores a los
valores continuos.</p></li>
<li><p><code>scale_size_continuous()</code>: asigna tamaño a los
valores.</p></li>
</ul>
</div>
</div>
</div>
<div id="para-datos-categóricos-o-de-carácter-tenemos-escalas-discretas-como" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="para-datos-categóricos-o-de-carácter-tenemos-escalas-discretas-como" class="callout-inner">
<h3 class="callout-title">2. Para <strong>datos categóricos o de
carácter</strong> tenemos escalas discretas como:</h3>
<div class="callout-content">
<ul>
<li><p><code>scale_x_discrete()</code> y
<code>scale_y_discrete()</code>: para el eje x y el eje y,
respectivamente.</p></li>
<li><p><code>scale_color_discrete()</code>: asigna colores a los valores
discretos.</p></li>
<li><p><code>scale_shape_discrete()</code>: asigna diferentes formas a
los diferentes valores discretos.</p></li>
</ul>
</div>
</div>
</div>
<div id="para-datos-de-fecha-tenemos-escalas-de-fechas-como" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="para-datos-de-fecha-tenemos-escalas-de-fechas-como" class="callout-inner">
<h3 class="callout-title">3. Para <strong>datos de fecha</strong>
tenemos escalas de fechas como:</h3>
<div class="callout-content">
<ul>
<li>
<code>scale_x_date()</code> y <code>scale_y_date()</code>: para el
eje x y el eje y, respectivamente cuando se tengan datos de fecha.</li>
</ul>
</div>
</div>
</div>
<div id="para-hacer-uso-de-escalas-personalizadas-se-hace-uso-de-escalas-manuales-en-las-que-podemos-especificar-nuestros-propios-valores." class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="para-hacer-uso-de-escalas-personalizadas-se-hace-uso-de-escalas-manuales-en-las-que-podemos-especificar-nuestros-propios-valores." class="callout-inner">
<h3 class="callout-title">4. Para hacer uso de escalas personalizadas se hace uso de escalas manuales en las que podemos especificar nuestros
propios valores.</h3>
<div class="callout-content">
<ul>
<li><p><code>scale_color_manual()</code>: se especifica manualmente los
colores para los valores.</p></li>
<li><p><code>scale_shape_manual()</code>: se especifica manualmente las
formas para los valores.</p></li>
</ul>
</div>
</div>
</div>
<div id="otras-escalas" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="otras-escalas" class="callout-inner">
<h3 class="callout-title">5. Otras escalas:</h3>
<div class="callout-content">
<ul>
<li><p><code>scale_fill_*</code>: se usa similar a las escalas de color
pero para colores que queramos con relleno.</p></li>
<li><p><code>scale_size_area()</code>: Asigna los valores al área en
lugar del diámetro, lo que puede ser útil para los puntos.</p></li>
<li><p><code>scale_linetype()</code>: para diferente tipos de
línea</p></li>
<li><p><code>scale_y_log10()</code>: para hacer uso de escala
logarítmica en eje y.</p></li>
<li><p><code>scale_colour_gradient()</code>: crea un degradé de color
entre bajo y alto o <code>scale_colour_gradient2()</code> en bajo, medio
y alto.</p></li>
</ul>
<p>A continuación, veremos algunos ejemplos de cómo usar la escala en
<code>ggplot2</code>con el <code>data.frame</code> previamente cargada
<code>covid19</code>.</p>
</div>
</div>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="../fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div class="section level4">
<h4 id="ejemplo-5--gráfico-con-escala-logarítmica">Ejemplo 5. Gráfico con escala logarítmica<a class="anchor" aria-label="anchor" href="#ejemplo-5--gr%C3%A1fico-con-escala-logar%C3%ADtmica"></a>
</h4>
<p>Usaremos exactamente el mismo ejemplo anterior, pero en este caso al
final agregamos la escala <code>logarítmica scale_y_log10()</code>
así:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">covid19_ubicacion</span>, </span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">reorder</span><span class="op">(</span><span class="va">ubicacion_del_caso</span>, <span class="op">-</span><span class="va">casos</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_log10</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Casos Confirmados (escala log)"</span><span class="op">)</span></span></code></pre>
</div>
<p>De esta manera, el nuevo gráfico se vería así:</p>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-20-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="discussion2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discusión</h3>
<div class="callout-content">
<p>¿Qué diferencias ve con la última gráfica del Ejemplo 4.?</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="facetas">Facetas<a class="anchor" aria-label="anchor" href="#facetas"></a>
</h3>
<p>Las Facetas (<code>Facets</code>) en la gramática de gráficos son una
forma de dividir los datos en subconjuntos y representarlos en múltiples
paneles dentro del mismo gráfico. Esto nos permite visualizar diferentes
aspectos de los datos o comparar grupos de manera más efectiva. En
<code>ggplot2</code>, podemos usar la función <code>facet_wrap()</code>
o <code>facet_grid()</code> para implementar las facetas, dependiendo
del número de variables a usar para la creación de los paneles.</p>
<div class="section level4">
<h4 id="ejemplo-5--gráfico-con-facet-wrap">Ejemplo 5. Gráfico con facet wrap<a class="anchor" aria-label="anchor" href="#ejemplo-5--gr%C3%A1fico-con-facet-wrap"></a>
</h4>
<p>Primero vamos a preparar los datos en una tabla de datos que permita
contar el número de casos por <code>edad</code> y <code>sexo</code>:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>covid19_sexo <span class="ot">&lt;-</span> covid19 <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  <span class="fu">group_by</span>(edad, sexo) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">casos =</span> <span class="fu">n</span>())</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="st">`</span><span class="at">summarise()</span><span class="st">`</span> has grouped output by <span class="st">'edad'</span>. You can override using the</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="st">`</span><span class="at">.groups</span><span class="st">`</span> argument.</span></code></pre>
</div>
<p>Usando los datos de <code>covid-19</code>, vamos a representar la
variable <code>casos</code> por <code>edad</code> en dos paneles por
<code>sexo</code> usando <code>facet_wrap</code> así:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_sexo</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">edad</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-22-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>De acuerdo con lo aprendido anteriormente, piense cómo podría hacer
que cada faceta quede de un color diferente, es decir, asignando color a
la variable <code>sexo</code> ¿cómo cambiaría el código?</p>
<p>El gráfico que debe producir es el siguiente:</p>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-23-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Mostrar la solución </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_sexo</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">edad</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Agregando una escala de color degradé tenemos:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">covid19_sexo</span>, <span class="fu">aes</span><span class="op">(</span><span class="va">edad</span>, <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_colour_gradient2</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-25-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
<div class="section level3">
<h3 id="tema">Tema<a class="anchor" aria-label="anchor" href="#tema"></a>
</h3>
<p>En la gramática de gráficos, el tema se refiere a la personalización
de la apariencia visual general del gráfico; como los títulos, etiquetas
de ejes, fondos, colores, tamaños de fuente, entre otros elementos. Con
los temas, podemos mejorar la legibilidad y estética de los gráficos,
asegurando que la información se comunique de manera efectiva y
atractiva.</p>
<p>En <code>ggplot2</code>, podemos aplicar un tema predeterminado
utilizando la función <code>theme()</code>. A continuación,
proporcionamos algunos ejemplos de cómo utilizar los temas en
<em><code>ggplot2</code></em> con la base de datos covid19.</p>
<p>Usando la misma gráfica del ejemplo anterior, comparemos dos temas:
<code>theme_classic()</code> y <code>theme_dark()</code>.</p>
<div id="discussion3" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discusión</h3>
<div class="callout-content">
<p>¿Qué diferencias encuentra?</p>
</div>
</div>
</div>
<div class="section level4">
<h4 id="ejemplo-6--usando-theme-classic">Ejemplo 6. Usando theme classic<a class="anchor" aria-label="anchor" href="#ejemplo-6--usando-theme-classic"></a>
</h4>
<p>Para usar el tema clásico tenemos:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_sexo</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">edad</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-26-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
<div class="section level4">
<h4 id="ejemplo-7--usando-theme-classic">Ejemplo 7. Usando theme classic<a class="anchor" aria-label="anchor" href="#ejemplo-7--usando-theme-classic"></a>
</h4>
<p>Para este tema tendríamos lo siguiente:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_sexo</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">edad</span>, y <span class="op">=</span> <span class="va">casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_dark</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-27-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Para revisar la lista de <code>theme()</code> que tiene disponible
<code>ggplot2</code>, puede consultarse en <a href="https://%60ggplot2%60.tidyverse.org/reference/ggtheme.html" class="external-link uri">https://ggplot2.tidyverse.org/reference/ggtheme.html</a></p>
</div>
</div>
</div>
<p>Finalmente, veamos un ejemplo de cómo modificar los themes
manualmente.</p>
</div>
<div class="section level4">
<h4 id="ejemplo-8--cambiando-títulos-subtítulos-y-ejes">Ejemplo 8. Cambiando títulos, subtítulos y ejes<a class="anchor" aria-label="anchor" href="#ejemplo-8--cambiando-t%C3%ADtulos-subt%C3%ADtulos-y-ejes"></a>
</h4>
<p>Podemos usar comandos como <code>xlab</code>, <code>ylab</code> para
cambiar los nombres de los ejes. Igualmente, comandos como title y
subtitle de la siguiente forma:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid19_sexo</span>, </span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">edad</span>, y <span class="op">=</span> <span class="va">casos</span>, colour <span class="op">=</span> <span class="va">sexo</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">sexo</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    y <span class="op">=</span> <span class="st">"Casos diarios"</span>, x <span class="op">=</span> <span class="st">"Edad en años"</span>,</span>
<span>    colour <span class="op">=</span> <span class="st">"Sexo"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Distribución de casos de COVID-19 por edad y sexo en Latinoamerica"</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/Visualizacion-rendered-unnamed-chunk-28-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<p>Revise si al final de esta lección adquirió estas competencias:</p>
<ul>
<li>Reconocer las funciones que componen el paquete ggplot2.</li>
<li>Realizar gráficos básicos con la estructura de ggplot2.</li>
</ul>
</div>
</div>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="../fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
</div>
<div class="section level3">
<h3 id="contribuciones">Contribuciones<a class="anchor" aria-label="anchor" href="#contribuciones"></a>
</h3>
<ul>
<li>Zulma M. Cucunuba: Versión inicial</li>
<li>Geraldine Gomez: Edición</li>
<li>Andree Valle: Ediciones menores</li>
<li>Laura Gómez-Bermeo: Ediciones menores</li>
<li>José M. Velasco-España: Ediciones menores</li>
</ul>
</div>
<div class="section level3">
<h3 id="asuntos-legales">Asuntos legales<a class="anchor" aria-label="anchor" href="#asuntos-legales"></a>
</h3>
<p><strong>Copyright</strong>: Zulma M. Cucunuba, 2023</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-Reporte"><p>Content from <a href="Reporte.html">Reporte e informes tecnicos en R Markdown</a></p>
<hr>
<p>Última actualización: 2024-10-28 |

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/episodes/Reporte.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Tiempo estimado: <i aria-hidden="true" data-feather="clock"></i> 44 minutos</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo se utilizan R markdown para presentar un reporte?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<p>Al final de este taller usted podrá:</p>
<ul>
<li>Reconocer la importancia de generar informes en R Markdown<br>
</li>
<li>Aprender a utilizar R markdown de forma básica</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Pre requisito</h3>
<div class="callout-content">
<p>Esta unidad tiene como prerequisitos:</p>
<ul>
<li>Introducción a R y RStudio</li>
</ul>
</div>
</div>
</div>
<div id="tabla-de-contenido" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="tabla-de-contenido" class="callout-inner">
<h3 class="callout-title">Tabla de contenido</h3>
<div class="callout-content">
<ul>
<li>Módulo: Ciencia de datos en salud pública
<ul>
<li>Unidad: Reporte e informes técnicos en R Markdown
<ul>
<li>Tema 1: ¿Qué es R Markdown?</li>
<li>Tema 2: Estructura de R Markdown</li>
<li>Tema 3: Paso a Paso en R Markdown</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introducción">Introducción<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>En esta unidad aprenderemos sobre el uso del formato R Markdown, el
cual permite integrar código en la generación de informes sin la
necesidad de importar gráficas o crear tablas manualmente. De esta
manera, el formato R Markdown facilita la generación automática,
actualización y redacción de informes técnicos al combinar la sintaxis
del formato Markdown con código en R incrustado en el documento.</p>
</section><section><h2 class="section-heading" id="tema-1-qué-es-r-markdown">
<strong>Tema 1: ¿Qué es R Markdown?</strong><a class="anchor" aria-label="anchor" href="#tema-1-qu%C3%A9-es-r-markdown"></a>
</h2>
<hr class="half-width">
<p>R Markdown es una extensión del formato Markdown que permite combinar
texto con código R incrustado en el documento. De esta manera, los
análisis y visualizaciones generados por medio del código se pueden
incorporar de manera natural en el texto.</p>
<p>R Markdown es ampliamente utilizado por científicos de datos,
analistas, investigadores y profesionales que necesitan presentar sus
análisis y resultados de manera clara y reproducible. Además, es una
herramienta muy valiosa para generar informes automatizados y documentos
técnicos interactivos</p>
</section><section><h2 class="section-heading" id="tema-2-estructura-de-r-markdown">
<strong>Tema 2: Estructura de R Markdown</strong><a class="anchor" aria-label="anchor" href="#tema-2-estructura-de-r-markdown"></a>
</h2>
<hr class="half-width">
<p>Un documento de R Markdown consta de tres tipos principales de
elementos:</p>
<p>1.      <strong>Yaml:</strong> Corresponde a especificaciones del
estilo del documento, título, fecha, autores, etc.</p>
<p>2.      <strong>Texto:</strong> Texto enriquecido con formato y
explicaciones.</p>
<p>3.      <strong>Chunk:</strong> Bloque de código R en donde se
ejecutan y se muestran sus resultados.</p>
<figure><img src="../fig/partes_reporte.png" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="tema-3-paso-a-paso-en-r-markdown">
<strong>Tema 3: Paso a Paso en R Markdown</strong><a class="anchor" aria-label="anchor" href="#tema-3-paso-a-paso-en-r-markdown"></a>
</h2>
<hr class="half-width">
<p>A continuación, seguiremos un paso a paso para crear un R
Markdown.</p>
<div class="section level3">
<h3 id="paso-1--abrir-r-studio-desde-r-project">
<strong>Paso 1.</strong> Abrir R Studio desde R Project<a class="anchor" aria-label="anchor" href="#paso-1--abrir-r-studio-desde-r-project"></a>
</h3>
<p>De acuerdo a lo aprendido en la unidad de Introducción a R y Rstudio,
es recomendable tener un R project donde quedará alojado el informe de R
Markdown. Abre un R Project y sigue con el Paso 2.</p>
</div>
<div class="section level3">
<h3 id="paso-2--crear-un-nuevo-archivo-r-markdown">
<strong>Paso 2. Crear un nuevo archivo R Markdown</strong><a class="anchor" aria-label="anchor" href="#paso-2--crear-un-nuevo-archivo-r-markdown"></a>
</h3>
<p>Siguiendo la ruta <strong>File</strong>&gt;<strong>New
File</strong>&gt;<strong>R Markdown</strong> podemos crear un archivo de
R Markdown definiendo: título, autor(es) y con formato de salida
preferido (html, pdf o word).</p>
<p>Siga los pasos, que también pueden verse en la imagen, y cree su
archivo R Markdown con tu nombre y el título de Reporte.</p>
<figure><img src="../fig/crea_reporte.png" class="figure mx-auto d-block"></figure>
</div>
<div class="section level3">
<h3 id="paso-3--editar-el-archivo-de-r-markdown-y-el-código">
<strong>Paso 3. Editar el archivo de R Markdown y el
código</strong><a class="anchor" aria-label="anchor" href="#paso-3--editar-el-archivo-de-r-markdown-y-el-c%C3%B3digo"></a>
</h3>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Es importante recordar que R Markdown tiene tres secciones, todas
editables: Yaml, Texto y Chunk de código.</p>
</div>
</div>
</div>
<p>Al haber creado su archivo de R Markdown podrá observar e identificar
las diferentes secciones que se muestran en la imagen.</p>
<figure><img src="../fig/partes_reporte.png" class="figure mx-auto d-block"></figure><p>A continuación, veremos cómo editar cada una de estas partes:</p>
<div class="section level4">
<h4 id="cómo-editar-el-texto">
<strong>¿Cómo editar el texto?</strong><a class="anchor" aria-label="anchor" href="#c%C3%B3mo-editar-el-texto"></a>
</h4>
<ul>
<li><p>Para incluir el título de una sección se escribe el símbolo
numeral # y a continuación el nombre de la sección en una línea
única.</p></li>
<li><p>Para poner subtítulos se utiliza dos símbolos numeral
##.</p></li>
<li>
<p>Para cada subtítulo en la estructura se agrega otro símbolo
numeral</p>
<ol style="list-style-type: decimal"><li>
</li></ol>
</li>
<li><p>Para escribir palabra en negritas use dos asteriscos a cada lado
**palabra**</p></li>
<li><p>Para escribir una palabra en cursiva use un asterisco a cada lado
*palabra*(uno a cada lado)</p></li>
<li><p>Para situar el texto en un bloque aparte, se antecede este texto
con el símbolo &gt; en una línea única.</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="cómo-editar-el-chunk-de-código">
<strong>¿Cómo editar el <em>chunk</em> de código?</strong><a class="anchor" aria-label="anchor" href="#c%C3%B3mo-editar-el-chunk-de-c%C3%B3digo"></a>
</h4>
<p>Para incluir código en R, es necesario introducir un <em>chunk</em>
en el documento marcando en la barra de herramientas el icono +C de
color verde como se muestra en la siguiente imagen.</p>
<p>Al dar click en este ícono, aparecerá un espacio delimitado por los
siguientes símbolos que corresponde al <em>chunk:</em></p>
<p><code>```{r}</code></p>
<p><code>```</code></p>
<p>Luego que haya creado el chunk debemos cargar las librerías para esta
práctica. En el chunk cargamos las librerías a utilizar en R. En este
caso, necesitaremos dos</p>
<p><code>```{r}</code></p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">knitr</span><span class="op">)</span></span></code></pre>
</div>
<p><code>```</code></p>
<p>Ahora debemos correr el Chunk dando click en el ícono de
“<code>Run</code>” y seleccionando el Chunk que queremos correr.</p>
<figure><img src="../fig/run_siguiente.png" class="figure mx-auto d-block"></figure><p>Otra opción es dar click al ícono de play verde que se encuentra en
la parte superior derecha de cada Chunk.</p>
<figure><img src="../fig/run_actual.png" class="figure mx-auto d-block"></figure>
</div>
<div class="section level4">
<h4 id="especificar-configuración-del-chunk">
<strong>Especificar configuración del <em>chunk</em></strong><a class="anchor" aria-label="anchor" href="#especificar-configuraci%C3%B3n-del-chunk"></a>
</h4>
<p>Dentro de un “chunk”, podemos elegir si queremos que el código se
muestre en el reporte impreso o no; utilizando los comandos
“<code>echo = FALSE</code>” (para ocultarlo) o
“<code>echo = TRUE</code>” (para mostrarlo).</p>
<p>La siguiente tabla incluye otras opciones que se pueden utilizar para
configurar un <em>chunk.</em> En la tabla se muestra que tipo de salidas
quedan suprimidas al especificar cada opción como
<code>FALSE</code>:</p>
<figure><img src="../fig/tabla_bloque.png" class="figure mx-auto d-block"></figure><p>Por ejemplo, en nuestra práctica especificaremos que se ejecute el
código, como se muestra aquí.</p>
<p><code>```{r, eval = TRUE}</code></p>
<p><code>```</code></p>
</div>
<div class="section level4">
<h4 id="hacer-tablas-en-r-markdown">
<strong>Hacer tablas en R Markdown</strong><a class="anchor" aria-label="anchor" href="#hacer-tablas-en-r-markdown"></a>
</h4>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La tabla de datos para esta práctica será la misma de la Unidad de
Introducción a la visualización de datos en R con <code>ggplot2</code>.
Puede encontrarla en: <a href="https://github.com/TRACE-LAC/TRACE-LAC-data/blob/main/otros/muestra_covid.RDS?raw=true" class="external-link uri">https://github.com/TRACE-LAC/TRACE-LAC-data/blob/main/otros/muestra_covid.RDS?raw=true</a></p>
</div>
</div>
</div>
<p>Para hacer tablas en R Markdown podemos utilizar la función
<code>kable</code> de la librería <code>knitr</code>, como se muestra a
continuación:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">knitr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">readRDS</span><span class="op">(</span><span class="st">"data/muestra_covid.RDS"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">covid_paises</span> <span class="op">&lt;-</span> <span class="va">dat</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">nombre_del_pais</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span> <span class="op">(</span>casos <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">filter</span> <span class="op">(</span><span class="va">casos</span> <span class="op">&gt;</span> <span class="fl">300</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">kable</span><span class="op">(</span><span class="va">covid_paises</span><span class="op">)</span></span></code></pre>
</div>
<p>Como resultado, obtenemos la siguiente tabla:</p>
<table class="table">
<thead><tr class="header">
<th align="left">nombre_del_pais</th>
<th align="right">casos</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Argentina</td>
<td align="right">5059</td>
</tr>
<tr class="even">
<td align="left">Bolivia</td>
<td align="right">5056</td>
</tr>
<tr class="odd">
<td align="left">Brasil</td>
<td align="right">4886</td>
</tr>
<tr class="even">
<td align="left">Chile</td>
<td align="right">5017</td>
</tr>
<tr class="odd">
<td align="left">Colombia</td>
<td align="right">5189</td>
</tr>
<tr class="even">
<td align="left">Costa Rica</td>
<td align="right">4981</td>
</tr>
<tr class="odd">
<td align="left">Cuba</td>
<td align="right">4988</td>
</tr>
<tr class="even">
<td align="left">Ecuador</td>
<td align="right">5082</td>
</tr>
<tr class="odd">
<td align="left">El Salvador</td>
<td align="right">4872</td>
</tr>
<tr class="even">
<td align="left">Guatemala</td>
<td align="right">5078</td>
</tr>
<tr class="odd">
<td align="left">Haití</td>
<td align="right">4894</td>
</tr>
<tr class="even">
<td align="left">Honduras</td>
<td align="right">5014</td>
</tr>
<tr class="odd">
<td align="left">México</td>
<td align="right">5025</td>
</tr>
<tr class="even">
<td align="left">Nicaragua</td>
<td align="right">4995</td>
</tr>
<tr class="odd">
<td align="left">Panamá</td>
<td align="right">5036</td>
</tr>
<tr class="even">
<td align="left">Paraguay</td>
<td align="right">4951</td>
</tr>
<tr class="odd">
<td align="left">Perú</td>
<td align="right">4923</td>
</tr>
<tr class="even">
<td align="left">República Dominicana</td>
<td align="right">5021</td>
</tr>
<tr class="odd">
<td align="left">Uruguay</td>
<td align="right">4986</td>
</tr>
<tr class="even">
<td align="left">Venezuela</td>
<td align="right">4947</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="poner-parámetros-automatizados-en-el-texto">
<strong>Poner parámetros automatizados en el texto</strong><a class="anchor" aria-label="anchor" href="#poner-par%C3%A1metros-automatizados-en-el-texto"></a>
</h4>
<p>En un reporte también es posible combinar código y texto, utilizando
los resultados obtenidos en el código como parte del texto del reporte.
Es decir, para evitar que debamos poner un resultado manualmente en el
texto del reporte, podemos utilizar el resultado que obtuvimos al
ejecutar el chunk  y hacer que este resultado aparezca en el texto de
manera automática. Para esto, simplemente se debe parametrizar un valor
y luego incluirlo en el texto usando su nombre correspondiente.</p>
<p>Por ejemplo, para calcular el total de casos de COVID-19 de sexo
femenino en nuestro conjunto de datos de datos <code>dat</code> dentro
de un <em>chunk</em> de R haríamos lo siguiente:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">total_casos_fem</span> <span class="op">&lt;-</span> <span class="fu">nrow</span><span class="op">(</span><span class="va">dat</span> <span class="op">%&gt;%</span> <span class="fu">filter</span> <span class="op">(</span><span class="va">sexo</span> <span class="op">==</span> <span class="st">"femenino"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora, si queremos incluir este resultado en el texto del reporte,
debemos especificar el parámetro que queremos usar de esta manera ` r
total_casos_fem `, y por ejemplo escribir directamente como texto:</p>
<p>El total de casos de sexo femenino es ` r total_casos_fem`</p>
<p>Cuyo valor debe coincidir con el valor que obtenemos al imprimir el
objeto <code>total_casos_fem</code></p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>total_casos_fem</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">52453</span></span></code></pre>
</div>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Al tejer el informe tendremos una línea similar a esta:</p>
<p>El total de casos de sexo femenino es 52453</p>
<p>Para ver cómo queda combinado el resultado del código con este texto
debemos seguir el siguiente paso.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="paso-4--tejer-generar-el-informe">
<strong>Paso 4. “Tejer” (generar) el informe</strong><a class="anchor" aria-label="anchor" href="#paso-4--tejer-generar-el-informe"></a>
</h3>
<p>Para “tejer” el informe, es decir, generar el informe en un formato
específico (HTML, PDF o Word), debemos dar click en el símbolo
<em>“Knit”</em> en la parte superior del editor del archivo de
Rmarkdown. Tal como se ve en la siguiente imagen:</p>
<figure><img src="../fig/tejer.png" class="figure mx-auto d-block"></figure><p>Después de este paso debe aparecer el informe final en la
presentación que hayamos seleccionado (html, pdf o word).</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Desafío</h3>
<div class="callout-content">
<p>Observe cómo aparece la tabla y el texto del total de casos de sexo
femenino.</p>
</div>
</div>
</div>
<p>¡Felicitaciones, ha producido su primer reporte R Markdown en
html!</p>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="../fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<p>Revise si al final de esta lección adquirió estas competencias:</p>
<ul>
<li>Reconocer la importancia de generar informes en R Markdown<br>
</li>
<li>Aprender a utilizar R markdown de forma básica</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="contribuciones">Contribuciones<a class="anchor" aria-label="anchor" href="#contribuciones"></a>
</h3>
<ul>
<li>Zulma M. Cucunuba: Versión inicial</li>
<li>Laura Gómez-Bermeo: Edición</li>
<li>Geraldine Gomez: Ediciones menores</li>
<li>Andree Valle: Ediciones menores</li>
<li>José M. Velasco España: Ediciones menores</li>
</ul>
</div>
<div class="section level3">
<h3 id="asuntos-legales">Asuntos legales<a class="anchor" aria-label="anchor" href="#asuntos-legales"></a>
</h3>
<p><strong>Copyright</strong>: Zulma M. Cucunuba, 2019</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-limpieza"><p>Content from <a href="limpieza.html">Limpieza de datos epidemiológicos</a></p>
<hr>
<p>Última actualización: 2024-10-28 |

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/episodes/limpieza.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Tiempo estimado: <i aria-hidden="true" data-feather="clock"></i> 44 minutos</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Cómo limpiar datos epidemiológicos con R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<p>Al final de este taller usted podrá:</p>
<ul>
<li><p>Reconocer las herramientas que facilitan la limpieza de datos
epidemiológicos.</p></li>
<li><p>Identificar las buenas prácticas de la limpieza de datos
epidemiológicos.</p></li>
<li><p>Explorar el proceso de limpieza, organización y caracterización
de datos epidemiológicos.</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="prereq1" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Pre requisito</h3>
<div class="callout-content">
<p>Esta unidad tiene como prerequisitos:</p>
<ul>
<li>Introducción a R y RStudio</li>
</ul>
</div>
</div>
</div>
<div id="tabla-de-contenido" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="tabla-de-contenido" class="callout-inner">
<h3 class="callout-title"><strong>Tabla de contenido</strong></h3>
<div class="callout-content">
<ul>
<li>Módulo: Ciencia de datos en salud pública
<ul>
<li>Unidad: Limpieza de datos epidemiológicos
<ul>
<li>Tema 1: Introducción a la limpieza de datos (Ver en plataforma del
curso)</li>
<li>Tema 2: Exploración y caracterización de los datos</li>
<li>Tema 3: Modificación, limpieza y corrección de los datos: Errores
frecuentes y sus soluciones</li>
<li>Tema 4: Organización de los datos</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introducción">Introducción<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n"></a>
</h2>
<hr class="half-width">
<p>En esta unidad abordaremos el proceso de limpieza de datos
epidemiológicos, utilizando los conocimientos previos de la unidad de la
introducción a R y RStudio, abordaremos la limpieza de datos como un
proceso fundamental para obtener insumos idóneos para el análisis de los
datos, la visualización y la creación de reportes epidemiológicos.</p>
<p>En esta unidad, aprenderá a reconocer las actividades necesarias para
llevar a cabo el proceso de limpieza de datos, aprenderá cómo solucionar
los errores más comunes en las bases de datos que pueden afectar el
análisis y comprenderá cómo describir y organizar los datos, clasificar
variables, aplicar formatos a las variables, manejar datos duplicados y
abordar la ausencia de datos.</p>
</section><section><h2 class="section-heading" id="tema-2-exploración-y-caracterización-de-los-datos">
<strong>Tema 2: Exploración y caracterización de los
datos</strong><a class="anchor" aria-label="anchor" href="#tema-2-exploraci%C3%B3n-y-caracterizaci%C3%B3n-de-los-datos"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="exploración-de-la-estructura-de-los-datos-en-r">
<strong>2.2. Exploración de la estructura de los datos en
R</strong><a class="anchor" aria-label="anchor" href="#exploraci%C3%B3n-de-la-estructura-de-los-datos-en-r"></a>
</h3>
<p>Una vez hecha la exploración y la caracterización de los datos
mediante la documentación se procederá a explorar el dataset.</p>
<div class="section level4">
<h4 id="carga-de-la-información">
<strong>2.2.1. Carga de la información</strong><a class="anchor" aria-label="anchor" href="#carga-de-la-informaci%C3%B3n"></a>
</h4>
<div id="instrucciones" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<div id="instrucciones" class="callout-inner">
<h3 class="callout-title">⚠️ <strong>Instrucciones:</strong>
</h3>
<div class="callout-content">
<p>Antes de empezar a trabajar verifique que ya cuenta con los
siguientes pasos:</p>
<ol style="list-style-type: decimal">
<li><p>Cree un proyecto en R</p></li>
<li><p>Cree carpeta llamada “datos” dentro del proyecto</p></li>
<li><p>Descargue el archivo data_limpieza.zip que contiene el dataset
“covid_LA.csv” y el documento de información “covid_LA_info.txt”,
disponible en el siguiente enlace <a href="https://github.com/TRACE-LAC/TRACE-LAC-data/raw/main/data_limpieza.zip" class="external-link uri">https://github.com/TRACE-LAC/TRACE-LAC-data/raw/main/data_limpieza.zip</a> </p></li>
<li><p>Descomprima los archivos y guarde el dataset “covid_LA.csv” en la
carpeta “datos”</p></li>
<li><p>Cree un R script</p></li>
</ol>
</div>
</div>
</div>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Si tiene dudas con el proceso por favor regrese a la unidad de
<strong>Introducción a R</strong>.</p>
</div>
</div>
</div>
<p><strong>Resultado esperado:</strong> Hasta este punto, el proyecto se
debería ver así:</p>
<figure><img src="../fig/vista_proyecto.png" class="figure mx-auto d-block"></figure><ol start="6" style="list-style-type: decimal">
<li>Cargue las librerías: tidyverse, rio y cleanepi.</li>
</ol>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Si aún no las ha instalado puede hacerlo con el siguiente código</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span><span class="op">)</span> <span class="fu">install.packages</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span> <span class="co">#si necesita instalar tidyverse</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span> <span class="fu">install.packages</span><span class="op">(</span><span class="st">"cleanepi"</span><span class="op">)</span> <span class="co">#si necesita instalar cleanepi</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="st">"rio"</span><span class="op">)</span><span class="op">)</span> <span class="fu">install.packages</span><span class="op">(</span><span class="st">"rio"</span><span class="op">)</span> <span class="co">#si necesita instalar rio</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="st">"cleanepi"</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="st">"rio"</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<ol start="7" style="list-style-type: decimal">
<li>Cargue el dataset</li>
</ol>
<p>⚠️ <strong>Instrucción:</strong> Cargue el dataset en R con el
siguiente código:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu">import</span><span class="op">(</span><span class="st">"datos/covid_LA.csv"</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora que la base está cargada podemos hacer la revisión del formato
de los datos.</p>
</div>
<div class="section level4">
<h4 id="exploración-del-dataset">
<strong>2.2.2. Exploración del dataset</strong><a class="anchor" aria-label="anchor" href="#exploraci%C3%B3n-del-dataset"></a>
</h4>
<p>En este ejercicio para explorar las variables contenidas en el objeto
covid se puede realizar una aproximación general o específica a cada
variable.</p>
<p>Por ejemplo, puede hacer una aproximación general usando la función
str para identificar el tipo de objeto, tipo de variables y valores de
la variable. Una opción dentro de tidyverse la función glimpse que
permite identificar rápidamente el contenido del dataset.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función
<code>glimpse</code> o <code>str</code></p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">glimpse</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado :</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code>Rows: 79,200
Columns: 25
$ `fecha reporte web`           &lt;chr&gt; "2021-03-15", "21-03-23", "2021-mar-15",…
$ `ID de caso`                  &lt;int&gt; 1804713, 3202309, 5651419, 59067, 523826…
$ `Fecha de notificación`       &lt;chr&gt; "31/12/2020", "26/04/2021", "08/01/2022"…
$ Edad                          &lt;int&gt; 26, 28, 61, 24, 51, 25, 35, 56, 27, 8, 3…
$ Sexo                          &lt;chr&gt; "M", "F", "M", "M", "M", "M", "M", "M", …
$ `Ubicación del caso`          &lt;chr&gt; "Casa", "Casa", "Casa", "Casa", "Casa", …
$ Estado                        &lt;chr&gt; "Leve", "Leve", "Leve", "Leve", "Leve", …
$ Recuperado                    &lt;chr&gt; "Recuperado", "Recuperado", "Recuperado"…
$ `Fecha de inicio de síntomas` &lt;chr&gt; "21/12/2020", "24/04/2021", "04/01/2022"…
$ `Fecha de muerte`             &lt;chr&gt; "No registra", "No registra", "No regist…
$ `Fecha de diagnóstico`        &lt;chr&gt; "02/01/2021", "06/05/2021", "19/01/2022"…
$ `Fecha de recuperación`       &lt;chr&gt; "13/01/2021", "23/05/2021", "21/01/2022"…
$ `Tipo de recuperación`        &lt;chr&gt; "Tiempo", "Tiempo", "Tiempo", "Tiempo", …
$ `fecha de nacimiento`         &lt;dbl&gt; 1996, 1994, 1961, 1998, 1971, 1997, 1987…
$ `Nombre del país`             &lt;chr&gt; "Argentina", "Haití", "Perú", "Ecuador",…
$ Sintomas                      &lt;chr&gt; "Leve", "Leve", "Leve", "Leve", "Leve", …
$ `Edad repetida`               &lt;int&gt; 26, 28, 61, 24, 51, 25, 35, 56, 27, 8, 3…
$ Num_Hos_Rec                   &lt;chr&gt; "cero", "0", "0", "0", "0", "cero", "cer…
$ `Tensión arterial`            &lt;chr&gt; "102/85", "148/72", "92/84", "122/71", "…
$ `año última actualización`    &lt;int&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024…
$ `método recolección`          &lt;chr&gt; "Llamada telefónica", "Llamada telefónic…
$ `Central de reporte`          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ Vacunado                      &lt;lgl&gt; FALSE, TRUE, FALSE, TRUE, TRUE, TRUE, TR…
$ talla                         &lt;chr&gt; "1.73", "1.67", "1m69", "1.66", "1.63", …
$ peso                          &lt;dbl&gt; 69.6, 73.9, 66.4, 72.5, 64.6, 66.7, 68.9…</code></pre>
</div>
<div class="section level4">
<h4 id="aplicación-de-buenas-prácticas-para-nombrar-variables">
<strong>2.2.3. Aplicación de buenas prácticas para nombrar
variables</strong><a class="anchor" aria-label="anchor" href="#aplicaci%C3%B3n-de-buenas-pr%C3%A1cticas-para-nombrar-variables"></a>
</h4>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p><strong>Tip de buena práctica:</strong> De acuerdo con las buenas
prácticas de programación se recomienda que los nombres de las variables
tengan características como:</p>
<ul>
<li><p>Estar en minúsculas</p></li>
<li><p>No contener caracteres especiales</p></li>
<li><p>No contener espacios</p></li>
</ul>
</div>
</div>
</div>
<p>Estas recomendaciones dependen de la preferencia del analista y su
equipo. Para este módulo vamos a hacer uso de la función
<code>standardize_column_names</code> del paquete
<code>cleanepi</code>.</p>
<div id="callout4" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>standardize_column_names</code> tiene como argumento
principal:</p>
<ul>
<li>
<code>data</code>: el dataset (o linelist) con los datos a
modificar.</li>
</ul>
<p>Y dos argumentos opcionales:</p>
<ul>
<li><p><code>keep</code>: un vector con los nombres de las columnas que
se mantendrán.</p></li>
<li><p><code>rename</code>: un vector con los nombres de las columnas
que se renombraran. Ej.
<code>c(nombre_nuevo1 = “nombre_viejo1”, nombre_nuevo2 = “nombre_viejo2”)</code></p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función
standardize_column_names para limpiar los nombres del dataset covid:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_column_names</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> El código anterior no arroja un
resultado visible en la consola para observar el cambio, sin embargo,
empleando la función glimpse podemos observar los nombres de las
variables de la base covid ajustados.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función glimpse y observe
el cambio en el nombre de la variable Tipo de recuperación:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">glimpse</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code>Rows: 79,200
Columns: 25
$ fecha_reporte_web           &lt;chr&gt; "2021-03-15", "21-03-23", "2021-mar-15", "…
$ id_de_caso                  &lt;int&gt; 1804713, 3202309, 5651419, 59067, 5238264,…
$ fecha_de_notificacion       &lt;chr&gt; "31/12/2020", "26/04/2021", "08/01/2022", …
$ edad                        &lt;int&gt; 26, 28, 61, 24, 51, 25, 35, 56, 27, 8, 35,…
$ sexo                        &lt;chr&gt; "M", "F", "M", "M", "M", "M", "M", "M", "F…
$ ubicacion_del_caso          &lt;chr&gt; "Casa", "Casa", "Casa", "Casa", "Casa", "F…
$ estado                      &lt;chr&gt; "Leve", "Leve", "Leve", "Leve", "Leve", "F…
$ recuperado                  &lt;chr&gt; "Recuperado", "Recuperado", "Recuperado", …
$ fecha_de_inicio_de_sintomas &lt;chr&gt; "21/12/2020", "24/04/2021", "04/01/2022", …
$ fecha_de_muerte             &lt;chr&gt; "No registra", "No registra", "No registra…
$ fecha_de_diagnostico        &lt;chr&gt; "02/01/2021", "06/05/2021", "19/01/2022", …
$ fecha_de_recuperacion       &lt;chr&gt; "13/01/2021", "23/05/2021", "21/01/2022", …
$ tipo_de_recuperacion        &lt;chr&gt; "Tiempo", "Tiempo", "Tiempo", "Tiempo", "T…
$ fecha_de_nacimiento         &lt;dbl&gt; 1996, 1994, 1961, 1998, 1971, 1997, 1987, …
$ nombre_del_pais             &lt;chr&gt; "Argentina", "Haití", "Perú", "Ecuador", "…
$ sintomas                    &lt;chr&gt; "Leve", "Leve", "Leve", "Leve", "Leve", "C…
$ edad_repetida               &lt;int&gt; 26, 28, 61, 24, 51, 25, 35, 56, 27, 8, 35,…
$ num_hos_rec                 &lt;chr&gt; "cero", "0", "0", "0", "0", "cero", "cero"…
$ tension_arterial            &lt;chr&gt; "102/85", "148/72", "92/84", "122/71", "15…
$ ano_ultima_actualizacion    &lt;int&gt; 2024, 2024, 2024, 2024, 2024, 2024, 2024, …
$ metodo_recoleccion          &lt;chr&gt; "Llamada telefónica", "Llamada telefónica"…
$ central_de_reporte          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ vacunado                    &lt;lgl&gt; FALSE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE…
$ talla                       &lt;chr&gt; "1.73", "1.67", "1m69", "1.66", "1.63", "1…
$ peso                        &lt;dbl&gt; 69.6, 73.9, 66.4, 72.5, 64.6, 66.7, 68.9, …</code></pre>
</div>
<div class="section level4">
<h4 id="resumen-de-variables">
<strong>2.2.4. Resumen de variables</strong><a class="anchor" aria-label="anchor" href="#resumen-de-variables"></a>
</h4>
<p>Para empezar la exploración de las variables, emplearemos la función
summary.</p>
<p>⚠️️ <strong>Instrucción:</strong> Emplee la función summary para
explorar las variables:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code> fecha_reporte_web    id_de_caso      fecha_de_notificacion      edad
 Length:79200       Min.   :    150   Length:79200          Min.   :  1.00
 Class :character   1st Qu.:1555387   Class :character      1st Qu.: 27.00
 Mode  :character   Median :3134996   Mode  :character      Median : 38.00
                    Mean   :3128082                         Mean   : 39.84
                    3rd Qu.:4691283                         3rd Qu.: 52.00
                    Max.   :6265661                         Max.   :109.00

     sexo           ubicacion_del_caso    estado           recuperado
 Length:79200       Length:79200       Length:79200       Length:79200
 Class :character   Class :character   Class :character   Class :character
 Mode  :character   Mode  :character   Mode  :character   Mode  :character




 fecha_de_inicio_de_sintomas fecha_de_muerte    fecha_de_diagnostico
 Length:79200                Length:79200       Length:79200
 Class :character            Class :character   Class :character
 Mode  :character            Mode  :character   Mode  :character




 fecha_de_recuperacion tipo_de_recuperacion fecha_de_nacimiento
 Length:79200          Length:79200         Min.   :1913
 Class :character      Class :character     1st Qu.:1970
 Mode  :character      Mode  :character     Median :1984
                                            Mean   : Inf
                                            3rd Qu.:1995
                                            Max.   : Inf
                                            NA's   :1393
 nombre_del_pais      sintomas         edad_repetida    num_hos_rec
 Length:79200       Length:79200       Min.   :  1.00   Length:79200
 Class :character   Class :character   1st Qu.: 27.00   Class :character
 Mode  :character   Mode  :character   Median : 38.00   Mode  :character
                                       Mean   : 39.84
                                       3rd Qu.: 52.00
                                       Max.   :109.00

 tension_arterial   ano_ultima_actualizacion metodo_recoleccion
 Length:79200       Min.   :2024             Length:79200
 Class :character   1st Qu.:2024             Class :character
 Mode  :character   Median :2024             Mode  :character
                    Mean   :2024
                    3rd Qu.:2024
                    Max.   :2024

 central_de_reporte  vacunado          talla                peso
 Mode:logical       Mode :logical   Length:79200       Min.   :53.60
 NA's:79200         FALSE:19186     Class :character   1st Qu.:67.30
                    TRUE :60014     Mode  :character   Median :70.00
                                                       Mean   :69.99
                                                       3rd Qu.:72.70
                                                       Max.   :87.10
                                                                      </code></pre>
<div id="callout5" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Para conocer las unidades de las variables recuerde ver la
documentación llamada “covid_LA_info.txt”.</p>
</div>
</div>
</div>
<p>Además de poder usar <code>summary</code> como en el caso anterior,
también se puede obtener esta información para cada variable de forma
individual. Por ejemplo, para la variable <code>edad</code>, empleamos
<code>summary</code> llamando a la variable dentro del dataset.</p>
<p>⚠️️ <strong>Instrucción:</strong> Emplee la función summary para
explorar la variable edad:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="va">edad</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code>      edad
 Min.   :  1.00
 1st Qu.: 27.00
 Median : 38.00
 Mean   : 39.84
 3rd Qu.: 52.00
 Max.   :109.00  </code></pre>
</div>
<div class="section level4">
<h4 id="exploración-de-variables-cuantitativas">
<strong>2.2.5. Exploración de variables cuantitativas</strong><a class="anchor" aria-label="anchor" href="#exploraci%C3%B3n-de-variables-cuantitativas"></a>
</h4>
<p>Otra forma de explorar variables cuantitativas es en forma de
gráfica. Empleando gráficos como histogramas, diagrama de cajas y
bigotes, líneas de tendencia, nubes de puntos, diagrama de violines,
entre otros. A continuación, se muestran ejemplos para histograma y
diagrama de cajas y bigotes.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función hist para generar
un histograma de la variable <code>edad</code>:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">edad</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co">#pull extrae el vector</span></span>
<span>  <span class="fu">graphics</span><span class="fu">::</span><span class="fu">hist</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<figure><img src="../fig/limpieza-rendered-unnamed-chunk-16-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>⚠️ <strong>Instrucción:</strong> Emplee la función boxplot para
generar un boxplot de la variable <code>edad</code>:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">edad</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">graphics</span><span class="fu">::</span><span class="fu">boxplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<figure><img src="../fig/limpieza-rendered-unnamed-chunk-18-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Estos gráficos pueden resultar útiles para examinar la tendencia y
distribución de los datos, así como observar datos atípicos.</p>
<div id="callout6" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>Para explorar más temas de visualización por favor diríjase a la
<strong>Unidad. Introducción a la visualización de datos en R con
ggplot2</strong>.</p>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="exploración-de-variables-cualitativas">
<strong>2.2.6. Exploración de variables cualitativas</strong><a class="anchor" aria-label="anchor" href="#exploraci%C3%B3n-de-variables-cualitativas"></a>
</h4>
<p>Ahondemos un poco más en la exploración de variables cualitativas.
Cuando usamos <code>summary</code>, al inicio de esta sección, pudimos
ver que sucedía con algunas variables cualitativas. Ahora observaremos
lo que pasa con la variable <code>nombre_del_pais</code>.</p>
<p>⚠️ <strong>Instrucción:</strong> Seleccione la variable
nombre_del_pais empleando la función select y emplee la función summary
para ver el resumen de esta variable.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="va">sintomas</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code><span>   <span class="va">sintomas</span></span>
<span> <span class="va">Length</span><span class="op">:</span><span class="fl">79200</span></span>
<span> <span class="va">Class</span> <span class="op">:</span><span class="va">character</span></span>
<span> <span class="va">Mode</span>  <span class="op">:</span><span class="va">character</span>  </span></code></pre>
<div class="discusión">
<p>¿Qué puede observar?</p>
</div>
<p>Para obtener detalles sobre las categorías de las variables, podemos
usar otras opciones como tablas, tablas de proporciones, extracción de
valores únicos y creación de gráficos. Veamos cada uno:</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función table para generar
una tabla de la variable sintomas :</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">sintomas</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset debió obtener los siguientes resultados:</p>
<pre><code>.
     Critico        Grave         Leve     Moderado Sin sintomas
        1781            1        76976           13          429 </code></pre>
<div class="discusión">
<p>¿Qué puede observar?</p>
</div>
<p>En caso que deseemos observar una tabla con los
<strong>porcentajes</strong> de cada elemento al interior de la variable
podemos recurrir a la función <code>prop.table</code>.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función
<code>prop.table</code> para generar una tabla con porcentajes de la
variable <code>sintomas</code>:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">sintomas</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">prop.table</span><span class="op">(</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span> <span class="co">#si desea las propociones puede eliminar el "*100"</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code>.
     Critico        Grave         Leve     Moderado Sin sintomas
 2.248737374  0.001262626 97.191919192  0.016414141  0.541666667 </code></pre>
<p>Como puede observar ahora podemos ver cada categoría con su
respectivo porcentaje. En caso de que sólo deseemos ver los objetos
contenidos sin otros datos podemos emplear la función
<code>unique</code>.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función unique para
extraer los valores únicos de la variable sintomas:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">sintomas</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">unique</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code>[1] "Leve"         "Critico"      "Moderado"     "Sin sintomas" "Grave"       </code></pre>
<p>Con esto pudimos obtener los diferentes valores de la variable
<code>sintomas</code>. Además, las variables cualitativas pueden ser
examinadas mediante gráficos de barras o de torta.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función barplot a
compañado de la función tablepara generar un gráfico de barras del
contenido de la variable <code>sexo</code>:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">sintomas</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">graphics</span><span class="fu">::</span><span class="fu">barplot</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<img src="../fig/limpieza-rendered-unnamed-chunk-28-1.png" style="display: block; margin: auto;" class="figure"><center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="../fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
</div>
</section><section><h2 class="section-heading" id="tema-3-modificación-limpieza-y-corrección-de-los-datos-errores-frecuentes-y-sus-soluciones">
<strong>Tema 3: Modificación, limpieza y corrección de los datos:
Errores frecuentes y sus soluciones</strong><a class="anchor" aria-label="anchor" href="#tema-3-modificaci%C3%B3n-limpieza-y-correcci%C3%B3n-de-los-datos-errores-frecuentes-y-sus-soluciones"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="revisión-de-la-coherencia-del-contenido-de-las-variables-">
<strong>3.1. Revisión de la coherencia del contenido de las
variables.</strong><a class="anchor" aria-label="anchor" href="#revisi%C3%B3n-de-la-coherencia-del-contenido-de-las-variables-"></a>
</h3>
<p>Para emplear estas funciones de conversión podemos emplearlas
directamente a cada variable (ej. <code>as.factor(covid$sexo)</code>) o
hacer uso de la función <code>across</code>. La función
<code>across</code> es una función del paquete <code>dplyr</code> que
permite aplicar transformaciones a múltiples variables de un data frame
de manera simultánea. </p>
<div id="callout7" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>across</code> tiene dos argumentos</p>
<ol style="list-style-type: decimal">
<li><p><code>.cols</code>: el vector de variables a
transformar.</p></li>
<li><p><code>.fns</code>: la función que se aplicará.</p></li>
</ol>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Convierta las variables
<code>sexo</code>, <code>sintomas</code> y <code>nombre_del_pais</code>
a tipo factor con las funciones <code>across</code> y
<code>as.factor</code>.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">across</span><span class="op">(</span></span>
<span>    .cols <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"sexo"</span>, <span class="st">"sintomas"</span>, <span class="st">"nombre_del_pais"</span><span class="op">)</span>, </span>
<span>    .fns <span class="op">=</span> <span class="va">as.factor</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Se puede observar el resultado
del código anterior empleando funciones de visualización como
summary.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función summary para
explorar las variables transformadas a tipo factor:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="va">sexo</span>, <span class="va">sintomas</span>, <span class="va">nombre_del_pais</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code> sexo              sintomas       nombre_del_pais
 F:42336   Critico     : 1781   Honduras  : 3730
 M:36864   Grave       :    1   Ecuador   : 3715
           Leve        :76976   Nicaragua : 3690
           Moderado    :   13   Brasil    : 3665
           Sin sintomas:  429   Bolivia   : 3661
                                Costa Rica: 3658
                                (Other)   :57081  </code></pre>
<p>Al utilizar la función summary con las variables que acabamos de
convertir en tipo factor, podemos observar que a diferencia de la
primera vez que usamos summary en el paso 4 del tema 2 los resultados
han cambiado.</p>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discusión</h3>
<div class="callout-content">
<p>¿Qué cambios puede observar?</p>
</div>
</div>
</div>
<p>Para dar un orden a las categorías de una variable factor podemos
usar la función <code>fct_relevel</code>.</p>
<p>⚠️ <strong>Instrucción:</strong> Emplee la función
<code>fct_relevel</code> para modificar el orden de las categorías de la
variable:</p>
<div id="callout8" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p><strong>Pista</strong>: En el primer argumento llamamos la variable a
modificar y en el segundo argumento ponemos un vector con los niveles en
el orden deseado.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span>sintomas <span class="op">=</span> </span>
<span>                  <span class="fu">forcats</span><span class="fu">::</span><span class="fu">fct_relevel</span><span class="op">(</span><span class="va">sintomas</span>,</span>
<span>                                       <span class="st">"Sin sintomas"</span>, </span>
<span>                                       <span class="st">"Leve"</span>, <span class="st">"Moderado"</span>, </span>
<span>                                       <span class="st">"Grave"</span>, <span class="st">"Critico"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>⚠️ <strong>Instrucción:</strong> Verifique si los niveles de la
variable están en el orden deseado:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">count</span><span class="op">(</span><span class="va">sintomas</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code>      sintomas     n
1 Sin sintomas   429
2         Leve 76976
3     Moderado    13
4        Grave     1
5      Critico  1781</code></pre>
<p>Tener en orden los niveles de las variables es fundamental para un
adecuado análisis estadístico y una correcta interpretación de los
resultados.</p>
<p>Sin embargo, aunque la documentación especifique que la variable debe
tener un tipo de dato determinado. Por ejemplo, para variables
numéricas, a veces un dataset podría contener los números escritos en
letras. En este caso, al realizar la conversión a tipo numérico el
sistema no los detectará como valores numéricos y los reemplazará por
valores <code>NA</code>, lo que resultará en la pérdida de esa
información. Veamos un ejemplo.</p>
<p>⚠️ <strong>Instrucciones:</strong></p>
<ol style="list-style-type: decimal">
<li>Usando la función table explore los primeros 1000 registros
contenidos de la variable <code>num_hos_rec</code> ¿Qué elementos puede
observar?</li>
</ol>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">num_hos_rec</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code>.
          0           1           2           3        cero         dos
        545          18          22          19         180          26
no registra No registra        tres         uno        &lt;NA&gt;
         81          72          22          15           0 </code></pre>
<p>Esta variable contiene elementos numéricos, caracteres y
<code>NA</code> para convertir la variable a numérica se emplea la
función <code>as.numeric</code>.</p>
<ol start="2" style="list-style-type: decimal">
<li>Antes de convertir el dataset, usando la función
<code>as.numeric</code> obtenga una tabla de la columna en formato
numérico que le permita explorar las consecuencias de convertirla a
numérica.</li>
</ol>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">num_hos_rec</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">as.numeric</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span>useNA <span class="op">=</span> <span class="st">"always"</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code>Warning in base::table(., useNA = "always"): NAs introduced by coercion
.
   0    1    2    3 &lt;NA&gt;
 545   18   22   19  396 </code></pre>
<div class="discusión">
<p>¿Qué cambios pudo observar?</p>
</div>
<p>Al explorar la variable en formato numérico notamos que los números
permanecen mientras que los elementos no numéricos (“no registra” y “No
registra”) se unieron al grupo de <code>NA</code>. Más adelante
profundizaremos en los datos <code>NA</code>. Si esta conforme con los
cambios, puede convertir el dataset:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">convert_to_numeric</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="st">"num_hos_rec"</span>,</span>
<span>    lang <span class="op">=</span> <span class="st">"es"</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="identificación-de-valores-erróneos-o-faltantes-">
<strong>3.2. Identificación de valores erróneos o
faltantes.</strong><a class="anchor" aria-label="anchor" href="#identificaci%C3%B3n-de-valores-err%C3%B3neos-o-faltantes-"></a>
</h3>
<p>Además de los valores NA en nuestro procesamiento de datos podemos
encontrar otros valores Inf (valores infinitos) o NaN (valores numéricos
indeterminados).</p>
<p>La identificación de datos faltantes requiere en primera instancia
identificar la causa de la ausencia de estos datos.</p>
<div class="section level4">
<h4 id="valores-na">
<strong>3.2.1. Valores NA</strong><a class="anchor" aria-label="anchor" href="#valores-na"></a>
</h4>
<div class="section level5">
<h5 id="nas-relacionados-con-separadores-incorrectos">
<strong>NAs relacionados con separadores incorrectos</strong><a class="anchor" aria-label="anchor" href="#nas-relacionados-con-separadores-incorrectos"></a>
</h5>
<p>Veamos un ejemplo común de aparición de <code>NA</code>: cuando
tenemos diferentes separadores para números (ej. en talla).</p>
<p>⚠️ <strong>Instrucción:</strong> Antes de convertir el dataset,
obtenga una tabla (usando la función table) que cuantifique los NA
resultantes de convertir la variable talla en formato numérico con la
función as.numeric. Para comprobar si un valor es <code>NA</code> puede
usar la función <code>is.na</code>.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(talla) <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">as.numeric</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">is.na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>()</span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a>Warning <span class="cf">in</span> base<span class="sc">::</span><span class="fu">table</span>(.)<span class="sc">:</span> NAs introduced by coercion</span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a>.</span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a><span class="cn">FALSE</span>  <span class="cn">TRUE</span> </span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a><span class="dv">54068</span> <span class="dv">25132</span> </span></code></pre>
</div>
<p>Ahora use el siguiente código para comprender por qué se generan
estos <code>NA</code></p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(talla) <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>()</span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"1.73"</span> <span class="st">"1.67"</span> <span class="st">"1m69"</span> <span class="st">"1.66"</span> <span class="st">"1.63"</span> <span class="st">"1 68"</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Como puede observar aparece una
advertencia indicando que algunos de los valores han sido convertidos en
valores <code>NA</code>. Esto se debe a que hay elementos no numéricos
en la variable. Al explorar el contenido de la variable podemos notar
que la talla está como un vector de caracteres y los separadores
incluyen puntos, comas, espacios, etc, pero en este caso es un sólo
separador en todos los casos.</p>
<p>Cuando trabajamos con una variable numérica, es fundamental conocer
si su recolección y digitación se realizaron de manera estandarizada y
limitada a valores numéricos. Para corregir errores como el uso de
caracteres en lugar de números, podemos recurrir a funciones de búsqueda
y reemplazo de caracteres dentro del contenido de la variable. Una
opción es utilizar la función <code>str_replace</code> que se encuentra
en el paquete <code>stringr</code> de R.</p>
<div id="callout9" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>str_replace</code> requiere de tres argumentos:</p>
<ul>
<li><p><code>string</code>: el vector de la variable que se
modificará.</p></li>
<li><p><code>pattern</code>: el carácter que se desea reemplazar. Sin
embargo, por practicidad podemos emplear expresiones regulares. Por
ejemplo, la expresión <code>"[^0-9]"</code> indica que se selecciona
cualquier carácter que no sea un número. . Se pone entre
comillas.</p></li>
<li><p><code>replacement</code>: el carácter que reemplazará al del
primer argumento. Se pone entre comillas.</p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Utilice la función
<code>str_replace</code> para reemplazar dentro de la variable talla
(introducida como carácter) todos los elementos que no sean (^) números
del 0 al 9 o un punto: por un punto.</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span>talla <span class="op">=</span> </span>
<span>                  <span class="fu">stringr</span><span class="fu">::</span><span class="fu">str_replace</span><span class="op">(</span></span>
<span>                    string <span class="op">=</span> <span class="va">talla</span>, </span>
<span>                    pattern<span class="op">=</span> <span class="st">"[^0-9.]"</span>,</span>
<span>                    replacement<span class="op">=</span><span class="st">"."</span><span class="op">)</span></span>
<span>                <span class="op">)</span></span></code></pre>
</div>
<p>⚠️ <strong>Instrucción:</strong> Verifique si se realizo el cambio
deseado:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(talla) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>()</span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"1.73"</span> <span class="st">"1.67"</span> <span class="st">"1.69"</span> <span class="st">"1.66"</span> <span class="st">"1.63"</span> <span class="st">"1.68"</span></span></code></pre>
</div>
<p>⚠️ <strong>Instrucción:</strong> Compruebe el efecto de la
transformación y usando la función table obtenga una tabla que
cuantifique los NA resultante de convertir la variable talla en formato
numérico con la función <code>as.numeric</code>. Para comprobar si un
dato es NA puede usar la función <code>is.na</code>.</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">talla</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">as.numeric</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">is.na</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">base</span><span class="fu">::</span><span class="fu">table</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">.</span></span>
<span><span class="cn">FALSE</span> </span>
<span><span class="fl">79200</span> </span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Si el cambio de decimales fue
exitoso con el dataset y que en caso de reemplazarlo por numérico no
tendría NAs. Por lo tanto está bien hacer el cambio a numérico.</p>
<p>⚠️ <strong>Instrucción:</strong> Transforme la variable talla a
formato numérico e imprima las primeras filas.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>covid <span class="ot">&lt;-</span> covid <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">talla =</span> <span class="fu">as.numeric</span> (talla))</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(talla) <span class="sc">%&gt;%</span></span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>()</span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">1.73</span> <span class="fl">1.67</span> <span class="fl">1.69</span> <span class="fl">1.66</span> <span class="fl">1.63</span> <span class="fl">1.68</span></span></code></pre>
</div>
<p>Como podemos ver, una vez hecha la transformación ya no aparecen
comillas ““, indicando que ya se hizo la conversión a numéricos.</p>
</div>
<div class="section level5">
<h5 id="nas-relacionados-con-errores-en-la-escritura-de-fechas">
<strong>NAs relacionados con errores en la escritura de
fechas</strong><a class="anchor" aria-label="anchor" href="#nas-relacionados-con-errores-en-la-escritura-de-fechas"></a>
</h5>
<p>En algunas ocasiones puede ocurrir que la escritura de fechas sigue
el criterio de quién recolecta los datos. Por ejemplo, en un formulario
que contiene día/mes/año podemos encontrar diligenciamientos como:
“2015-03-15”, “15-03-15”, “2015-mar-15”, “01/mar/2023”, “15/15/03”,
“ene/15”. Dado que corregir una innumerable cantidad de fechas puede ser
una tarea inviable, la función standardize_dates del paquete
<code>cleanepi</code> ofrece una alternativa para hacer corrección
automática, además de convertir la columna al formato fecha
(<code>date</code>).</p>
<div id="callout10" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>standardize_dates</code> además del argumento data
tiene un argumento principal que es:</p>
<ul>
<li>
<code>target_columns</code>: las columnas que contienen las fechas
que se van a estandarizar.</li>
</ul>
<p>Y tres argumentos opcionales:</p>
<ul>
<li><p><code>error_tolerance</code>: el porcentaje permitido de fechas
que no se pueden corregir antes de que se detenga la función.</p></li>
<li><p><code>format</code>: el formato de las fechas. Si se deja como
NULL, la función intentará adivinar el formato. </p></li>
<li><p><code>timeframe</code>: el rango de fechas permitido. Si se deja
como NULL, la función no restringirá las fechas. </p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Observe cómo está compuesta la
variable <code>fecha_reporte_web</code>.</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(fecha_reporte_web) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>   fecha_reporte_web</span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a><span class="dv">1</span>         <span class="dv">2021-03-15</span></span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a><span class="dv">2</span>           <span class="dv">21-03-23</span></span>
<span id="cb42-7"><a href="#cb42-7" tabindex="-1"></a><span class="dv">3</span>        <span class="dv">2021</span><span class="sc">-</span>mar<span class="dv">-15</span></span>
<span id="cb42-8"><a href="#cb42-8" tabindex="-1"></a><span class="dv">4</span>        <span class="dv">01</span><span class="sc">/</span>mar<span class="sc">/</span><span class="dv">2021</span></span>
<span id="cb42-9"><a href="#cb42-9" tabindex="-1"></a><span class="dv">5</span>           <span class="dv">21</span><span class="sc">/</span><span class="dv">15</span><span class="sc">/</span><span class="dv">01</span></span>
<span id="cb42-10"><a href="#cb42-10" tabindex="-1"></a><span class="dv">6</span>             ene<span class="sc">/</span><span class="dv">15</span></span>
<span id="cb42-11"><a href="#cb42-11" tabindex="-1"></a><span class="dv">7</span>         <span class="dv">28</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span><span class="dv">2022</span></span>
<span id="cb42-12"><a href="#cb42-12" tabindex="-1"></a><span class="dv">8</span>         <span class="dv">07</span><span class="sc">/</span><span class="dv">07</span><span class="sc">/</span><span class="dv">2022</span></span>
<span id="cb42-13"><a href="#cb42-13" tabindex="-1"></a><span class="dv">9</span>         <span class="dv">21</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span><span class="dv">2022</span></span>
<span id="cb42-14"><a href="#cb42-14" tabindex="-1"></a><span class="dv">10</span>        <span class="dv">22</span><span class="sc">/</span><span class="dv">03</span><span class="sc">/</span><span class="dv">2021</span></span></code></pre>
</div>
<p>Como puede observar las fechas se presentan en varios formatos,
además como se vio cuando usamos glimpse la columna está en formato
carácter. Para estandarizar estos formatos de fechas y dar formato fecha
a la variable emplearemos la función <code>standarize_dates</code>. </p>
<p>⚠️ <strong>Instrucción:</strong> Convierta la variable
<code>fecha_reporte_web</code> a tipo fecha usando la función
<code>standardize_dates</code>.</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(fecha_reporte_web) <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a>  cleanepi<span class="sc">::</span><span class="fu">standardize_dates</span>() </span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a>   fecha_reporte_web</span>
<span id="cb43-6"><a href="#cb43-6" tabindex="-1"></a><span class="dv">1</span>         <span class="dv">2021-03-15</span></span>
<span id="cb43-7"><a href="#cb43-7" tabindex="-1"></a><span class="dv">2</span>         <span class="dv">2023-03-21</span></span>
<span id="cb43-8"><a href="#cb43-8" tabindex="-1"></a><span class="dv">3</span>         <span class="dv">2021-03-15</span></span>
<span id="cb43-9"><a href="#cb43-9" tabindex="-1"></a><span class="dv">4</span>         <span class="dv">2021-03-01</span></span>
<span id="cb43-10"><a href="#cb43-10" tabindex="-1"></a><span class="dv">5</span>               <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span></span>
<span id="cb43-11"><a href="#cb43-11" tabindex="-1"></a><span class="dv">6</span>               <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span></span>
<span id="cb43-12"><a href="#cb43-12" tabindex="-1"></a><span class="dv">7</span>         <span class="dv">2022-01-28</span></span>
<span id="cb43-13"><a href="#cb43-13" tabindex="-1"></a><span class="dv">8</span>         <span class="dv">2022-07-07</span></span>
<span id="cb43-14"><a href="#cb43-14" tabindex="-1"></a><span class="dv">9</span>         <span class="dv">2022-01-21</span></span>
<span id="cb43-15"><a href="#cb43-15" tabindex="-1"></a><span class="dv">10</span>        <span class="dv">2021-03-22</span></span></code></pre>
</div>
<p>Como puede observar, dado que no especificamos el formato, la función
lo identificó de forma automática. En los casos en que la identificación
falló, los datos fueron transformados a <code>NA</code>.  Además, ahora
la columna está en formato fecha (<code>date</code>).</p>
<p>⚠️ <strong>Instrucción:</strong> Almacene el cambio en la variable
<code>fecha_reporte_web</code></p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">standardize_dates</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="st">"fecha_reporte_web"</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level5">
<h5 id="nas-relacionados-con-errores-en-la-escritura-de-números">
<strong>NAs relacionados con errores en la escritura de
números</strong><a class="anchor" aria-label="anchor" href="#nas-relacionados-con-errores-en-la-escritura-de-n%C3%BAmeros"></a>
</h5>
<p>En algunos casos pueden ocurrir errores en la recolección que no se
corrigen en la digitación como, por ejemplo, escribir el nombre de un
número (ej. “tres”) en lugar del símbolo que representa al número (ej.
“3”).</p>
<p>⚠️ <strong>Instrucción:</strong> Usando la función table explore la
variable <code>num_hos_rec</code></p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(num_hos_rec) <span class="sc">%&gt;%</span></span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>(<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a>.</span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a>    <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">2</span>     <span class="dv">3</span>  <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> </span>
<span id="cb45-6"><a href="#cb45-6" tabindex="-1"></a><span class="dv">57789</span>  <span class="dv">3094</span>  <span class="dv">3059</span>  <span class="dv">3100</span> <span class="dv">12158</span> </span></code></pre>
</div>
<p>Como puede observar hay números escritos como letras y en símbolos,
así como dos categorías de datos que no se registraron y no hay
<code>NA</code> es decir que todos los registros cuentan con algún
valor.</p>
<p>Para corregir estos errores luego de identificarlos podemos
sustituirlos uno por uno con <code>gsub</code> o podemos aprovechar la
función <code>convert_to_numeric</code> del paquete cleanepi.</p>
<div id="callout11" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>convert_to_numeric</code> tiene 3 argumentos:</p>
<ul>
<li><p><code>data</code>: el dataset (o linelist) con los datos a
modificar.</p></li>
<li><p><code>target_colum</code>: el vector que contiene los nombres de
la(s) columna(s) a modificar.</p></li>
<li><p><code>lang</code>: El idioma en el que están los números lang =
c(“en”, “fr”, “es”).</p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Usando la función
<code>convert_to_numeric</code> corrija los errores de la variable
<code>num_hos_rec</code></p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">convert_to_numeric</span><span class="op">(</span></span>
<span>    target_columns <span class="op">=</span> <span class="st">"num_hos_rec"</span>,</span>
<span>    lang <span class="op">=</span> <span class="st">"es"</span><span class="op">)</span></span></code></pre>
</div>
<p>⚠️ <strong>Instrucción:</strong> Usando la función table compruebe el
cambio en la variable <code>num_hos_rec</code></p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(num_hos_rec) <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>(<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a>.</span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a>    <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">2</span>     <span class="dv">3</span>  <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> </span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a><span class="dv">57789</span>  <span class="dv">3094</span>  <span class="dv">3059</span>  <span class="dv">3100</span> <span class="dv">12158</span> </span></code></pre>
</div>
<p>Como puede observar los números en letras fueron convertidos a sus
respectivos equivalentes numéricos. Mientras que todo elemento no
reconocido como número fue convertido en <code>NA</code>.</p>
</div>
<div class="section level5">
<h5 id="nas-relacionados-con-dos-datos-en-la-misma-columna">
<strong>NAs relacionados con dos datos en la misma
columna</strong><a class="anchor" aria-label="anchor" href="#nas-relacionados-con-dos-datos-en-la-misma-columna"></a>
</h5>
<p>En algunos casos un dataset puede contener dos variables en una misma
columna.</p>
<p>⚠️ <strong>Instrucción:</strong> Explore las primeras filas de la
variable <code>tension_arterial</code>.</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(tension_arterial) <span class="sc">%&gt;%</span></span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>()</span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"102/85"</span> <span class="st">"148/72"</span> <span class="st">"92/84"</span>  <span class="st">"122/71"</span> <span class="st">"153/88"</span> <span class="st">"129/87"</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> En consistencia con lo
mencionado en la documentación del dataset “covid_LA_info.txt”, la
variable tension_arterial contiene dos datos en una misma columna
(tensión sistólica y tensión diastólica separada por “/”).</p>
<p>Para solucionar este problema podemos utilizar la función
<code>separate_wider_delim</code> de la librería <code>tidyr</code>
dentro del conjunto de librerías de <code>tidyverse</code>.</p>
<div id="callout12" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>separate_wider_delim</code> además de data tiene
tres argumentos principales.</p>
<ul>
<li><p><code>cols</code>: requiere el vector que contiene la columna de
un data frame.</p></li>
<li><p><code>delim</code>: requiere el separador que se empleó para
separar los datos.</p></li>
<li><p><code>names</code>: requiere el nombre de las columnas que se
crearán.</p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función
<code>separate_wider_delim</code> separe la variable tension_arterial en
dos variables: <code>tension_sistolica</code> y
<code>tension_diastolica</code>.</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a>covid <span class="ot">&lt;-</span> covid <span class="sc">%&gt;%</span></span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(<span class="at">cols =</span> tension_arterial,</span>
<span id="cb49-3"><a href="#cb49-3" tabindex="-1"></a>                              <span class="at">delim =</span> <span class="st">"/"</span>,</span>
<span id="cb49-4"><a href="#cb49-4" tabindex="-1"></a>                              <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"tension_sistolica"</span>,</span>
<span id="cb49-5"><a href="#cb49-5" tabindex="-1"></a>                                        <span class="st">"tension_diastolica"</span>))</span>
<span id="cb49-6"><a href="#cb49-6" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb49-8"><a href="#cb49-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(tension_sistolica) <span class="sc">%&gt;%</span></span>
<span id="cb49-9"><a href="#cb49-9" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>()</span>
<span id="cb49-10"><a href="#cb49-10" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"102"</span> <span class="st">"148"</span> <span class="st">"92"</span>  <span class="st">"122"</span> <span class="st">"153"</span> <span class="st">"129"</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(tension_diastolica) <span class="sc">%&gt;%</span></span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>()</span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"85"</span> <span class="st">"72"</span> <span class="st">"84"</span> <span class="st">"71"</span> <span class="st">"88"</span> <span class="st">"87"</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> El código anterior genera los
cambios directamente en el dataset <code>covid</code> y se obtienen las
dos columnas nuevas.</p>
<p>Es importante recordar que todos estos cambios dependen de las
variables trabajadas y el analista de datos debe usar su criterio en
cada circunstancia y hacer pruebas que le permitan revisar si los
resultados son los esperados.</p>
</div>
</div>
<div class="section level4">
<h4 id="valores-infinitos-inf">
<strong>3.2.2. Valores infinitos (<code>Inf</code>)</strong><a class="anchor" aria-label="anchor" href="#valores-infinitos-inf"></a>
</h4>
<p>Los valores infinitos pueden generarse cuando una operación resulta
en un número demasiado grande (Inf+) o demasiado pequeño (Inf -) para R.
En R si intentamos calcular valores superiores o iguales a 2^1024 (más
grande que el número de granos de arena en el planeta tierra) o cuando
dividimos un número por valores muy cercanos a 0, específicamente
menores de 1/1e-309, obtendremos Inf. En el caso de valores inferiores a
1e-324 R los asume como 0:</p>
<p>⚠️ <strong>Instrucción:</strong> Observe los resultados de las
siguientes operaciones:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="dv">2</span><span class="sc">^</span><span class="dv">1024</span></span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">Inf</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="sc">-</span><span class="dv">2</span><span class="sc">^</span><span class="dv">1024</span></span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="cn">Inf</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">/</span><span class="fl">1e-309</span></span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">Inf</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">Inf</span></span></code></pre>
</div>
<p>La aparición de los valores <code>Inf</code> puede suceder en
cualquier momento del manejo de datos, particularmente cuando hay una
equivocación al realizar operaciones aritméticas. Por ejemplo, cuando se
quería calcular los días de vida, y en lugar de usar el operador de
multiplicación (*) se usó el operador de potencia (^).</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a>covid <span class="ot">&lt;-</span> covid <span class="sc">%&gt;%</span></span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">edad_en_dias =</span> edad <span class="sc">*</span> <span class="dv">365</span>)</span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb55-5"><a href="#cb55-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(edad_en_dias) <span class="sc">%&gt;%</span> </span>
<span id="cb55-6"><a href="#cb55-6" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>()</span>
<span id="cb55-7"><a href="#cb55-7" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">9490</span> <span class="dv">10220</span> <span class="dv">22265</span>  <span class="dv">8760</span> <span class="dv">18615</span>  <span class="dv">9125</span></span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="valores-indeterminados-nan">
<strong>3.2.3. Valores indeterminados
(<code>NaN</code>)</strong><a class="anchor" aria-label="anchor" href="#valores-indeterminados-nan"></a>
</h4>
<p>Estos valores se generan cuando se realizan operaciones
matemáticamente indefinidas. Por ejemplo, si intentamos dividir cero
entre cero o restar o dividir un número infinito de otro número
infinito, obtendremos <code>NaN</code> (que significa “No es un
número”). A continuación se muestran unos ejemplos:</p>
<p>⚠️ <strong>Instrucción:</strong> Observe las siguientes
operaciones</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="cn">Inf</span><span class="sc">/</span><span class="cn">Inf</span></span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">NaN</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="cn">Inf</span><span class="sc">-</span><span class="cn">Inf</span></span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">NaN</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">NaN</span></span></code></pre>
</div>
<p>Aunque los resultados como <code>Inf</code> o <code>NaN</code> puedan
parecer imposibles, estos pueden aparecer cuando en el proceso de
conversión de variables cometemos un error o al crear una variable tras
una operación errónea y el error se propaga en operaciones
subsecuentes.</p>
</div>
<div class="section level4">
<h4 id="datos-duplicados">
<strong>3.2.4. Datos duplicados</strong><a class="anchor" aria-label="anchor" href="#datos-duplicados"></a>
</h4>
<p>Otro error que puede ocurrir frecuentemente son los datos duplicados.
Estos pueden ser tanto una observación de una variable duplicada o todo
un registro duplicado.</p>
<p>⚠️ <strong>Instrucción:</strong> Explore si en la variable
<code>id_de_caso</code> se repiten valores</p>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(id_de_caso) <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="#cb59-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb59-4"><a href="#cb59-4" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>()</span>
<span id="cb59-5"><a href="#cb59-5" tabindex="-1"></a>.</span>
<span id="cb59-6"><a href="#cb59-6" tabindex="-1"></a>    <span class="dv">1</span>     <span class="dv">2</span>     <span class="dv">3</span> </span>
<span id="cb59-7"><a href="#cb59-7" tabindex="-1"></a><span class="dv">75797</span>   <span class="dv">203</span>   <span class="dv">999</span> </span></code></pre>
</div>
<p>Como puede observar al menos 1000 códigos de identificación se
repiten en el dataset dos o tres veces. Pero en ese punto aún no sabemos
si estos 1000 registros son errores o simplemente corresponden a dos
registros diferentes de la misma persona (por ejemplo,
reinfecciones).</p>
<p>Para identificar cuáles son registros (filas) totalmente duplicados
en todas sus variables que sí son errores podemos usar la función
duplicated y sumar los registros así:</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb60-2"><a href="#cb60-2" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">duplicated</span>() <span class="sc">%&gt;%</span></span>
<span id="cb60-3"><a href="#cb60-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">sum</span>()</span>
<span id="cb60-4"><a href="#cb60-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1196</span></span></code></pre>
</div>
<p>Para solucionar este problema podemos usar la función
<code>remove_duplicates</code> de cleanepi el cual permite eliminar las
filas que se repiten exactamente.</p>
<div id="callout13" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>remove_duplicates</code> tiene como argumento
principal:</p>
<ul>
<li>
<code>data</code>: el dataset (o linelist) con los datos a
modificar.</li>
</ul>
<p>Y un argumento opcional:</p>
<ul>
<li>
<code>target_columns</code>: un vector con los nombres de las
columnas que se usaran para buscar los duplicados.</li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función
<code>remove_duplicates</code> elimine del dataset covid las filas
repetidas.</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a>covid <span class="ot">&lt;-</span> covid <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="#cb61-2" tabindex="-1"></a>  cleanepi<span class="sc">::</span><span class="fu">remove_duplicates</span>()</span>
<span id="cb61-3"><a href="#cb61-3" tabindex="-1"></a>Found <span class="dv">2391</span> duplicated rows. Please consult the report <span class="cf">for</span> more details.</span></code></pre>
</div>
<p>Como puede ver en la salida la función detectó 2391 filas replicadas
en su totalidad (pueden estar presentes dos veces o más). Si explora
nuevamente el dataset <code>covid</code> podrá observar que 1196 filas
desaparecieron. Además podrá observar que se genero una nueva columna en
el dataset llamada <code>row_id</code>.</p>
<p>Ahora observemos qué efecto tuvo en los identificadores únicos.</p>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="#cb62-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id_de_caso) <span class="sc">%&gt;%</span></span>
<span id="cb62-3"><a href="#cb62-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb62-4"><a href="#cb62-4" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>()</span>
<span id="cb62-5"><a href="#cb62-5" tabindex="-1"></a>.</span>
<span id="cb62-6"><a href="#cb62-6" tabindex="-1"></a>    <span class="dv">1</span>     <span class="dv">2</span> </span>
<span id="cb62-7"><a href="#cb62-7" tabindex="-1"></a><span class="dv">75994</span>  <span class="dv">1005</span> </span></code></pre>
</div>
<p>De acuerdo con esta tabla, una vez removimos los registros
duplicados, quedan 1005 identificadores de casos
(<code>id_de_caso</code>) que se registran dos veces.</p>
<p>En caso de que se desee mantener únicamente con el primer registro de
cada caso, se puede emplear la misma función
<code>remove_duplicates</code> usando adicionalmente el argumento
<code>target_columns</code> para especificar las columnas. Veamos un
ejemplo.</p>
<p>️<strong>Instrucción:</strong> Empleando la función
<code>remove_duplicates</code> elimine del dataset los datos
correspondiente a “<code>id_de_caso</code>” repetidos.</p>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a>covid <span class="ot">&lt;-</span> covid <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="#cb63-2" tabindex="-1"></a>  cleanepi<span class="sc">::</span><span class="fu">remove_duplicates</span>(</span>
<span id="cb63-3"><a href="#cb63-3" tabindex="-1"></a>    <span class="at">target_columns =</span> <span class="st">"id_de_caso"</span>)</span>
<span id="cb63-4"><a href="#cb63-4" tabindex="-1"></a>Found <span class="dv">2010</span> duplicated rows. Please consult the report <span class="cf">for</span> more details.</span></code></pre>
</div>
<p>Como puede observar se encontraron 2010 <code>id_de_caso</code>
replicados. Por lo que si se explora el dataset covid podrá observar que
el efecto es la eliminación de 1005 filas. Note que el usuario debe
estar seguro de querer remover esas filas, de lo contrario puede
ejecutar la función sin sobrescribir el objeto para observar los
resultados y cuando se este seguro almacenarlo.</p>
</div>
<div class="section level4">
<h4 id="errores-tipográficos">
<strong>3.2.5. Errores tipográficos</strong><a class="anchor" aria-label="anchor" href="#errores-tipogr%C3%A1ficos"></a>
</h4>
<p>A veces, podemos encontrar que las categorías de una variable se han
escrito de múltiples maneras. Veamos un ejemplo:</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb64-2"><a href="#cb64-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(ubicacion_del_caso) <span class="sc">%&gt;%</span></span>
<span id="cb64-3"><a href="#cb64-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>(<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb64-4"><a href="#cb64-4" tabindex="-1"></a>.</span>
<span id="cb64-5"><a href="#cb64-5" tabindex="-1"></a>        casa         Casa    Fallecido     Hospital Hospital UCI          N<span class="sc">/</span>A </span>
<span id="cb64-6"><a href="#cb64-6" tabindex="-1"></a>         <span class="dv">319</span>        <span class="dv">74533</span>         <span class="dv">1727</span>           <span class="dv">12</span>            <span class="dv">1</span>          <span class="dv">407</span> </span>
<span id="cb64-7"><a href="#cb64-7" tabindex="-1"></a>        <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> </span>
<span id="cb64-8"><a href="#cb64-8" tabindex="-1"></a>           <span class="dv">0</span> </span></code></pre>
</div>
<p>Para corregir este error, podemos usar la función <code>gsub</code>
para reemplazar el valor incorrecto “casa” por el valor que hemos
seleccionado como correcto, “Casa”.</p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">mutate</span><span class="op">(</span>ubicacion_del_caso <span class="op">=</span> </span>
<span>                                   <span class="fu">base</span><span class="fu">::</span><span class="fu">gsub</span><span class="op">(</span>pattern<span class="op">=</span> <span class="st">"casa"</span>,</span>
<span>                                        replacement<span class="op">=</span><span class="st">"Casa"</span>,</span>
<span>                                        x<span class="op">=</span> <span class="va">ubicacion_del_caso</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Como resultado, los valores han sido reemplazados:</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="#cb66-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(ubicacion_del_caso) <span class="sc">%&gt;%</span></span>
<span id="cb66-3"><a href="#cb66-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>(<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb66-4"><a href="#cb66-4" tabindex="-1"></a>.</span>
<span id="cb66-5"><a href="#cb66-5" tabindex="-1"></a>        Casa    Fallecido     Hospital Hospital UCI          N<span class="sc">/</span>A         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> </span>
<span id="cb66-6"><a href="#cb66-6" tabindex="-1"></a>       <span class="dv">74852</span>         <span class="dv">1727</span>           <span class="dv">12</span>            <span class="dv">1</span>          <span class="dv">407</span>            <span class="dv">0</span> </span></code></pre>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="../fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
<div class="section level4">
<h4 id="reemplazar-valores-perdidos">
<strong>3.2.6. Reemplazar valores perdidos</strong><a class="anchor" aria-label="anchor" href="#reemplazar-valores-perdidos"></a>
</h4>
<p>En algunas ocasiones los dataset contienen valores que no
corresponden a las categorías de las variables, faltan o desde la
documentación sabemos que esos valores corresponden a <code>NA</code>.
Para garantizar un análisis robusto, es una buena práctica reemplazar
todos esos valores por <code>NA</code>. Para hacer este reemplazo lo
podemos hacer empleando la función <code>replace_missing_values</code>
del paquete cleanepi.</p>
<div id="callout14" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>replace_missing_values</code> además de data tiene
argumentos opcionales:</p>
<ul>
<li><p><code>na_strings</code>: el vector con los caracteres que
representan los valores perdidos (ej. “missing”, “NA”, “N A”). Si no se
diligencia este argumento se usaran los valores predefinidos en el
vector cleanepi::common_na_strings.</p></li>
<li><p><code>target_columns</code>: un vector con los nombres de las
columnas en las cuales se ejecutará la función.</p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Revise el contenido de la variable
<code>ubicacion_del_caso</code>:</p>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="#cb67-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(ubicacion_del_caso) <span class="sc">%&gt;%</span> </span>
<span id="cb67-3"><a href="#cb67-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>(<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb67-4"><a href="#cb67-4" tabindex="-1"></a>.</span>
<span id="cb67-5"><a href="#cb67-5" tabindex="-1"></a>        Casa    Fallecido     Hospital Hospital UCI          N<span class="sc">/</span>A         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> </span>
<span id="cb67-6"><a href="#cb67-6" tabindex="-1"></a>       <span class="dv">74852</span>         <span class="dv">1727</span>           <span class="dv">12</span>            <span class="dv">1</span>          <span class="dv">407</span>            <span class="dv">0</span> </span></code></pre>
</div>
<p>⚠️ <strong>Instrucción</strong>: Revise en la documentación que
posibles NA pueden aparecer en el dataset y reemplacelos por NA.</p>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">replace_missing_values</span><span class="op">(</span> na_strings <span class="op">=</span> <span class="st">"N/A"</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Instrucción:</strong> Revise el contenido de la variable
<code>ubicacion_del_caso</code> para ver los cambios:</p>
<div class="codewrapper sourceCode" id="cb69">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb69-2"><a href="#cb69-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(ubicacion_del_caso) <span class="sc">%&gt;%</span></span>
<span id="cb69-3"><a href="#cb69-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>(<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb69-4"><a href="#cb69-4" tabindex="-1"></a>.</span>
<span id="cb69-5"><a href="#cb69-5" tabindex="-1"></a>        Casa    Fallecido     Hospital Hospital UCI         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> </span>
<span id="cb69-6"><a href="#cb69-6" tabindex="-1"></a>       <span class="dv">74852</span>         <span class="dv">1727</span>           <span class="dv">12</span>            <span class="dv">1</span>          <span class="dv">407</span> </span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="columnas-con-valores-constantes">
<strong>3.2.7. Columnas con valores constantes</strong><a class="anchor" aria-label="anchor" href="#columnas-con-valores-constantes"></a>
</h4>
<p>En algunas ocasiones, es posible encontrar columnas que contienen un
único valor. Esto puede ocurrir, por ejemplo, cuando se divide un
dataset de mayor tamaño en una fracción más pequeña. En estos casos, la
columna que servía para separar los datos se vuelve innecesaria. Para
estos casos se puede emplear la función <code>remove_constants</code>
del paquete cleanepi.</p>
<div id="callout15" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>remove_constants</code> tiene como argumento
principal:</p>
<ul>
<li>
<code>data</code>: el dataset (o linelist) con los datos a
modificar.</li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función
<code>remove_constants</code> remueva las filas que tengan valores
constantes. </p>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">remove_constants</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Para verificar la cantidad de columnas que permanecen después del
proceso, puede utilizar la función <code>ncol</code>:</p>
<div class="codewrapper sourceCode" id="cb71">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb71-2"><a href="#cb71-2" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">ncol</span>()</span>
<span id="cb71-3"><a href="#cb71-3" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">25</span></span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="verificación-de-valores-atípicos">
<strong>3.2.8. Verificación de valores atípicos</strong><a class="anchor" aria-label="anchor" href="#verificaci%C3%B3n-de-valores-at%C3%ADpicos"></a>
</h4>
<p>Para evaluar si los datos se encuentran dentro de un rango esperado o
si existen valores atípicos, se puede emplear la creación de gráficas o
la exploración de la cabeza y cola de los datos cuando están ordenados;
por ejemplo, en el caso de las fechas se pueden crear curvas históricas,
o si son edades mediante histogramas o boxplot.</p>
<p>La identificación de valores atípicos puede variar según el criterio
del analista de datos y las características de la variable. Por ejemplo,
en la variable edad si bien valores superiores a los 100 años son
escasos biológicamente son viables, sin embargo, una edad de 200 años
podría considerarse un valor atípico. En el caso de las variables de
fecha, los valores atípicos pueden surgir cuando hay fechas que no
siguen el comportamiento esperado. Veamos un ejemplo con fechas:</p>
<p>⚠️ <strong>Instrucción:</strong> Antes de comenzar asegúrese que la
variable este en formato fecha, para revisar puede emplear la función
<strong><code>class</code>()</strong></p>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb72-2"><a href="#cb72-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(fecha_reporte_web) <span class="sc">%&gt;%</span></span>
<span id="cb72-3"><a href="#cb72-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">class</span>()</span>
<span id="cb72-4"><a href="#cb72-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Date"</span></span></code></pre>
</div>
<p>Si su variable no está en formato fecha (<code>date</code>), por
favor, revise nuevamente la sección <strong>NAs relacionados con errores
en la escritura de fechas</strong> y emplee la función ahí
aprendida.</p>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función
<code>hist</code>, cree un histograma de las fechas en que fueron
reportados los casos por semana.</p>
<div class="codewrapper sourceCode" id="cb73">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">graphics</span><span class="fu">::</span><span class="fu">hist</span><span class="op">(</span>breaks <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<figure><img src="../fig/limpieza-rendered-unnamed-chunk-78-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Como podemos observar la gráfica empieza desde 1969. Por razones
epidemiológicas rápidamente analizamos que al tratarse de casos COVID
esperaríamos que los registros empezaran desde 2020. Esto indica que
puede haber una fecha que esté mal digitada dando como resultado el
histograma anterior.</p>
<p>Para este caso podemos ordenar los datos con la función arrange del
paquete dplyr dentro de tidyverse para ver las fechas ordenadas e
identificar potenciales fechas erróneas al comienzo de la serie. Como se
muestra en el ejemplo a continuación:</p>
<p>⚠️ <strong>Instrucción:</strong> Observe los datos que encabezan el
dataset cuando está ordenada por fecha.</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">arrange</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<div class="codewrapper sourceCode" id="cb75">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb75-2"><a href="#cb75-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(fecha_reporte_web) <span class="sc">%&gt;%</span></span>
<span id="cb75-3"><a href="#cb75-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(fecha_reporte_web) <span class="sc">%&gt;%</span></span>
<span id="cb75-4"><a href="#cb75-4" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">head</span>()</span>
<span id="cb75-5"><a href="#cb75-5" tabindex="-1"></a><span class="co"># A tibble: 6 × 1</span></span>
<span id="cb75-6"><a href="#cb75-6" tabindex="-1"></a>  fecha_reporte_web</span>
<span id="cb75-7"><a href="#cb75-7" tabindex="-1"></a>  <span class="sc">&lt;</span>date<span class="sc">&gt;</span>           </span>
<span id="cb75-8"><a href="#cb75-8" tabindex="-1"></a><span class="dv">1</span> <span class="dv">1970-01-01</span>       </span>
<span id="cb75-9"><a href="#cb75-9" tabindex="-1"></a><span class="dv">2</span> <span class="dv">2020-03-20</span>       </span>
<span id="cb75-10"><a href="#cb75-10" tabindex="-1"></a><span class="dv">3</span> <span class="dv">2020-03-20</span>       </span>
<span id="cb75-11"><a href="#cb75-11" tabindex="-1"></a><span class="dv">4</span> <span class="dv">2020-03-21</span>       </span>
<span id="cb75-12"><a href="#cb75-12" tabindex="-1"></a><span class="dv">5</span> <span class="dv">2020-03-23</span>       </span>
<span id="cb75-13"><a href="#cb75-13" tabindex="-1"></a><span class="dv">6</span> <span class="dv">2020-03-24</span>       </span></code></pre>
</div>
<p>En la primera fila tenemos el valor por fuera del rango esperado, es
decir, una fecha de 1970. En este caso es un solo dato el que debemos
corregir, sin embargo, podrían existir varios cientos de estos. Para
corregir este tipo de errores se puede eliminar las filas que contienen
estos datos o reasignar a estos valores con datos tipo NA para no perder
la demás información.</p>
</div>
<div class="section level4">
<h4 id="corrección-de-errores-en-fechas">
<strong>3.2.9. Corrección de errores en fechas</strong><a class="anchor" aria-label="anchor" href="#correcci%C3%B3n-de-errores-en-fechas"></a>
</h4>
<p>Una vez explorados los datos e identificados posibles errores,
podemos explorar las medidas correctivas a utilizar. En este caso
teniendo en cuenta que los primeros casos de COVID en latinoamérica
fueron en febrero del 2020 emplearemos el primero de febrero
(2020-02-01) como la fecha a partir de la cual consideraremos estos
datos como válidos. Podemos definir la fecha de corte a partir del
contexto epidemiológico, o la documentación.</p>
<p>⚠️ <strong>Instrucción:</strong> Filtre los datos por la fecha de
reporte antes de la fecha “2020-02-01”.</p>
<div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">filter</span><span class="op">(</span><span class="va">fecha_reporte_web</span> <span class="op">&lt;</span> <span class="fu">as.Date</span><span class="op">(</span><span class="st">"2020-02-01"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
<pre><code># A tibble: 1 × 25
  fecha_reporte_web id_de_caso fecha_de_notificacion  edad sexo
  &lt;date&gt;                 &lt;int&gt; &lt;chr&gt;                 &lt;int&gt; &lt;fct&gt;
1 1970-01-01           1631715 21/12/2020               24 F
# ℹ 20 more variables: ubicacion_del_caso &lt;chr&gt;, estado &lt;chr&gt;,
#   recuperado &lt;chr&gt;, fecha_de_inicio_de_sintomas &lt;chr&gt;, fecha_de_muerte &lt;chr&gt;,
#   fecha_de_diagnostico &lt;chr&gt;, fecha_de_recuperacion &lt;chr&gt;,
#   tipo_de_recuperacion &lt;chr&gt;, fecha_de_nacimiento &lt;dbl&gt;,
#   nombre_del_pais &lt;fct&gt;, sintomas &lt;fct&gt;, edad_repetida &lt;int&gt;,
#   num_hos_rec &lt;dbl&gt;, tension_sistolica &lt;chr&gt;, tension_diastolica &lt;chr&gt;,
#   vacunado &lt;lgl&gt;, talla &lt;dbl&gt;, peso &lt;dbl&gt;, edad_en_dias &lt;dbl&gt;, row_id &lt;int&gt;</code></pre>
<p>Una vez identificados los datos, podemos corregirlos reemplazándolos
por el valor correcto (si lo conocemos), convirtiéndolos en valores NA o
excluyéndolos del análisis.</p>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función filter excluya
las fechas previas a la fecha “2020-02-01” en la variable
fecha_reporte_web. Recuerde usar la expresión ! antes del nombre de la
variable para lograr una selección inversa.</p>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">filter</span><span class="op">(</span><span class="op">!</span><span class="va">fecha_reporte_web</span> <span class="op">&lt;</span> <span class="fu">as.Date</span><span class="op">(</span><span class="st">"2020-02-01"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Ahora volvamos a producir la gráfica y observemos.</p>
<p>⚠️ <strong>Instrucción:</strong> Vuelva a producir el histograma con
la corrección en las fechas.</p>
<div class="codewrapper sourceCode" id="cb79">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">pull</span><span class="op">(</span><span class="va">fecha_reporte_web</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">graphics</span><span class="fu">::</span><span class="fu">hist</span><span class="op">(</span>breaks <span class="op">=</span> <span class="st">"weeks"</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/limpieza-rendered-unnamed-chunk-84-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p><strong>Resultado esperado:</strong> Al usar el anterior código con
el mismo dataset se obtiene el siguiente resultado:</p>
</div>
<div class="section level4">
<h4 id="filtrado-de-registros-con-na">
<strong>3.2.10. Filtrado de registros con NA</strong><a class="anchor" aria-label="anchor" href="#filtrado-de-registros-con-na"></a>
</h4>
<p>En ciertos análisis, puede ser necesario excluir los valores NA. Para
lograr esto, podemos utilizar la función de filtrado proporcionada por
<code>dplyr</code>. Esto nos permite centrarnos en los datos
completos.</p>
<p>⚠️ <strong>Instrucción:</strong> Revise el contenido de la variable
<code>ubicacion_del_caso</code>:</p>
<div class="codewrapper sourceCode" id="cb80">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb80-2"><a href="#cb80-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(ubicacion_del_caso) <span class="sc">%&gt;%</span></span>
<span id="cb80-3"><a href="#cb80-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>(<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb80-4"><a href="#cb80-4" tabindex="-1"></a>.</span>
<span id="cb80-5"><a href="#cb80-5" tabindex="-1"></a>        Casa    Fallecido     Hospital Hospital UCI         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> </span>
<span id="cb80-6"><a href="#cb80-6" tabindex="-1"></a>       <span class="dv">74850</span>         <span class="dv">1726</span>           <span class="dv">12</span>            <span class="dv">1</span>          <span class="dv">407</span> </span></code></pre>
</div>
<p><strong>Instrucción</strong>: Filtre la variable
<code>ubicacion_del_caso</code> para excluir los registros con
<code>NA</code> presentes en esta variable:</p>
<div class="codewrapper sourceCode" id="cb81">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">filter</span><span class="op">(</span><span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">ubicacion_del_caso</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p><strong>Instrucción:</strong> Revise el contenido de la variable
ubicacion_del_caso para ver los cambios:</p>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="#cb82-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(ubicacion_del_caso) <span class="sc">%&gt;%</span> </span>
<span id="cb82-3"><a href="#cb82-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>(<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb82-4"><a href="#cb82-4" tabindex="-1"></a>.</span>
<span id="cb82-5"><a href="#cb82-5" tabindex="-1"></a>        Casa    Fallecido     Hospital Hospital UCI         <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> </span>
<span id="cb82-6"><a href="#cb82-6" tabindex="-1"></a>       <span class="dv">74850</span>         <span class="dv">1726</span>           <span class="dv">12</span>            <span class="dv">1</span>            <span class="dv">0</span> </span></code></pre>
</div>
<p>Como puede observar ahora los NA son 0.</p>
</div>
<div class="section level4">
<h4 id="reemplazo-de-siglas-abreviaturas-o-valores-códigos">
<strong>3.2.11. Reemplazo de siglas, abreviaturas o valores
códigos</strong><a class="anchor" aria-label="anchor" href="#reemplazo-de-siglas-abreviaturas-o-valores-c%C3%B3digos"></a>
</h4>
<p>En el proceso de la recopilación o entrada de datos, es común el uso
de siglas, abreviaturas o códigos para registrar información. Por
ejemplo, en el caso de la variable de sexo, a veces se puede emplear
“1”, “m” o “M” para representar el sexo masculino, y “2”, “f” o “F” para
el sexo femenino, entre otras opciones. Si se cuenta con un diccionario
para la conversión de estos valores, es posible utilizar la función
<code>clean_using_dictionary</code> de del paquete 
<code>cleanepi</code> para realizar el reemplazo correspondiente.</p>
<p>Dado que de momento no tenemos un diccionario podemos crear uno.</p>
<div class="codewrapper sourceCode" id="cb83">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diccionario</span> <span class="op">&lt;-</span> <span class="fu">base</span><span class="fu">::</span><span class="fu">data.frame</span><span class="op">(</span></span>
<span>  options <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"m"</span>, <span class="st">"f"</span><span class="op">)</span>,</span>
<span>  values <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"masculino"</span>, <span class="st">"femenino"</span>, <span class="st">"masculino"</span>,</span>
<span>             <span class="st">"femenino"</span>, <span class="st">"masculino"</span>, <span class="st">"femenino"</span><span class="op">)</span>,</span>
<span>  grp <span class="op">=</span> <span class="fu">rep</span><span class="op">(</span><span class="st">"sexo"</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  orders <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span></span></code></pre>
</div>
<p>⚠️ <strong>Instrucción:</strong> Revise el contenido de la variable
<code>sexo</code>:</p>
<div class="codewrapper sourceCode" id="cb84">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb84-2"><a href="#cb84-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(sexo) <span class="sc">%&gt;%</span></span>
<span id="cb84-3"><a href="#cb84-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>(<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb84-4"><a href="#cb84-4" tabindex="-1"></a>.</span>
<span id="cb84-5"><a href="#cb84-5" tabindex="-1"></a>    F     M  <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> </span>
<span id="cb84-6"><a href="#cb84-6" tabindex="-1"></a><span class="dv">40962</span> <span class="dv">35627</span>     <span class="dv">0</span> </span></code></pre>
</div>
<div id="callout16" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>clean_using_dictionary</code> tiene como argumento
principal:</p>
<ul>
<li><p><code>data</code>: el dataset (o linelist) con los datos a
modificar.</p></li>
<li><p><code>dictionary</code>: un diccionario que contiene los valores
que se van a reemplazar los datos actuales. Cada clave en el diccionario
representa un valor original en el conjunto de datos, y el valor
asociado a esa clave es el nuevo significado que se le asignará al
dato.</p></li>
</ul>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Aplique la función
<code>clean_using_dictionary</code> al dataset:</p>
<div class="codewrapper sourceCode" id="cb85">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="fu">cleanepi</span><span class="fu">::</span><span class="fu">clean_using_dictionary</span><span class="op">(</span><span class="va">covid</span>,</span>
<span>                                          dictionary <span class="op">=</span> <span class="va">diccionario</span><span class="op">)</span></span></code></pre>
</div>
<p>⚠️ <strong>Instrucción:</strong> Revise el contenido de la variable
sexo para ver los cambios:</p>
<div class="codewrapper sourceCode" id="cb86">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" tabindex="-1"></a>covid <span class="sc">%&gt;%</span></span>
<span id="cb86-2"><a href="#cb86-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(sexo) <span class="sc">%&gt;%</span></span>
<span id="cb86-3"><a href="#cb86-3" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">table</span>(<span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb86-4"><a href="#cb86-4" tabindex="-1"></a>.</span>
<span id="cb86-5"><a href="#cb86-5" tabindex="-1"></a>masculino  femenino      <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> </span>
<span id="cb86-6"><a href="#cb86-6" tabindex="-1"></a>    <span class="dv">35627</span>     <span class="dv">40962</span>         <span class="dv">0</span> </span></code></pre>
</div>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="../fig/dudas.png" width="100" class="figure"></a></p>
</center>
</div>
</div>
</section><section><h2 class="section-heading" id="tema-4-organización-de-los-datos">
<strong>Tema 4: Organización de los datos</strong><a class="anchor" aria-label="anchor" href="#tema-4-organizaci%C3%B3n-de-los-datos"></a>
</h2>
<hr class="half-width">
<p>Finalmente podemos realizar algunas actividades de organización de
datos. Como, por ejemplo:</p>
<div class="section level3">
<h3 id="eliminación-de-variables-repetidas-o-que-no-tengan-utilidad-en-responder-la-pregunta-de-investigación">4.1. Eliminación de variables repetidas o que no tengan utilidad en
responder la pregunta de investigación<a class="anchor" aria-label="anchor" href="#eliminaci%C3%B3n-de-variables-repetidas-o-que-no-tengan-utilidad-en-responder-la-pregunta-de-investigaci%C3%B3n"></a>
</h3>
<p>Durante la exploración de datos es posible encontrar variables cuyo
contenido no es necesario para el análisis o que ya no se requieren.
Para optimizar el uso de recursos de memoria en el equipo, podemos
eliminar estas variables. Para lograrlo podemos usar la función select
del paquete tidyverse.</p>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función select
acompañada del símbolo - elimine la variable edad_repetida.</p>
<div class="codewrapper sourceCode" id="cb87">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">select</span> <span class="op">(</span><span class="op">!</span><span class="va">edad_repetida</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="organización-de-las-variables">4.2. Organización de las variables<a class="anchor" aria-label="anchor" href="#organizaci%C3%B3n-de-las-variables"></a>
</h3>
<p>Parte de la organización de las variables incluye asignar nombres
apropiados a las variables, según la necesidad del proyecto. Esto se
puede lograr mediante la función <code>rename</code> de
<code>dplyr</code>.</p>
<p>⚠️ <strong>Instrucción:</strong> Empleando la función rename cambie
el nombre de la variable <code>fecha_de_inicio_de_sintomas</code> a un
nombre más corto como, por ejemplo: <code>inicio_sintomas</code>.</p>
<div class="codewrapper sourceCode" id="cb88">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid</span> <span class="op">&lt;-</span> <span class="va">covid</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu">rename</span><span class="op">(</span>inicio_sintomas <span class="op">=</span> <span class="va">fecha_de_inicio_de_sintomas</span><span class="op">)</span></span></code></pre>
</div>
<p>¿A qué otras columnas les cambiaría el nombre?</p>
</div>
<div class="section level3">
<h3 id="almacenamiento-del-dataset-limpio">4.3. Almacenamiento del dataset limpio<a class="anchor" aria-label="anchor" href="#almacenamiento-del-dataset-limpio"></a>
</h3>
<p>Una vez se haya terminado la modificación, limpieza y corrección de
los datos podemos guardar el dataset limpio. Esto se debe a que, todos
los cambios que han sido realizados se han guardado únicamente en la
sesión de R, y se perderán una vez que esta se cierre. Para hacerlo, se
puede utilizar la función export del paquete rio.</p>
<div id="callout17" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Aviso</h3>
<div class="callout-content">
<p>La función <code>export</code> necesita mínimo dos argumentos:</p>
<ol style="list-style-type: decimal">
<li><p>x: El <strong>nombre del objeto</strong> que se guardará en el
archivo.</p></li>
<li><p>file: El <strong>nombre del archivo</strong> con su extensión
(ej. datos_limpios_covid.RDS). Si se almacenará en una carpeta, se
agrega la ruta a la carpeta antes del nombre del archivo
(ej.datos/limpios/datos_limpios_covid.RDS).</p></li>
</ol>
</div>
</div>
</div>
<p>⚠️ <strong>Instrucción:</strong> Cree un directorio de datos limpios
y almacene los datos corregidos en el formato de su preferencia. Le
recomendamos .RDS.</p>
<div class="codewrapper sourceCode" id="cb89">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rio</span><span class="fu">::</span><span class="fu">export</span><span class="op">(</span><span class="va">covid</span>, <span class="st">"datos/limpios/datos_limpios_covid.RDS"</span><span class="op">)</span><span class="co"># guarde los datos</span></span></code></pre>
</div>
<p><strong>Resultado esperado:</strong> Para observar el resultado vaya
a su carpeta datos y a la subcarpeta limpios. Ahí verá un archivo
llamado datos_limpios_covid.RDS. También puede almacenar el archivo en
formato .xls o .xlsx para Excel, así como en otros múltiples formatos.
Sin embargo, se recomienda RDS por su bajo peso y capacidad de
almacenamiento.</p>
<center>
<p><a href="https://epiverse-trace.github.io/epitkit/Banco_errores.html" class="external-link"><img src="../fig/dudas.png" width="100" class="figure"></a></p>
</center>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<p>Revise si al final de esta lección adquirió estas competencias:</p>
<ul>
<li><p>Reconocer las herramientas que facilitan la limpieza de datos
epidemiológicos.</p></li>
<li><p>Identificar las buenas prácticas de la limpieza de datos
epidemiológicos.</p></li>
<li><p>Explorar el proceso de limpieza, organización y caracterización
de datos epidemiológicos.</p></li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="contribuciones">Contribuciones<a class="anchor" aria-label="anchor" href="#contribuciones"></a>
</h3>
<ul>
<li>Zulma M. Cucunuba: Versión inicial</li>
<li>Laura Gómez-Bermeo: Edición</li>
<li>Geraldine Gomez: Ediciones menores</li>
<li>Andree Valle: Ediciones menores</li>
<li>José M. Velasco España: Ediciones menores</li>
</ul>
</div>
<div class="section level3">
<h3 id="asuntos-legales">Asuntos legales<a class="anchor" aria-label="anchor" href="#asuntos-legales"></a>
</h3>
<p><strong>Copyright</strong>: Zulma M. Cucunuba, 2019</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-Banco_errores"><p>Content from <a href="Banco_errores.html">Banco de preguntas y errores frecuentes</a></p>
<hr>
<p>Última actualización: 2024-10-28 |

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/episodes/Banco_errores.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Tiempo estimado: <i aria-hidden="true" data-feather="clock"></i> 88 minutos</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul>
<li>¿Tiene algunas dificultades con el código en R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<ul>
<li>En este documento usted podrá encontrar algunas de las preguntas y
errores frecuentes de la ejecución del código en R.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="banco-de-preguntas">Banco de preguntas<a class="anchor" aria-label="anchor" href="#banco-de-preguntas"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="cómo-instalar-un-paquete-o-librería-en-r">
<span id="instr">¿Cómo instalar un paquete o “librería” en
R?</span><a class="anchor" aria-label="anchor" href="#c%C3%B3mo-instalar-un-paquete-o-librer%C3%ADa-en-r"></a>
</h3>
<p>Para instalar un paquete en R puede hacerlo a través de:</p>
<ul>
<li>Le recomendamos que lo haga a través de la función:</li>
</ul>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"paquete"</span><span class="op">)</span></span></code></pre>
</div>
<p>Algunos paquetes que están en su fase de desarrollo pueden ser
instalados desde la última versión en github u otras ubicaciones
utilizando los paquetes remotes o pak.</p>
<ul>
<li>Otra opción es usar la función require:</li>
</ul>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw">require</span><span class="op">(</span><span class="st">"paquete"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">install.packages</span><span class="op">(</span><span class="st">"paquete"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<p>Esta opción es útil porque instala el paquete si no está previamente
instalado. Se puede combinar con remotes o pak</p>
<ul>
<li>
<p>Usar la interfaz de RStudio:</p>
<ol style="list-style-type: decimal">
<li><p>Haga click en la ventana <code>Packages</code></p></li>
<li><p>Presione el botón <code>Install</code></p></li>
<li><p>Escriba el nombre del (de los) paquete(s) a instalar</p></li>
<li><p>Presione botón <code>Install</code>.</p></li>
</ol>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="cómo-usar-una-función">
<span id="funcr">¿Cómo usar una función?</span><a class="anchor" aria-label="anchor" href="#c%C3%B3mo-usar-una-funci%C3%B3n"></a>
</h3>
<p>          Si la función pertenece a un paquete de R, puede hacerse de
dos formas:</p>
<ul>
<li>Llamar el nombre del paquete de R y poner dos veces dos puntos
<code>(::)</code> y en seguida llamar el nombre de la función. Ahora
debe diligenciar los argumentos</li>
</ul>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paquete</span><span class="fu">::</span><span class="fu">nombre_de_la_funcion</span><span class="op">(</span><span class="va">argumentos</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>Cargar el paquete de R con <code>library</code>:</li>
</ul>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"paquete"</span><span class="op">)</span></span></code></pre>
</div>
<p>y una vez cargada. Llamar el nombre de la función y diligenciar los
argumentos</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nombre_de_la_funcion</span><span class="op">(</span><span class="va">argumentos</span><span class="op">)</span></span></code></pre>
</div>
<p>Es importante tener previamente el paquete instalado. Si tiene dudas
vaya a <a href="instr">¿Cómo instalar un paquete en R?</a></p>
<ul>
<li>          Si la función fue creada por usted y se encuentra en el
ambiente global:</li>
</ul>
<p>Simplemente llame la función por su nombre y proporcione los
argumentos necesarios:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nombre_de_su_funcion</span><span class="op">(</span><span class="va">argumentos</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="cómo-cargar-un-paquete-o-librería">¿Cómo cargar un paquete o “librería”?<a class="anchor" aria-label="anchor" href="#c%C3%B3mo-cargar-un-paquete-o-librer%C3%ADa"></a>
</h3>
<p>Algunas opciones para cargar un paquete son:</p>
<ul>
<li>La recomendada es utilizar la función library:</li>
</ul>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"paquete"</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>
<p>Utilizando la interfaz de RStudio:</p>
<ol style="list-style-type: decimal">
<li><p>Vaya a la sección derecha inferior a la pestaña
<code>Packages</code></p></li>
<li><p>De click en el cuadro frente a cada función, esto activará la
función <code>library</code>.</p></li>
</ol>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="si-cargo-las-librerías-debo-cargarlas-cada-vez-que-vaya-a-usar-la-función">¿Si cargo las librerías debo cargarlas cada vez que vaya a usar la
función?<a class="anchor" aria-label="anchor" href="#si-cargo-las-librer%C3%ADas-debo-cargarlas-cada-vez-que-vaya-a-usar-la-funci%C3%B3n"></a>
</h3>
<p>No, solo es necesario cargarlas una vez por sesión de R. Sin embargo,
si cerro su RStudio o abrió un nuevo proyecto, cuenta como una nueva
sesión y, por lo tanto, debe cargarlas de nuevo para poder trabajar.</p>
</div>
<div class="section level3">
<h3 id="puedo-desactivar-una-librería-que-ya-cargué-sin-reiniciar-r">¿Puedo desactivar una librería que ya cargué sin reiniciar R?<a class="anchor" aria-label="anchor" href="#puedo-desactivar-una-librer%C3%ADa-que-ya-cargu%C3%A9-sin-reiniciar-r"></a>
</h3>
<p>Si, es posible mediante dos opciones:</p>
<ul>
<li>Utilice la función <code>detach</code>
</li>
</ul>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">detach</span><span class="op">(</span><span class="st">"package:paquete"</span>, unload <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>
<p>Utilizando la interfaz de RStudio:</p>
<ol style="list-style-type: decimal">
<li><p>Vaya a la sección derecha inferior a la pestaña
<code>Packages</code></p></li>
<li><p>De click en el cuadro frente a cada función (si el cuadro tiene
un visto, el paquete está cargado; si el cuadro está vacío, el paquete
no está cargado), esto activará la función <code>detach</code>.
<strong><em>Advertencia</em>: Si presiona el simbolo de x al lado del
paquete lo desinstalará.</strong></p></li>
</ol>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="no-veo-el-resultado-de-mi-código">No veo el resultado de mi código<a class="anchor" aria-label="anchor" href="#no-veo-el-resultado-de-mi-c%C3%B3digo"></a>
</h3>
<p>Esto puede ocurrir por varios motivos:</p>
<ul>
<li>
<p>Si guardo el resultado usando el símbolo de asignación (ej.
<code>nombre &lt;- "Laura"</code>). Este aparecerá en el ambiente global
(zona superior lateral derecha) y no se ejecutará en la consola a menos
que se llame el objeto, es decir,</p>
<ol style="list-style-type: decimal">
<li><p>se ponga el nombre del objeto en la consola y se ejecute
(presionando <code>Enter</code>)</p></li>
<li><p>o que en el script o Chunck de RMarkdown se presione
<code>Control + Enter</code> en Windows o <code>Command + Enter</code>
en Mac.</p></li>
</ol>
</li>
<li><p>Falta alguna librería necesaria. Revise que todas las librerías
necesarias estén cargadas al inicio del script.</p></li>
<li><p>Hay errores en el código. Verifique que no haya errores que
impidan que el código se ejecute correctamente. Al ejecutar el código en
la consola le aparecerán algunas alertas de errores que pueda tener el
código.</p></li>
<li><p>El script no se ha ejecutado completamente. Asegúrese de ejecutar
el script completo para que todas las líneas de código se ejecuten en el
orden correcto.</p></li>
<li><p>El script no se ha ejecutado completamente. Asegúrese de ejecutar
el script completo para que todas las líneas de código se ejecuten en el
orden correcto.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="errores-frecuentes-al-usar-ggplot">Errores frecuentes al usar <code>ggplot</code>
<a class="anchor" aria-label="anchor" href="#errores-frecuentes-al-usar-ggplot"></a>
</h3>
<ul>
<li>
<p>Sintaxis incorrecta:</p>
<ol style="list-style-type: decimal">
<li><p>Usar <code>++</code> en lugar de <code>+</code> para concatenar
funciones.</p></li>
<li><p>También puede ocurrir que el <code>+</code> queda en la línea de
abajo, es importante destacar que para concatenar funciones debe estar
al terminar la línea anterior a la que se quiere concadenar.</p></li>
</ol>
</li>
</ul>
<figure><img src="../fig/bpggplot.png" class="figure mx-auto d-block"></figure><ul>
<li>
<p>No especificar estéticas (aesthetics):</p>
<ol style="list-style-type: decimal">
<li>No incluir <code>aes()</code>.</li>
<li>No definir <code>aes()</code> correctamente, por ejemplo, no indicar
x o y.</li>
<li>Si bien aes en algunos casos puede ir en la parte inicial, la
geometría o estar dividido en secciones, es fundamental que siempre este
presente.</li>
</ol>
</li>
<li><p>Datos no presentes:</p></li>
</ul>
<p>La columna mencionada en aes() no existe en el conjunto de datos.
Usar el nombre incorrecto, recuerde que R es sensible a mayúsculas y
minúsculas por los tanto <code>VariableX</code> es diferente a
<code>variableX</code> o a <code>variablex</code>.</p>
<ul>
<li>Falta de librerías:</li>
</ul>
<p>Antes de trabajar con <code>ggplot</code> siempre recuerde cargar la
librería con <code>library</code>:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span></code></pre>
</div>
<ul>
<li>Errores en <code>geom</code>:</li>
</ul>
<pre><code>Seleccionar la geom incorrecta para el tipo de datos que se desea representar.

### `filter` no funciona

Esto puede ocurrir por varios motivos:</code></pre>
<ul>
<li><p>El paquete <code>dplyr</code> no está cargada. Aseguresé de
incluir <code><a href="https://dplyr.tidyverse.org" class="external-link">library(dplyr)</a></code> o <code><a href="https://tidyverse.tidyverse.org" class="external-link">library(tidyverse)</a></code> en
su script, y ejecutarlo cada nueva sesión.</p></li>
<li><p>Hay conflictos de nombres de funciones con otros paquetes. Use
<code>dplyr::filter()</code> para especificar qué quiere utilizar la
función <code>filter</code> de <code>dplyr</code>.</p></li>
<li><p>Los datos pueden no estar en el formato esperado. Verifique que
la columna que está filtrando existe y tiene los valores
adecuados.</p></li>
</ul>
<p><code>filter</code> acepta condiciones lógicas para seleccionar
filas. Veamos unos ejemplos:</p>
<p>-          Valores específicos:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">estado</span> <span class="op">==</span> <span class="st">"Fallecido"</span><span class="op">)</span></span></code></pre>
</div>
<p>-          Rangos de valores:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">fecha_de_notificacion</span> <span class="op">&gt;=</span> <span class="st">"2020-01-01"</span> <span class="op">&amp;</span> <span class="va">fecha_de_notificacion</span> <span class="op">&lt;=</span> <span class="st">"2020-12-31"</span><span class="op">)</span></span></code></pre>
</div>
<p>-          Condiciones múltiples:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="va">estado</span> <span class="op">==</span> <span class="st">"Fallecido"</span> <span class="op">&amp;</span> <span class="va">nombre_del_pais</span> <span class="op">==</span> <span class="st">"Colombia"</span><span class="op">)</span></span></code></pre>
</div>
<p>-          Condiciones con funciones:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid19</span> <span class="op">%&gt;%</span> <span class="fu">filter</span><span class="op">(</span><span class="fu">grepl</span><span class="op">(</span><span class="st">"Colombia"</span>, <span class="va">nombre_del_pais</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Para saber más sobre filter consulte la <a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">documentación</a>.</p>
</div>
<div class="section level3">
<h3 id="dónde-está-el-objeto-que-cree">¿Dónde está el objeto que cree?<a class="anchor" aria-label="anchor" href="#d%C3%B3nde-est%C3%A1-el-objeto-que-cree"></a>
</h3>
<p>Cuando se crea un objeto este se almacena en el ambiente global.
Podemos ver el ambiente global en la interfaz de R ubicado en la parte
superior lateral derecha.</p>
</div>
<div class="section level3">
<h3 id="no-funciona-el-pipe">No funciona el pipe <code>%&gt;%</code>
<a class="anchor" aria-label="anchor" href="#no-funciona-el-pipe"></a>
</h3>
<p>Recuerde los siguientes puntos:</p>
<ul>
<li>Es importante cargar previamente una librería que contenga el pipe.
Por ejemplo: <code>magrittr</code>, <code>dplyr</code>,
<code>tidyr</code> o <code>purrr</code>.</li>
<li>El pipe debe ir al final de la línea que se va a conectar. No al
inicio de la línea conectada:</li>
</ul>
<figure><img src="../fig/bp_pipe.png" class="figure mx-auto d-block"></figure>
</div>
<div class="section level3">
<h3 id="prevencion">¿Cómo evitar accidentes?<a class="anchor" aria-label="anchor" href="#prevencion"></a>
</h3>
<p>Cuando se va a almacenar cambios en el objeto donde esta almacenado
el dataframe, es recomendable tener algunas precauciones para evitar
perder información:</p>
<ul>
<li>Crear un respaldo de los datos en objetos:</li>
</ul>
<p>o   Hacer copias de seguridad regularmente durante el proceso. Se
recomienda hacer una copia inicial para evitar cargar la base de nuevo.
Tras hacer algunos procesos, en especial, aquellos que consumen tiempo
se recomienda crear respaldos. Puede crear tanto como considere
convenientes. Se recomienda crear notas para identificar cada
proceso</p>
<figure><img src="../fig/bpaccidentes.png" class="figure mx-auto d-block"></figure><ul>
<li>Crear un respaldo de los datos en archivos:</li>
</ul>
<p>o   Al igual que guardar en objetos, es buena idea guardar los datos
que ya han pasado algunos procesos en el disco del computador. Esto
evita que si se bloquea la sesión o se apaga el computador los datos
procesados estén resguardados. Cada cuanto se deben almacenar depende de
quién realiza el procesamiento.</p>
<figure><img src="../fig/bpaccidentes1.png" class="figure mx-auto d-block"></figure><ul>
<li>Pruebas antes de almacenar:</li>
</ul>
<p>o   Realizar pruebas de los cambios deseados antes de guardarlos
definitivamente.</p>
<p>o   Ejemplo: Si se quiere transformar una variable a numérica, antes
de almacernarla y terminar teniendo <code>NAs</code> no deseados en los
datos, es recomendable hacer una prueba antes de si se originaran esos
<code>NAs</code></p>
<figure><img src="../fig/bpaccidentes2.png" class="figure mx-auto d-block"></figure><ul>
<li>Crear variables de respaldo:</li>
</ul>
<p>o   Algunas veces cuando vamos a transformar una variable es mejor
crear una nueva que almacene el contenido de la transformación. Esto
evita el riesgo de pérdida de información al transformar una
variable.</p>
<figure><img src="../fig/bpaccidentes3.png" class="figure mx-auto d-block"></figure><ul>
<li>Cuidado al almacenar:</li>
</ul>
<p>o   No almacenar tablas u objetos transformados accidentalmente.</p>
<p>o   Ej. si creamos una tabla para ver si la variable cambio como se
deseaba y luego reutilizamos el código y añadimos la asignación
adelante, almacenaríamos la tabla y perderíamos la información que tenía
el objeto</p>
<figure><img src="../fig/bpaccidentes4.png" class="figure mx-auto d-block"></figure>
</div>
<div class="section level3">
<h3 id="mi-dataframe-cambió-inesperadamente">Mi dataframe cambió inesperadamente<a class="anchor" aria-label="anchor" href="#mi-dataframe-cambi%C3%B3-inesperadamente"></a>
</h3>
<p>Cuando tenemos accidentes con nuestros datos algunas opciones
son:</p>
<p>-          Revisar cual es el daño y ver si es reparable. Por
ejemplo, se cambió el carácter incorrecto en una cadena de texto.</p>
<p>-          Cargar los datos a partir de un respaldo. Si hemos creado
respaldos del proceso podemos evitarnos tiempos largo de procesamiento.
Entre estos respaldos están las variables de respaldo o los objetos de
respaldo (ver <a href="Banco_errores.html#prevencion">¿Cómo evitar
accidentes?</a>).</p>
</div>
<div class="section level3">
<h3 id="uso-de-la-función-rename">Uso de la función <code>rename</code>
<a class="anchor" aria-label="anchor" href="#uso-de-la-funci%C3%B3n-rename"></a>
</h3>
<p>1.      Llame la base de datos</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span></span></code></pre>
</div>
<p>2.      Use el pipe<code>%&gt;%</code> para enlazarlo a la función
rename</p>
<p>3.      Llame la función <code>rename</code> y escriba primero el
nuevo nombre de la columna y después el nombre de la columna
preexistente a la que quiere cambiar el nombre</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op">%&gt;%</span> <span class="fu">rename</span><span class="op">(</span>nombrenuevo <span class="op">=</span> <span class="va">nombreantiguo</span><span class="op">)</span></span></code></pre>
</div>
<p>n.      Seleccionar algunas filas de un grupo de datos</p>
<p>1.      Llame la base de datos</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span></span></code></pre>
</div>
<p>2.      Use el pipe <code>%&gt;%</code> para enlazarlo a la función
<code>group_by</code></p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">variable_grupo</span><span class="op">)</span></span></code></pre>
</div>
<p>La función <code>group_by</code> creará grupos de datos según una
variable determinada en los cuales puede realizar otras acciones como
por ejemplo seleccionar los datos en el encabezado de cada grupo.</p>
<p>4.      Enseguida use la función como en este ejemplo podríamos usar
<code>head</code> solo para los datos del encabezado de cada grupo.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">variabledeinteres</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="cómo-usar-summarise">¿Cómo usar <code>summarise</code>?<a class="anchor" aria-label="anchor" href="#c%C3%B3mo-usar-summarise"></a>
</h3>
<p>1.      Llame la base de datos</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span></span></code></pre>
</div>
<p>2.      Use el pipe<code>%&gt;%</code>para enlazarlo a la función
<code>summarise</code></p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">%&gt;%</span> <span class="fu">summarise</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>La función summarise no puede utilizarse de forma directa, por lo
tanto, debe usarse junto a un argumento adentro, por ejemplo:</p>
<p>a.      Obtener el promedio</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>mean <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">variabledeinteres</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>b.      Obtener la desviación estandar</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>sd <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">variabledeinteres</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Esta función puede usarse con agrupación previa
(<code>group_by</code>) para obtener estos valores por cada grupo, por
ejemplo,</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">%&gt;%</span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">pais</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">variabledeinteres</span><span class="op">)</span>, </span>
<span>    sd <span class="op">=</span> <span class="fu">sd</span><span class="op">(</span><span class="va">variabledeinteres</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="errores-relacionados-a-grupos-group_by-y-ungroup">Errores relacionados a grupos (group_by y ungroup)<a class="anchor" aria-label="anchor" href="#errores-relacionados-a-grupos-group_by-y-ungroup"></a>
</h3>
<ul>
<li>Un error muy frecuente es que se almacena el objeto agrupado
(<code>group_by</code>), dado que no se realizó la acción de desagrupar
al final. Esto puede generar errores como cálculos incorrectos,
resúmenes por grupo en lugar de sobre la totalidad de los datos, y
problemas al realizar operaciones subsecuentes en el conjunto de datos.
Por ello, recomendamos siempre emplear (<code>ungroup</code>) antes de
almacenar. Para usar <code>ungroup()</code> basta con ponerlo al
final.</li>
</ul>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">categoria</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">procesamiento_de_datos</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> </span></code></pre>
</div>
<p>Veamos un ejemplo de un error que puede ocurrir por no
desagrupar:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span>
<span><span class="fu">set.seed</span><span class="op">(</span><span class="fl">123</span><span class="op">)</span> <span class="co"># Para reproducibilidad</span></span>
<span><span class="co">#dataframe de ejemplo</span></span>
<span><span class="va">tipo_sanguineo</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"O"</span>,<span class="st">"AB"</span><span class="op">)</span></span>
<span><span class="va">rh</span> <span class="op">&lt;-</span> <span class="fu">sample</span><span class="op">(</span><span class="fu">c</span><span class="op">(</span><span class="st">"+"</span>, <span class="st">"-"</span><span class="op">)</span>, <span class="fl">10</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">dia</span> <span class="op">&lt;-</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">f_latidos</span> <span class="op">&lt;-</span> <span class="fu">sample</span><span class="op">(</span><span class="fl">60</span><span class="op">:</span><span class="fl">100</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">f_respiratoria</span> <span class="op">&lt;-</span> <span class="fu">sample</span><span class="op">(</span><span class="fl">12</span><span class="op">:</span><span class="fl">20</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span><span class="va">tipo_sanguineo</span>, <span class="va">rh</span>, <span class="va">dia</span>, <span class="va">f_latidos</span>, <span class="va">f_respiratoria</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#resumen por columnas</span></span>
<span><span class="va">por_dia</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">tipo_sanguineo</span>,<span class="va">rh</span>, <span class="va">dia</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span></span>
<span>    f_l <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">f_latidos</span><span class="op">)</span>, </span>
<span>    f_r <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">f_respiratoria</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre>
</div>
<p>Creemos una variable que contenga id únicos por cada fila</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>por_dia <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="co"># A tibble: 20 × 6</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="co"># Groups:   tipo_sanguineo, rh [8]</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>   tipo_sanguineo rh      dia   f_l   f_r    id</span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>          <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a> <span class="dv">1</span> A              <span class="sc">+</span>         <span class="dv">1</span>  <span class="fl">76.3</span>  <span class="fl">15.2</span>     <span class="dv">1</span></span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a> <span class="dv">2</span> A              <span class="sc">+</span>         <span class="dv">3</span>  <span class="fl">81.5</span>  <span class="fl">16.6</span>     <span class="dv">2</span></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a> <span class="dv">3</span> A              <span class="sc">+</span>         <span class="dv">4</span>  <span class="fl">81.2</span>  <span class="fl">15.6</span>     <span class="dv">3</span></span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a> <span class="dv">4</span> A              <span class="sc">+</span>         <span class="dv">5</span>  <span class="dv">81</span>    <span class="fl">15.9</span>     <span class="dv">4</span></span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a> <span class="dv">5</span> A              <span class="sc">-</span>         <span class="dv">2</span>  <span class="fl">78.3</span>  <span class="fl">16.2</span>     <span class="dv">1</span></span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a> <span class="dv">6</span> AB             <span class="sc">+</span>         <span class="dv">2</span>  <span class="fl">79.3</span>  <span class="dv">16</span>       <span class="dv">1</span></span>
<span id="cb27-12"><a href="#cb27-12" tabindex="-1"></a> <span class="dv">7</span> AB             <span class="sc">+</span>         <span class="dv">5</span>  <span class="fl">73.1</span>  <span class="fl">17.4</span>     <span class="dv">2</span></span>
<span id="cb27-13"><a href="#cb27-13" tabindex="-1"></a> <span class="dv">8</span> AB             <span class="sc">-</span>         <span class="dv">1</span>  <span class="dv">83</span>    <span class="fl">16.6</span>     <span class="dv">1</span></span>
<span id="cb27-14"><a href="#cb27-14" tabindex="-1"></a> <span class="dv">9</span> AB             <span class="sc">-</span>         <span class="dv">3</span>  <span class="fl">79.8</span>  <span class="dv">15</span>       <span class="dv">2</span></span>
<span id="cb27-15"><a href="#cb27-15" tabindex="-1"></a><span class="dv">10</span> AB             <span class="sc">-</span>         <span class="dv">4</span>  <span class="fl">84.8</span>  <span class="fl">17.4</span>     <span class="dv">3</span></span>
<span id="cb27-16"><a href="#cb27-16" tabindex="-1"></a><span class="dv">11</span> B              <span class="sc">+</span>         <span class="dv">2</span>  <span class="fl">77.8</span>  <span class="fl">16.4</span>     <span class="dv">1</span></span>
<span id="cb27-17"><a href="#cb27-17" tabindex="-1"></a><span class="dv">12</span> B              <span class="sc">+</span>         <span class="dv">5</span>  <span class="fl">83.8</span>  <span class="fl">14.6</span>     <span class="dv">2</span></span>
<span id="cb27-18"><a href="#cb27-18" tabindex="-1"></a><span class="dv">13</span> B              <span class="sc">-</span>         <span class="dv">1</span>  <span class="fl">74.5</span>  <span class="fl">14.9</span>     <span class="dv">1</span></span>
<span id="cb27-19"><a href="#cb27-19" tabindex="-1"></a><span class="dv">14</span> B              <span class="sc">-</span>         <span class="dv">3</span>  <span class="fl">85.1</span>  <span class="fl">16.2</span>     <span class="dv">2</span></span>
<span id="cb27-20"><a href="#cb27-20" tabindex="-1"></a><span class="dv">15</span> B              <span class="sc">-</span>         <span class="dv">4</span>  <span class="fl">83.3</span>  <span class="fl">16.6</span>     <span class="dv">3</span></span>
<span id="cb27-21"><a href="#cb27-21" tabindex="-1"></a><span class="dv">16</span> O              <span class="sc">+</span>         <span class="dv">1</span>  <span class="fl">80.3</span>  <span class="dv">15</span>       <span class="dv">1</span></span>
<span id="cb27-22"><a href="#cb27-22" tabindex="-1"></a><span class="dv">17</span> O              <span class="sc">+</span>         <span class="dv">3</span>  <span class="fl">78.9</span>  <span class="fl">14.8</span>     <span class="dv">2</span></span>
<span id="cb27-23"><a href="#cb27-23" tabindex="-1"></a><span class="dv">18</span> O              <span class="sc">+</span>         <span class="dv">4</span>  <span class="fl">81.2</span>  <span class="fl">14.9</span>     <span class="dv">3</span></span>
<span id="cb27-24"><a href="#cb27-24" tabindex="-1"></a><span class="dv">19</span> O              <span class="sc">+</span>         <span class="dv">5</span>  <span class="fl">84.9</span>  <span class="dv">15</span>       <span class="dv">4</span></span>
<span id="cb27-25"><a href="#cb27-25" tabindex="-1"></a><span class="dv">20</span> O              <span class="sc">-</span>         <span class="dv">2</span>  <span class="fl">80.7</span>  <span class="fl">16.1</span>     <span class="dv">1</span></span></code></pre>
</div>
<p>Cómo puede observar en la columna id en lugar de identificadores
únicos tenemos id que se repiten. ¿Por qué sucedió si cada fila es
diferente?</p>
<p>La razón a este problema subyace en que los datos siguen agrupados.
Aún si no aplicamos directamente el <code>ungroup</code> como se explico
antes, todavía podemos solucionarlo.</p>
<p>Veamos como no se solucionaría primero. Un error frecuente al tratar
de solucionar este problema es aplicar la función ungroup sin almacenar
el resultado.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="co"># aplicación equivocada de ungroup</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>por_dia <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() </span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="co"># A tibble: 20 × 5</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>   tipo_sanguineo rh      dia   f_l   f_r</span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>          <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a> <span class="dv">1</span> A              <span class="sc">+</span>         <span class="dv">1</span>  <span class="fl">76.3</span>  <span class="fl">15.2</span></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a> <span class="dv">2</span> A              <span class="sc">+</span>         <span class="dv">3</span>  <span class="fl">81.5</span>  <span class="fl">16.6</span></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a> <span class="dv">3</span> A              <span class="sc">+</span>         <span class="dv">4</span>  <span class="fl">81.2</span>  <span class="fl">15.6</span></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a> <span class="dv">4</span> A              <span class="sc">+</span>         <span class="dv">5</span>  <span class="dv">81</span>    <span class="fl">15.9</span></span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a> <span class="dv">5</span> A              <span class="sc">-</span>         <span class="dv">2</span>  <span class="fl">78.3</span>  <span class="fl">16.2</span></span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a> <span class="dv">6</span> AB             <span class="sc">+</span>         <span class="dv">2</span>  <span class="fl">79.3</span>  <span class="dv">16</span>  </span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a> <span class="dv">7</span> AB             <span class="sc">+</span>         <span class="dv">5</span>  <span class="fl">73.1</span>  <span class="fl">17.4</span></span>
<span id="cb28-13"><a href="#cb28-13" tabindex="-1"></a> <span class="dv">8</span> AB             <span class="sc">-</span>         <span class="dv">1</span>  <span class="dv">83</span>    <span class="fl">16.6</span></span>
<span id="cb28-14"><a href="#cb28-14" tabindex="-1"></a> <span class="dv">9</span> AB             <span class="sc">-</span>         <span class="dv">3</span>  <span class="fl">79.8</span>  <span class="dv">15</span>  </span>
<span id="cb28-15"><a href="#cb28-15" tabindex="-1"></a><span class="dv">10</span> AB             <span class="sc">-</span>         <span class="dv">4</span>  <span class="fl">84.8</span>  <span class="fl">17.4</span></span>
<span id="cb28-16"><a href="#cb28-16" tabindex="-1"></a><span class="dv">11</span> B              <span class="sc">+</span>         <span class="dv">2</span>  <span class="fl">77.8</span>  <span class="fl">16.4</span></span>
<span id="cb28-17"><a href="#cb28-17" tabindex="-1"></a><span class="dv">12</span> B              <span class="sc">+</span>         <span class="dv">5</span>  <span class="fl">83.8</span>  <span class="fl">14.6</span></span>
<span id="cb28-18"><a href="#cb28-18" tabindex="-1"></a><span class="dv">13</span> B              <span class="sc">-</span>         <span class="dv">1</span>  <span class="fl">74.5</span>  <span class="fl">14.9</span></span>
<span id="cb28-19"><a href="#cb28-19" tabindex="-1"></a><span class="dv">14</span> B              <span class="sc">-</span>         <span class="dv">3</span>  <span class="fl">85.1</span>  <span class="fl">16.2</span></span>
<span id="cb28-20"><a href="#cb28-20" tabindex="-1"></a><span class="dv">15</span> B              <span class="sc">-</span>         <span class="dv">4</span>  <span class="fl">83.3</span>  <span class="fl">16.6</span></span>
<span id="cb28-21"><a href="#cb28-21" tabindex="-1"></a><span class="dv">16</span> O              <span class="sc">+</span>         <span class="dv">1</span>  <span class="fl">80.3</span>  <span class="dv">15</span>  </span>
<span id="cb28-22"><a href="#cb28-22" tabindex="-1"></a><span class="dv">17</span> O              <span class="sc">+</span>         <span class="dv">3</span>  <span class="fl">78.9</span>  <span class="fl">14.8</span></span>
<span id="cb28-23"><a href="#cb28-23" tabindex="-1"></a><span class="dv">18</span> O              <span class="sc">+</span>         <span class="dv">4</span>  <span class="fl">81.2</span>  <span class="fl">14.9</span></span>
<span id="cb28-24"><a href="#cb28-24" tabindex="-1"></a><span class="dv">19</span> O              <span class="sc">+</span>         <span class="dv">5</span>  <span class="fl">84.9</span>  <span class="dv">15</span>  </span>
<span id="cb28-25"><a href="#cb28-25" tabindex="-1"></a><span class="dv">20</span> O              <span class="sc">-</span>         <span class="dv">2</span>  <span class="fl">80.7</span>  <span class="fl">16.1</span></span>
<span id="cb28-26"><a href="#cb28-26" tabindex="-1"></a></span>
<span id="cb28-27"><a href="#cb28-27" tabindex="-1"></a><span class="co"># si bien desagrupa el objeto para imprimirlo, </span></span>
<span id="cb28-28"><a href="#cb28-28" tabindex="-1"></a><span class="co"># mientras no se almacene  el objeto serguirá agrupado</span></span>
<span id="cb28-29"><a href="#cb28-29" tabindex="-1"></a>por_dia <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb28-30"><a href="#cb28-30" tabindex="-1"></a><span class="co"># A tibble: 20 × 6</span></span>
<span id="cb28-31"><a href="#cb28-31" tabindex="-1"></a><span class="co"># Groups:   tipo_sanguineo, rh [8]</span></span>
<span id="cb28-32"><a href="#cb28-32" tabindex="-1"></a>   tipo_sanguineo rh      dia   f_l   f_r    id</span>
<span id="cb28-33"><a href="#cb28-33" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>          <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb28-34"><a href="#cb28-34" tabindex="-1"></a> <span class="dv">1</span> A              <span class="sc">+</span>         <span class="dv">1</span>  <span class="fl">76.3</span>  <span class="fl">15.2</span>     <span class="dv">1</span></span>
<span id="cb28-35"><a href="#cb28-35" tabindex="-1"></a> <span class="dv">2</span> A              <span class="sc">+</span>         <span class="dv">3</span>  <span class="fl">81.5</span>  <span class="fl">16.6</span>     <span class="dv">2</span></span>
<span id="cb28-36"><a href="#cb28-36" tabindex="-1"></a> <span class="dv">3</span> A              <span class="sc">+</span>         <span class="dv">4</span>  <span class="fl">81.2</span>  <span class="fl">15.6</span>     <span class="dv">3</span></span>
<span id="cb28-37"><a href="#cb28-37" tabindex="-1"></a> <span class="dv">4</span> A              <span class="sc">+</span>         <span class="dv">5</span>  <span class="dv">81</span>    <span class="fl">15.9</span>     <span class="dv">4</span></span>
<span id="cb28-38"><a href="#cb28-38" tabindex="-1"></a> <span class="dv">5</span> A              <span class="sc">-</span>         <span class="dv">2</span>  <span class="fl">78.3</span>  <span class="fl">16.2</span>     <span class="dv">1</span></span>
<span id="cb28-39"><a href="#cb28-39" tabindex="-1"></a> <span class="dv">6</span> AB             <span class="sc">+</span>         <span class="dv">2</span>  <span class="fl">79.3</span>  <span class="dv">16</span>       <span class="dv">1</span></span>
<span id="cb28-40"><a href="#cb28-40" tabindex="-1"></a> <span class="dv">7</span> AB             <span class="sc">+</span>         <span class="dv">5</span>  <span class="fl">73.1</span>  <span class="fl">17.4</span>     <span class="dv">2</span></span>
<span id="cb28-41"><a href="#cb28-41" tabindex="-1"></a> <span class="dv">8</span> AB             <span class="sc">-</span>         <span class="dv">1</span>  <span class="dv">83</span>    <span class="fl">16.6</span>     <span class="dv">1</span></span>
<span id="cb28-42"><a href="#cb28-42" tabindex="-1"></a> <span class="dv">9</span> AB             <span class="sc">-</span>         <span class="dv">3</span>  <span class="fl">79.8</span>  <span class="dv">15</span>       <span class="dv">2</span></span>
<span id="cb28-43"><a href="#cb28-43" tabindex="-1"></a><span class="dv">10</span> AB             <span class="sc">-</span>         <span class="dv">4</span>  <span class="fl">84.8</span>  <span class="fl">17.4</span>     <span class="dv">3</span></span>
<span id="cb28-44"><a href="#cb28-44" tabindex="-1"></a><span class="dv">11</span> B              <span class="sc">+</span>         <span class="dv">2</span>  <span class="fl">77.8</span>  <span class="fl">16.4</span>     <span class="dv">1</span></span>
<span id="cb28-45"><a href="#cb28-45" tabindex="-1"></a><span class="dv">12</span> B              <span class="sc">+</span>         <span class="dv">5</span>  <span class="fl">83.8</span>  <span class="fl">14.6</span>     <span class="dv">2</span></span>
<span id="cb28-46"><a href="#cb28-46" tabindex="-1"></a><span class="dv">13</span> B              <span class="sc">-</span>         <span class="dv">1</span>  <span class="fl">74.5</span>  <span class="fl">14.9</span>     <span class="dv">1</span></span>
<span id="cb28-47"><a href="#cb28-47" tabindex="-1"></a><span class="dv">14</span> B              <span class="sc">-</span>         <span class="dv">3</span>  <span class="fl">85.1</span>  <span class="fl">16.2</span>     <span class="dv">2</span></span>
<span id="cb28-48"><a href="#cb28-48" tabindex="-1"></a><span class="dv">15</span> B              <span class="sc">-</span>         <span class="dv">4</span>  <span class="fl">83.3</span>  <span class="fl">16.6</span>     <span class="dv">3</span></span>
<span id="cb28-49"><a href="#cb28-49" tabindex="-1"></a><span class="dv">16</span> O              <span class="sc">+</span>         <span class="dv">1</span>  <span class="fl">80.3</span>  <span class="dv">15</span>       <span class="dv">1</span></span>
<span id="cb28-50"><a href="#cb28-50" tabindex="-1"></a><span class="dv">17</span> O              <span class="sc">+</span>         <span class="dv">3</span>  <span class="fl">78.9</span>  <span class="fl">14.8</span>     <span class="dv">2</span></span>
<span id="cb28-51"><a href="#cb28-51" tabindex="-1"></a><span class="dv">18</span> O              <span class="sc">+</span>         <span class="dv">4</span>  <span class="fl">81.2</span>  <span class="fl">14.9</span>     <span class="dv">3</span></span>
<span id="cb28-52"><a href="#cb28-52" tabindex="-1"></a><span class="dv">19</span> O              <span class="sc">+</span>         <span class="dv">5</span>  <span class="fl">84.9</span>  <span class="dv">15</span>       <span class="dv">4</span></span>
<span id="cb28-53"><a href="#cb28-53" tabindex="-1"></a><span class="dv">20</span> O              <span class="sc">-</span>         <span class="dv">2</span>  <span class="fl">80.7</span>  <span class="fl">16.1</span>     <span class="dv">1</span></span></code></pre>
</div>
<p>Como puede observar el problema no se ha corregido.</p>
<p>Para conrregirlo podemos o incluir el <code>ungroup</code> desde el
inicio cuando creamos el objeto <code>por_dia</code>, o aplicar el
cambio y guardarlo en el objeto:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="co">#ahora estamos almacenando el desagrupamiento</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>por_dia_sin_grupo <span class="ot">&lt;-</span> por_dia <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>por_dia_sin_grupo <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a><span class="co"># A tibble: 20 × 6</span></span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>   tipo_sanguineo rh      dia   f_l   f_r    id</span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>          <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a> <span class="dv">1</span> A              <span class="sc">+</span>         <span class="dv">1</span>  <span class="fl">76.3</span>  <span class="fl">15.2</span>     <span class="dv">1</span></span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a> <span class="dv">2</span> A              <span class="sc">+</span>         <span class="dv">3</span>  <span class="fl">81.5</span>  <span class="fl">16.6</span>     <span class="dv">2</span></span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a> <span class="dv">3</span> A              <span class="sc">+</span>         <span class="dv">4</span>  <span class="fl">81.2</span>  <span class="fl">15.6</span>     <span class="dv">3</span></span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a> <span class="dv">4</span> A              <span class="sc">+</span>         <span class="dv">5</span>  <span class="dv">81</span>    <span class="fl">15.9</span>     <span class="dv">4</span></span>
<span id="cb29-12"><a href="#cb29-12" tabindex="-1"></a> <span class="dv">5</span> A              <span class="sc">-</span>         <span class="dv">2</span>  <span class="fl">78.3</span>  <span class="fl">16.2</span>     <span class="dv">5</span></span>
<span id="cb29-13"><a href="#cb29-13" tabindex="-1"></a> <span class="dv">6</span> AB             <span class="sc">+</span>         <span class="dv">2</span>  <span class="fl">79.3</span>  <span class="dv">16</span>       <span class="dv">6</span></span>
<span id="cb29-14"><a href="#cb29-14" tabindex="-1"></a> <span class="dv">7</span> AB             <span class="sc">+</span>         <span class="dv">5</span>  <span class="fl">73.1</span>  <span class="fl">17.4</span>     <span class="dv">7</span></span>
<span id="cb29-15"><a href="#cb29-15" tabindex="-1"></a> <span class="dv">8</span> AB             <span class="sc">-</span>         <span class="dv">1</span>  <span class="dv">83</span>    <span class="fl">16.6</span>     <span class="dv">8</span></span>
<span id="cb29-16"><a href="#cb29-16" tabindex="-1"></a> <span class="dv">9</span> AB             <span class="sc">-</span>         <span class="dv">3</span>  <span class="fl">79.8</span>  <span class="dv">15</span>       <span class="dv">9</span></span>
<span id="cb29-17"><a href="#cb29-17" tabindex="-1"></a><span class="dv">10</span> AB             <span class="sc">-</span>         <span class="dv">4</span>  <span class="fl">84.8</span>  <span class="fl">17.4</span>    <span class="dv">10</span></span>
<span id="cb29-18"><a href="#cb29-18" tabindex="-1"></a><span class="dv">11</span> B              <span class="sc">+</span>         <span class="dv">2</span>  <span class="fl">77.8</span>  <span class="fl">16.4</span>    <span class="dv">11</span></span>
<span id="cb29-19"><a href="#cb29-19" tabindex="-1"></a><span class="dv">12</span> B              <span class="sc">+</span>         <span class="dv">5</span>  <span class="fl">83.8</span>  <span class="fl">14.6</span>    <span class="dv">12</span></span>
<span id="cb29-20"><a href="#cb29-20" tabindex="-1"></a><span class="dv">13</span> B              <span class="sc">-</span>         <span class="dv">1</span>  <span class="fl">74.5</span>  <span class="fl">14.9</span>    <span class="dv">13</span></span>
<span id="cb29-21"><a href="#cb29-21" tabindex="-1"></a><span class="dv">14</span> B              <span class="sc">-</span>         <span class="dv">3</span>  <span class="fl">85.1</span>  <span class="fl">16.2</span>    <span class="dv">14</span></span>
<span id="cb29-22"><a href="#cb29-22" tabindex="-1"></a><span class="dv">15</span> B              <span class="sc">-</span>         <span class="dv">4</span>  <span class="fl">83.3</span>  <span class="fl">16.6</span>    <span class="dv">15</span></span>
<span id="cb29-23"><a href="#cb29-23" tabindex="-1"></a><span class="dv">16</span> O              <span class="sc">+</span>         <span class="dv">1</span>  <span class="fl">80.3</span>  <span class="dv">15</span>      <span class="dv">16</span></span>
<span id="cb29-24"><a href="#cb29-24" tabindex="-1"></a><span class="dv">17</span> O              <span class="sc">+</span>         <span class="dv">3</span>  <span class="fl">78.9</span>  <span class="fl">14.8</span>    <span class="dv">17</span></span>
<span id="cb29-25"><a href="#cb29-25" tabindex="-1"></a><span class="dv">18</span> O              <span class="sc">+</span>         <span class="dv">4</span>  <span class="fl">81.2</span>  <span class="fl">14.9</span>    <span class="dv">18</span></span>
<span id="cb29-26"><a href="#cb29-26" tabindex="-1"></a><span class="dv">19</span> O              <span class="sc">+</span>         <span class="dv">5</span>  <span class="fl">84.9</span>  <span class="dv">15</span>      <span class="dv">19</span></span>
<span id="cb29-27"><a href="#cb29-27" tabindex="-1"></a><span class="dv">20</span> O              <span class="sc">-</span>         <span class="dv">2</span>  <span class="fl">80.7</span>  <span class="fl">16.1</span>    <span class="dv">20</span></span></code></pre>
</div>
<p>Como puede observar ahora si tenemos cada fila con su propio id.</p>
<p>Advertencia: Es importante aclarar que el desagrupamiento en los
escenarios anteriores iría después de la operación, sin embargo, en este
caso iría antes de la operación.</p>
</div>
<div class="section level3">
<h3 id="cuando-trato-de-crear-un-pdf-en-rmarkdown-me-sale-error">Cuando trato de crear un pdf en RMarkdown me sale error<a class="anchor" aria-label="anchor" href="#cuando-trato-de-crear-un-pdf-en-rmarkdown-me-sale-error"></a>
</h3>
<p>Si el archivo sale correctamente en otros formatos a excepción de
pdf. Una de las situaciones más frecuentes es que falte la instalación
de LaTeX: RMarkdown necesita LaTeX para generar PDFs. Asegúrate de tener
LaTeX instalado en tu sistema.</p>
<p>Para instalar LaTeX desde RStudio, puede usar el paquete TinyTeX:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"tinytex"</span><span class="op">)</span></span>
<span><span class="fu">tinytex</span><span class="fu">::</span><span class="fu">install_tinytex</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>Configure RStudio:</p>
<p>Vaya a Tools &gt; Global Options &gt; Sweave.</p>
<p>Asegúrese de que la opción “Typeset PDF” esté configurada para usar
TinyTeX.</p>
</div>
<div class="section level3">
<h3 id="material-adicional-que-puede-aportar-a-su-aprendizaje">Material adicional que puede aportar a su aprendizaje:<a class="anchor" aria-label="anchor" href="#material-adicional-que-puede-aportar-a-su-aprendizaje"></a>
</h3>
<p><strong>Manejo de datos con Tidyverse y R:</strong></p>
<p><a href="https://www.youtube.com/watch?v=6STcQVX8Hk0" class="external-link uri">https://www.youtube.com/watch?v=6STcQVX8Hk0</a></p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<p>Si después de buscar en esta guía sus preguntas no encontro respuesta
por favor diligencie el siguiente formulario <a href="https://forms.office.com/pages/responsepage.aspx?id=Dpn32j-KnECbdipUdQmAAMjWJqHZ8P1DkQQdb07M30RUOEY5N1U1UDFYMExGMzFHRkRKT1BTRTFRWS4u&amp;route=shorturl&amp;sid=6a94f23c-049c-4f54-9732-fc25789059b3" class="external-link uri">Dudas por resolver</a></p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="contribuciones">Contribuciones<a class="anchor" aria-label="anchor" href="#contribuciones"></a>
</h2>
<hr class="half-width">
<ul>
<li><p>José M. Velasco-España: Versión inicial</p></li>
<li><p>Andree Valle-Campos: Ediciones menores</p></li>
<li><p>Laura Gómez-Bermeo: Ediciones menores</p></li>
<li><p>Geraldine Gomez: Ediciones menores</p></li>
</ul>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 --></section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>Esta lección está sujeta al <a href="CODE_OF_CONDUCT.html">Código de Conducta</a></p>
        <p>

        <a href="https://github.com/epiverse-trace/epitkit/edit/main/README.md" class="external-link">Editar en GitHub</a>

	
        | <a href="https://github.com/epiverse-trace/epitkit/blob/main/CONTRIBUTING.md" class="external-link">Contribuir</a>
        | <a href="https://github.com/epiverse-trace/epitkit/" class="external-link">Fuente</a></p>
				<p><a href="https://github.com/epiverse-trace/epitkit/blob/main/CITATION.cff" class="external-link">Cita</a> | <a href="mailto:gomezblaura@javeriana.edu.co">Contacto</a> | <a href="https://carpentries.org/about/" class="external-link">Acerca de</a></p>
			</div>
			<div class="col-md-6">

        <p>Materiales bajo la <a href="LICENSE.html">CC-BY 4.0</a> por las autoras</p>

        <p>Plantilla compartida bajo <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> por <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Construido con <a href="https://github.com/epiverse-trace/sandpaper/tree/patch-renv-github-bug" class="external-link">sandpaper (0.16.6)</a>, <a href="https://github.com/carpentries/pegboard/tree/ad2542f7f7b9c3f90cc871b355ff81ec14a09ca9" class="external-link">pegboard (0.7.6)</a> y <a href="https://github.com/epiverse-trace/varnish/tree/epitkit" class="external-link">varnish (1.0.3)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Volver al inicio"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Volver</span> al inicio
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://epiverse-trace.github.io/epitkit/instructor/aio.html",
  "inLanguage": "es",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Todo en una sola página",
  "creativeWorkStatus": "active",
  "url": "https://epiverse-trace.github.io/epitkit/instructor/aio.html",
  "identifier": "https://epiverse-trace.github.io/epitkit/instructor/aio.html",
  "dateCreated": "2024-09-09",
  "dateModified": "2024-10-28",
  "datePublished": "2024-10-28"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

